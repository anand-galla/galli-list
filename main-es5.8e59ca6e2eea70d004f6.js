function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toArray(t){return _arrayWithHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableRest()}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _construct(t,e,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=_superPropBase(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u}));var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function o(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}var a=n("qOnz"),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),u=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new a.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),o=r.next();!o.done;o=r.next()){var a=i(o.value,2),s=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,n=function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(o(o([],i(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),i(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(r,i){function o(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,a)}s((n=n.apply(t,[])).next())}));var t,e,n},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?"[DEFAULT]":e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),c=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new u(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){return _classCallCheck(this,n),e.call(this)}return _createClass(n,[{key:"schedule",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),n}(n("quSY").a))},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),a=n("lJxs"),s=n("Cfvw");function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(r){return r.pipe(u((function(n,r){return Object(s.a)(t(n,r)).pipe(Object(a.a)((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new c(t,n))})}var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,t),this.project=e,this.concurrent=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}]),t}(),l=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var i=new o.a(this,e,n),a=this.destination;a.add(i);var s=Object(r.a)(this,t,void 0,void 0,i);s!==i&&a.add(s)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyComplete",value:function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(i.a)},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return _createClass(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(n("7o/Q").a)},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mAIw"),o=n("qOnz"),a=n("q/0M"),s=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new a.b("@firebase/database"),p=(e=1,function(){return e++}),v=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var a=e[i];Array.isArray(a)||a&&"object"==typeof a&&"number"==typeof a.length?r+=t.apply(null,a):r+="object"==typeof a?Object(o.F)(a):a,r+=" "}return r},m=null,g=!0,_=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=a.a.VERBOSE,m=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,f.remove("logging_enabled"))},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===g&&(g=!1,null===m&&!0===f.get("logging_enabled")&&_(!0)),m){var n=y.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];b.apply(void 0,Object(i.f)([t],Object(i.e)(e)))}},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));throw d.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));d.warn(n)},E=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",O="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===O)return-1;if(e===T||t===O)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},I=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},D=function t(e){if("object"!=typeof e||null===e)return Object(o.F)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Object(o.F)(n[a]),i+=":",i+=t(e[n[a]]);return i+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var N=function(t){var e,n,r,i,a;Object(o.d)(!E(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},j=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(j.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},M=function(t){try{t()}catch(e){setTimeout((function(){throw S("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},L=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function U(){return new V("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function B(t){return t.pieces_.length-t.pieceNum_}function z(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function H(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function G(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function W(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function K(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function Q(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new V(n,0)}function Y(t){return t.pieceNum_>=t.pieces_.length}function X(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return X(z(t),z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Z(t,e){for(var n=W(t,0),r=W(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function J(t,e){if(B(t)!==B(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function $(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(B(t)>B(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt=function(t,e){this.errorPrefix_=e,this.parts_=W(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);et(this)};function et(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nt(t))}function nt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,it=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function ot(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return R(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var at,st,ut,ct,lt,ht,ft,dt=function(t,e){var n=pt(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new it(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new V(n.pathString)}},pt=function(t){var e="",n="",r="",o="",a="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.g)(t.split("&")),a=o.next();!a.done;a=o.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),a=r}"ns"in d&&(a=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:o,namespace:a}},vt=/[\[\].#$\/\u0000-\u001F\u007F]/,yt=/[\[\].#$\u0000-\u001F\u007F]/,mt=function(t){return"string"==typeof t&&0!==t.length&&!vt.test(t)},gt=function(t){return"string"==typeof t&&0!==t.length&&!yt.test(t)},_t=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!E(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},bt=function(t,e,n,r,i){i&&void 0===n||wt(Object(o.l)(t,e,i),n,r)},wt=function t(e,n,r){var i=r instanceof V?new tt(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+nt(i));if("function"==typeof n)throw new Error(e+"contains a function "+nt(i)+" with contents = "+n.toString());if(E(n))throw new Error(e+"contains "+n.toString()+" "+nt(i));if("string"==typeof n&&n.length>10485760/3&&Object(o.D)(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+nt(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var a=!1,s=!1;if(R(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!mt(n)))throw new Error(e+" contains an invalid key ("+n+") "+nt(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,c;c=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(c),u.byteLength_+=Object(o.D)(c),et(u),t(e,r,i),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.D)(e),t.parts_.length>0&&(t.byteLength_-=1)}(i)})),a&&s)throw new Error(e+' contains ".value" child '+nt(i)+" in addition to actual children.")}},kt=function(t,e,n,r,i){if(!i||void 0!==n){var a=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];R(n,(function(t,e){var n=new V(t);if(wt(a,e,Q(r,n)),".priority"===H(n)&&!_t(e))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=W(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!mt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Z);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&$(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(a,s)}},Ct=function(t,e,n,r){if(!r||void 0!==n){if(E(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_t(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},St=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Et=function(t,e,n,r){if(!(r&&void 0===n||mt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Tt=function(t,e,n,r){if(!(r&&void 0===n||gt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ot=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Tt(t,e,n,r)},xt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},It=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!mt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gt(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},At=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},Dt=function(t){return"number"==typeof t?"number:"+N(t):"string:"+t},Pt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===at||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===at||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Rt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Pt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return st},set:function(t){st=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return Y(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===B(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(z(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Dt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?N(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Nt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),jt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Mt.EMPTY_NODE,this.right=null!=o?o:Mt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Mt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Mt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ft=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new jt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Mt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Nt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Nt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ft,t}(),Lt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Vt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Lt(T,t),r=new Lt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Lt.MIN},t}(),Ut=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Lt.MIN},e.prototype.maxPost=function(){return new Lt(O,new Rt("[PRIORITY-POST]",ct))},e.prototype.makePost=function(t,e){var n=ut(t);return new Lt(e,new Rt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Vt)),qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return lt},set:function(t){lt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Lt.MIN},e.prototype.maxPost=function(){return new Lt(O,lt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Lt(t,lt)},e.prototype.toString=function(){return".key"},e}(Vt),Bt=new qt,zt=Math.log(2),Ht=function(){function t(t){this.count=parseInt(Math.log(t+1)/zt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Gt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e;var u=function e(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=t[r],a=n?n(o):o,new jt(a,o.node,jt.BLACK,null,null);var u=parseInt(s/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],a=n?n(o):o,new jt(a,o.node,jt.BLACK,c,l)}(i+1,a),c=t[i],l=n?n(c):c;s(new jt(l,c.node,r,null,u))},s=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?a(l,jt.BLACK):(a(l,jt.BLACK),a(l,jt.RED))}return i}(new Ht(t.length));return new Mt(r||e,i)},Wt={},Kt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Wt&&Ut,"ChildrenNode.ts has not been loaded"),ht=ht||new t({".priority":Wt},{".priority":Ut})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Mt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Bt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(Lt.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?Gt(a,e.getCompare()):Wt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,(function(t,i){var a=Object(o.C)(r.indexSet_,i);if(Object(o.d)(a,"Missing index implementation for "+i),t===Wt){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(Lt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),Gt(s,a.getCompare())}return Wt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Lt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,(function(t){if(t===Wt)return t;var r=n.get(e.name);return r?t.remove(new Lt(e.name,r)):t})),this.indexSet_)},t}();function Qt(t,e){return x(t.name,e.name)}function Yt(t,e){return x(t,e)}var Xt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Pt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ft||(ft=new t(new Mt(Yt),null,Kt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ft},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ft:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(z(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Lt(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?ft:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.d)(".priority"!==q(t)||1===B(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(z(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ut,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Dt(this.getPriority().val())+":"),this.forEachChild(Ut,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Lt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Lt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Lt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Lt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Lt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Zt?-1:0},t.prototype.withIndex=function(e){if(e===Bt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Bt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ut),r=e.getIterator(Ut),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Bt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Zt=new(function(t){function e(){return t.call(this,new Mt(Yt),Xt.EMPTY_NODE,Kt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Xt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Xt));function Jt(t,e){if(void 0===e&&(e=null),null===t)return Xt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Rt(t,Jt(e));if(t instanceof Array){var n=Xt.EMPTY_NODE;return R(t,(function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=Jt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Jt(e))}var r=[],i=!1;if(R(t,(function(t,e){if("."!==t.substring(0,1)){var n=Jt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Lt(t,n)))}})),0===r.length)return Xt.EMPTY_NODE;var a=Gt(r,Qt,(function(t){return t.name}),Yt);if(i){var s=Gt(r,Ut.getCompare());return new Xt(a,Jt(e),new Kt({".priority":s},{".priority":Ut}))}return new Xt(a,Jt(e),Kt.Default)}Object.defineProperties(Lt,{MIN:{value:new Lt(T,Xt.EMPTY_NODE)},MAX:{value:new Lt(O,Zt)}}),qt.__EMPTY_NODE=Xt.EMPTY_NODE,Rt.__childrenNodeConstructor=Xt,at=Zt,ct=Zt,function(t){ut=t}(Jt);var $t=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function te(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var ee,ne=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=$t.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Y(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new V(e));return new t(U(),n,this.revert)}return Object(o.d)(q(this.path)===e,"operationForChild called for unrelated child."),new t(z(this.path),this.affectedTree,this.revert)},t}(),re=function(){function t(t,e){void 0===e&&(ee||(ee=new Mt(I)),e=ee),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return R(e,(function(t,e){n=n.set(new V(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:U(),value:this.value};if(Y(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(z(t),e);return null!=i?{path:Q(new V(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(Y(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(z(e)):new t(null)},t.prototype.set=function(e,n){if(Y(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(z(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(Y(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(z(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(Y(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(z(t)):null},t.prototype.setTree=function(e,n){if(Y(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(z(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(U(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Q(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,U(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Y(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(z(t),Q(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,U(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(Y(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(z(e),Q(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(U(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(Q(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),ie=function(){function t(t,e){this.source=t,this.path=e,this.type=$t.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Y(this.path)?new t(this.source,U()):new t(this.source,z(this.path))},t}(),oe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=$t.OVERWRITE}return t.prototype.operationForChild=function(e){return Y(this.path)?new t(this.source,U(),this.snap.getImmediateChild(e)):new t(this.source,z(this.path),this.snap)},t}(),ae=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=$t.MERGE}return t.prototype.operationForChild=function(e){if(Y(this.path)){var n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new oe(this.source,U(),n.value):new t(this.source,U(),n)}return Object(o.d)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,z(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),se=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(Y(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();function ue(t,e){return{eventCache:t,serverCache:e}}function ce(t,e,n,r){return ue(new se(e,n,r),t.serverCache)}function le(t,e,n,r){return ue(t.eventCache,new se(e,n,r))}function he(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function fe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}function de(t){return{type:"value",snapshotNode:t}}function pe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ve(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var me=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(ve(e,s)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(pe(e,n)):a.trackChildChange(ye(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ut,(function(t,r){e.hasChild(t)||n.trackChildChange(ve(t,r))})),e.isLeafNode()||e.forEachChild(Ut,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(pe(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Xt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ge=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ve(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,pe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),_e=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new re(null))},t}();function be(t,e,n){if(Y(e))return new _e(new re(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=X(i,e);return o=o.updateChild(a,n),new _e(t.writeTree_.set(i,o))}var s=new re(n),u=t.writeTree_.setTree(e,s);return new _e(u)}function we(t,e,n){var r=t;return R(n,(function(t,n){r=be(r,Q(e,t),n)})),r}function ke(t,e){if(Y(e))return _e.empty();var n=t.writeTree_.setTree(e,new re(null));return new _e(n)}function Ce(t,e){return null!=Se(t,e)}function Se(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(X(n.path,e)):null}function Ee(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ut,(function(t,n){e.push(new Lt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Lt(t,n.value))})),e}function Te(t,e){if(Y(e))return t;var n=Se(t,e);return new _e(null!=n?new re(n):t.writeTree_.subtree(e))}function Oe(t){return t.writeTree_.isEmpty()}function xe(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,a){".priority"===n?(Object(o.d)(null!==a.value,"Priority writes must always be leaf nodes"),i=a.value):r=t(Q(e,n),a,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(Q(e,".priority"),i)),r}(U(),t.writeTree_,e)}function Ie(t,e){return Ue(e,t)}function Ae(t,e){if(t.snap)return $(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&$(Q(t.path,n),e))return!0;return!1}function De(t){return t.visible}function Pe(t,e,n){for(var r=_e.empty(),i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)$(n,s)?r=be(r,u=X(n,s),a.snap):$(s,n)&&(u=X(s,n),r=be(r,U(),a.snap.getChild(u)));else{if(!a.children)throw Object(o.e)("WriteRecord should have .snap or .children");if($(n,s))r=we(r,u=X(n,s),a.children);else if($(s,n))if(Y(u=X(s,n)))r=we(r,U(),a.children);else{var c=Object(o.C)(a.children,q(u));if(c){var l=c.getChild(z(u));r=be(r,U(),l)}}}}}return r}function Re(t,e,n,r,i){if(r||i){var o=Te(t.visibleWrites,e);return!i&&Oe(o)?n:i||null!=n||Ce(o,U())?xe(Pe(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&($(t.path,e)||$(e,t.path))}),e),n||Xt.EMPTY_NODE):null}var a=Se(t.visibleWrites,e);if(null!=a)return a;var s=Te(t.visibleWrites,e);return Oe(s)?n:null!=n||Ce(s,U())?xe(s,n||Xt.EMPTY_NODE):null}function Ne(t,e,n,r){return Re(t.writeTree,t.treePath,e,n,r)}function je(t,e){return function(t,e,n){var r=Xt.EMPTY_NODE,i=Se(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ut,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Te(t.visibleWrites,e);return n.forEachChild(Ut,(function(t,e){var n=xe(Te(o,new V(t)),e);r=r.updateImmediateChild(t,n)})),Ee(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return Ee(Te(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Fe(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Q(e,n);if(Ce(t.visibleWrites,a))return null;var s=Te(t.visibleWrites,a);return Oe(s)?i.getChild(n):xe(s,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function Me(t,e){return function(t,e){return Se(t.visibleWrites,e)}(t.writeTree,Q(t.treePath,e))}function Le(t,e,n){return function(t,e,n,r){var i=Q(e,n),o=Se(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?xe(Te(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Ve(t,e){return Ue(Q(t.treePath,e),t.writeTree)}function Ue(t,e){return{treePath:t,writeTree:e}}var qe=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Be=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new se(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Le(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:fe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=Te(t.visibleWrites,e),c=Se(u,U());if(null!=c)s=c;else{if(null==n)return[];s=xe(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function ze(t,e,n,r,i,a){var s=e.eventCache;if(null!=Me(r,n))return e;var u=void 0,c=void 0;if(Y(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=fe(e),h=je(r,l instanceof Xt?l:Xt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{var f=Ne(r,fe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var d=q(n);if(".priority"===d){Object(o.d)(1===B(n),"Can't have a priority with additional path components");var p=s.getNode(),v=Fe(r,n,p,c=e.serverCache.getNode());u=null!=v?t.filter.updatePriority(p,v):s.getNode()}else{var y=z(n),m=void 0;if(s.isCompleteForChild(d)){c=e.serverCache.getNode();var g=Fe(r,n,s.getNode(),c);m=null!=g?s.getNode().getImmediateChild(d).updateChild(y,g):s.getNode().getImmediateChild(d)}else m=Le(r,d,e.serverCache);u=null!=m?t.filter.updateChild(s.getNode(),d,m,y,i,a):s.getNode()}}return ce(e,u,s.isFullyInitialized()||Y(n),t.filter.filtersNodes())}function He(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(Y(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=q(n);if(!c.isCompleteForPath(n)&&B(n)>1)return e;var d=z(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,qe,null)}var v=le(e,u,c.isFullyInitialized()||Y(n),l.filtersNodes());return ze(t,v,n,i,new Be(i,v,o),s)}function Ge(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new Be(i,e,o);if(Y(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=ce(e,u,!0,t.filter.filtersNodes());else{var h=q(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=ce(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=z(n),d=c.getNode().getImmediateChild(h),p=void 0;if(Y(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===H(f)&&v.getChild(K(f)).isEmpty()?v:v.updateChild(f,r):Xt.EMPTY_NODE}s=d.equals(p)?e:ce(e,t.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function We(t,e){return t.eventCache.isCompleteForChild(e)}function Ke(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Qe(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=Y(n)?r:new re(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Ke(0,e.serverCache.getNode().getImmediateChild(n),r);c=He(t,c,new V(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Ke(0,e.serverCache.getNode().getImmediateChild(n),r);c=He(t,c,new V(n),h,i,o,a,s)}})),c}var Ye=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};function Xe(t,e,n,r,i,a){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new Lt(e.childName,e.snapshotNode),i=new Lt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),s.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,a);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}var Ze,Je,$e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",tn=(Ze=0,Je=[],function(t){var e,n=t===Ze;Ze=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=$e.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===Je[e];e--)Je[e]=0;Je[e]++}else for(e=0;e<12;e++)Je[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=$e.charAt(Je[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),en=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return O;var o=$e.charAt($e.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},nn=function(t){if("-2147483648"===t)return T;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=$e.charAt($e.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},rn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Lt.MIN},e.prototype.maxPost=function(){return Lt.MAX},e.prototype.makePost=function(t,e){var n=Jt(t);return new Lt(e,n)},e.prototype.toString=function(){return".value"},e}(Vt)),on=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!Y(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Jt(t),r=Xt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Lt(e,r)},e.prototype.maxPost=function(){var t=Xt.EMPTY_NODE.updateChild(this.indexPath_,Zt);return new Lt(O,t)},e.prototype.toString=function(){return W(this.indexPath_,0).join("/")},e}(Vt),an=function(){function t(e){this.indexedFilter_=new me(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Lt(e,n))||(n=Xt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Xt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Xt.EMPTY_NODE);var i=this;return e.forEachChild(Ut,(function(t,e){i.matches(new Lt(t,e))||(r=r.updateImmediateChild(t,Xt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),sn=function(){function t(t){this.rangedFilter_=new an(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Lt(e,n))||(n=Xt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Xt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Xt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Xt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Lt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ye(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ve(e,f));var v=u.updateImmediateChild(e,Xt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(pe(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(ve(l.name,l.node)),i.trackChildChange(pe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Xt.EMPTY_NODE)):t},t}(),un=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ut}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ut},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function cn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function ln(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function hn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function fn(t,e,n){var r;return t.index_===Bt?("string"==typeof e&&(e=en(e)),r=hn(t,e,n)):r=hn(t,e,null==n?O:en(n)),r.startAfterSet_=!0,r}function dn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function pn(t,e,n){var r;return t.index_===Bt?("string"==typeof e&&(e=nn(e)),r=dn(t,e,n)):r=dn(t,e,null==n?T:nn(n)),r.endBeforeSet_=!0,r}function vn(t,e){var n=t.copy();return n.index_=e,n}function yn(t){var e,n={};return t.isDefault()||(t.index_===Ut?e="$priority":t.index_===rn?e="$value":t.index_===Bt?e="$key":(Object(o.d)(t.index_ instanceof on,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.F)(e),t.startSet_&&(n.startAt=Object(o.F)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.F)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.F)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.F)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var mn,gn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new me(r.getIndex()),o=(n=r).loadsAllData()?new me(n.getIndex()):n.hasLimit()?new sn(n):new an(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(Xt.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(Xt.EMPTY_NODE,s.getNode(),null),l=new se(u,a.isFullyInitialized(),i.filtersNodes()),h=new se(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=ue(h,l),this.eventGenerator_=new Ye(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function _n(t,e){var n=fe(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!Y(e)&&!n.getImmediateChild(q(e)).isEmpty())?n.getChild(e):null}function bn(t){return 0===t.eventRegistrations_.length}function wn(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function kn(t,e,n,r){e.type===$t.MERGE&&null!==e.source.queryId&&(Object(o.d)(fe(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)(he(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=t.viewCache_,u=function(t,e,n,r,i){var a,s,u=new ge;if(n.type===$t.OVERWRITE){var c=n;c.source.fromUser?a=Ge(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!Y(c.path),a=He(t,e,c.path,c.snap,r,i,s,u))}else if(n.type===$t.MERGE){var l=n;l.source.fromUser?a=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=Q(n,r);We(e,q(c))&&(s=Ge(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=Q(n,r);We(e,q(c))||(s=Ge(t,s,c,u,i,o,a))})),s}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=Qe(t,e,l.path,l.children,r,i,s,u))}else if(n.type===$t.ACK_USER_WRITE){var h=n;a=h.revert?function(t,e,n,r,i,a){var s;if(null!=Me(r,n))return e;var u=new Be(r,e,i),c=e.eventCache.getNode(),l=void 0;if(Y(n)||".priority"===q(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=Ne(r,fe(e));else{var f=e.serverCache.getNode();Object(o.d)(f instanceof Xt,"serverChildren would be complete if leaf node"),h=je(r,f)}l=t.filter.updateFullNode(c,h=h,a)}else{var d=q(n),p=Le(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,z(n),u,a):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,Xt.EMPTY_NODE,z(n),u,a):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Ne(r,fe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,s,a))}return s=e.serverCache.isFullyInitialized()||null!=Me(r,U()),ce(e,l,s,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,a){if(null!=Me(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Y(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return He(t,e,n,u.getNode().getChild(n),i,o,s,a);if(Y(n)){var c=new re(null);return u.getNode().forEachChild(Bt,(function(t,e){c=c.set(new V(t),e)})),Qe(t,e,n,c,i,o,s,a)}return e}var l=new re(null);return r.foreach((function(t,e){var r=Q(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Qe(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==$t.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){var o=e.serverCache;return ze(t,le(e,o.getNode(),o.isFullyInitialized()||Y(n),o.isFiltered()),n,r,qe,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=he(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(de(he(e)))}}(e,a,f),{viewCache:a,changes:f}}(t.processor_,s,e,n,r);return i=t.processor_,a=u.viewCache,Object(o.d)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Cn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Cn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})})),Xe(t,i,"child_removed",e,r,n),Xe(t,i,"child_added",e,r,n),Xe(t,i,"child_moved",o,r,n),Xe(t,i,"child_changed",e,r,n),Xe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Sn=function(){this.views=new Map};function En(t,e,n,r){var a,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),kn(c,e,n,r)}var l=[];try{for(var h=Object(i.g)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(kn(c=f.value,e,n,r))}catch(d){a={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return l}function Tn(t,e,n,r,i){var o=e.queryIdentifier(),a=t.views.get(o);if(!a){var s=Ne(n,i?r:null),u=!1;s?u=!0:r instanceof Xt?(s=je(n,r),u=!1):(s=Xt.EMPTY_NODE,u=!1);var c=ue(new se(s,u,!1),new se(r,i,!1));return new gn(e,c)}return a}function On(t){var e,n,r=[];try{for(var o=Object(i.g)(t.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;s.query.getQueryParams().loadsAllData()||r.push(s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function xn(t,e){var n,r,o=null;try{for(var a=Object(i.g)(t.views.values()),s=a.next();!s.done;s=a.next())o=o||_n(s.value,e)}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o}function In(t,e){if(e.getQueryParams().loadsAllData())return Pn(t);var n=e.queryIdentifier();return t.views.get(n)}function An(t,e){return null!=In(t,e)}function Dn(t){return null!=Pn(t)}function Pn(t){var e,n;try{for(var r=Object(i.g)(t.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;if(a.query.getQueryParams().loadsAllData())return a}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Rn=1,Nn=function(t){this.listenProvider_=t,this.syncPointTree_=new re(null),this.pendingWriteTree_={visibleWrites:_e.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function jn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=be(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?qn(t,new oe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Fn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=t.allWrites.length-1;i&&s>=0;){var u=t.allWrites[s];u.visible&&(s>=n&&Ae(u,r.path)?i=!1:$(r.path,u.path)&&(a=!0)),s--}return!!i&&(a?(function(t){t.visibleWrites=Pe(t.allWrites,De,U()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=ke(t.visibleWrites,r.path):R(r.children,(function(e){t.visibleWrites=ke(t.visibleWrites,Q(r.path,e))})),!0))}(t.pendingWriteTree_,e)){var i=new re(null);return null!=r.snap?i=i.set(U(),!0):R(r.children,(function(t){i=i.set(new V(t),!0)})),qn(t,new ne(r.path,i,n))}return[]}function Mn(t,e,n){return qn(t,new oe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Ln(t,e,n,r){var a=e.path,s=t.syncPointTree_.get(a),u=[];if(s&&("default"===e.queryIdentifier()||An(s,e))){var c=function(t,e,n,r){var a,s,u=e.queryIdentifier(),c=[],l=[],h=Dn(t);if("default"===u)try{for(var f=Object(i.g)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,v=Object(i.e)(d.value,2),y=v[0];l=l.concat(wn(p=v[1],n,r)),bn(p)&&(t.views.delete(y),p.query.getQueryParams().loadsAllData()||c.push(p.query))}}catch(m){a={error:m}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}else(p=t.views.get(u))&&(l=l.concat(wn(p,n,r)),bn(p)&&(t.views.delete(u),p.query.getQueryParams().loadsAllData()||c.push(p.query)));return h&&!Dn(t)&&c.push(new(Object(o.d)(mn,"Reference.ts has not been loaded"),mn)(e.repo,e.path)),{removed:c,events:l}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(a));var l=c.removed;u=c.events;var h=-1!==l.findIndex((function(t){return t.getQueryParams().loadsAllData()})),f=t.syncPointTree_.findOnPath(a,(function(t,e){return Dn(e)}));if(h&&!f){var d=t.syncPointTree_.subtree(a);if(!d.isEmpty())for(var p=function(t){return t.fold((function(t,e,n){if(e&&Dn(e))return[Pn(e)];var r=[];return e&&(r=On(e)),R(n,(function(t,e){r=r.concat(e)})),r}))}(d),v=0;v<p.length;++v){var y=p[v],m=y.query,g=Bn(t,y);t.listenProvider_.startListening(Qn(m),zn(t,m),g.hashFn,g.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(Qn(e),null):l.forEach((function(e){var n=t.queryToTagMap.get(Hn(e));t.listenProvider_.stopListening(Qn(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=Hn(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Vn(t,e,n){var r=e.path,i=null,a=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=X(t,r);i=i||xn(e,n),a=a||Dn(e)}));var s,u=t.syncPointTree_.get(r);u?(a=a||Dn(u),i=i||xn(u,U())):(u=new Sn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?s=!0:(s=!1,i=Xt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=xn(e,U());n&&(i=i.updateImmediateChild(t,n))})));var c=An(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=Hn(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Rn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var a=Tn(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ut,(function(t,e){r.push(pe(t,e))})),n.isFullyInitialized()&&r.push(de(n.getNode())),Cn(t,r,n.getNode(),e)}(a,n)}(u,e,n,Ie(t.pendingWriteTree_,r),i,s);if(!c&&!a){var d=In(u,e);f=f.concat(function(t,e,n){var r=e.path,i=zn(t,e),a=Bn(t,n),s=t.listenProvider_.startListening(Qn(e),i,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!Dn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!Y(t)&&e&&Dn(e))return[Pn(e).query];var r=[];return e&&(r=r.concat(On(e).map((function(t){return t.query})))),R(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(Qn(h),zn(t,h))}return s}(t,e,d))}return f}function Un(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=xn(n,X(t,e));if(r)return r}));return Re(r,e,i,n,!0)}function qn(t,e){return function t(e,n,r,i){if(Y(e.path))return function t(e,n,r,i){var o=n.get(U());null==r&&null!=o&&(r=xn(o,U()));var a=[];return n.children.inorderTraversal((function(n,o){var s=r?r.getImmediateChild(n):null,u=Ve(i,n),c=e.operationForChild(n);c&&(a=a.concat(t(c,o,s,u)))})),o&&(a=a.concat(En(o,e,i,r))),a}(e,n,r,i);var o=n.get(U());null==r&&null!=o&&(r=xn(o,U()));var a=[],s=q(e.path),u=e.operationForChild(s),c=n.children.get(s);if(c&&u){var l=r?r.getImmediateChild(s):null,h=Ve(i,s);a=a.concat(t(u,c,l,h))}return o&&(a=a.concat(En(o,e,i,r))),a}(e,t.syncPointTree_,null,Ie(t.pendingWriteTree_,U()))}function Bn(t,e){var n=e.query,r=zn(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Xt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Gn(t,n);if(r){var i=Wn(r),o=i.path,a=i.queryId,s=X(o,e);return Kn(t,o,new ie(te(a),s))}return[]}(t,n.path,r):function(t,e){return qn(t,new ie({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Ln(t,n,null,i)}}}function zn(t,e){var n=Hn(e);return t.queryToTagMap.get(n)}function Hn(t){return t.path.toString()+"$"+t.queryIdentifier()}function Gn(t,e){return t.tagToQueryMap.get(e)}function Wn(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}}function Kn(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),En(r,n,Ie(t.pendingWriteTree_,e),null)}function Qn(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var Yn=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Xn=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=Q(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Un(this.syncTree_,this.path_)},t}(),Zn=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Jn(t[".sv"],e,n):"object"==typeof t[".sv"]?$n(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Jn=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},$n=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!=typeof a?r:a+r},tr=function(t,e,n,r){return nr(e,new Xn(n,t),r)},er=function(t,e,n){return nr(t,new Yn(e),n)};function nr(t,e,n){var r,i=t.getPriority().val(),o=Zn(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=Zn(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Rt(s,Jt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Rt(o))),u.forEachChild(Ut,(function(t,i){var o=nr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}function rr(){return{value:null,children:new Map}}function ir(t,e,n){if(Y(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=q(e);t.children.has(r)||t.children.set(r,rr()),ir(t.children.get(r),e=z(e),n)}}function or(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){or(r,new V(e.toString()+"/"+t),n)}))}var ar=function(){function t(){this.rootNode_=Xt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),sr=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),ur={},cr={};function lr(t){var e=t.toString();return ur[e]||(ur[e]=new sr),ur[e]}var hr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),fr=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new hr(t);var n=1e4+2e4*Math.random();L(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,(function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),L(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),dr=function(){this.eventLists_=[],this.recursionDepth_=0};function pr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||J(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function vr(t,e,n){pr(t,n),mr(t,(function(t){return J(t,e)}))}function yr(t,e,n){pr(t,n),mr(t,(function(t){return $(t,e)||$(e,t)}))}function mr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(gr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function gr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();m&&b("event: "+n.toString()),M(r)}}}var _r=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)([],Object(i.e)(this.listeners_[t])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),br=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(_r),wr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(_r),kr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&M((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Cr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=lr(e),this.urlFn=function(t){return ot(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new kr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Sr((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],a=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=a,n.password=s;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],a=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,a)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Sr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){b("frame writing exception"),u.stack&&b(u.stack),b(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||b("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){b("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Er="";function Tr(t){Er=t}var Or=null;"undefined"!=typeof MozWebSocket?Or=MozWebSocket:"undefined"!=typeof WebSocket&&(Or=WebSocket);var xr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=lr(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),ot(t,"websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+Er+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,a=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new Or(this.connURL,[],r)}else this.mySock=new Or(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Or&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ir=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Cr,xr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=xr&&xr.isAvailable(),a=o&&!xr.previouslyFailed();if(e.webSocketOnly&&(o||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[xr];else{var s=this.transports_=[];try{for(var u=Object(i.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ar=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Ir(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=L((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?k("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),L((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):L((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Dr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Pr=function(t){function e(n,r,i,a,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),br.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&wr.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[a];void 0!==t&&i===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),a=t.path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):k("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+e.nextConnectionId_++,s=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?b("getToken() completed but was canceled"):(b("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,l=new Ar(a,s.repoInfo_,s.applicationId_,n,r,i,(function(t){S(t+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),u))})).then(null,(function(e){s.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&S(e),h())}))}},e.prototype.interrupt=function(t){b("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){b("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return D(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new V(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){b("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.g)(this.listens.values()),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,Object(i.g)(s.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Er.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=wr.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Dr),Rr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=yn(t.getQueryParams());this.restRequest_(s+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),Object(o.C)(a.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=yn(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var a=i&&i.accessToken;a&&(e.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){S("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},e}(Dr),Nr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),Tt("DataSnapshot.child",1,e,!1);var n=new V(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ut)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),Tt("DataSnapshot.hasChild",1,t,!1);var e=new V(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Ut))}))},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),jr=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Fr(t,e){for(var n=e instanceof V?e:new V(e),r=t,i=q(n);null!==i;){var a=Object(o.C)(r.node.children,i)||{children:{},childCount:0};r=new jr(i,r,a),i=q(n=z(n))}return r}function Mr(t){return t.node.value}function Lr(t,e){t.node.value=e,function t(e){null!==e.parent&&function(e,n,r){var i=function(t){return void 0===Mr(t)&&!Vr(t)}(r),a=Object(o.h)(e.node.children,n);i&&a?(delete e.node.children[n],e.node.childCount--,t(e)):i||a||(e.node.children[n]=r.node,e.node.childCount++,t(e))}(e.parent,e.name,e)}(t)}function Vr(t){return t.node.childCount>0}function Ur(t,e){R(t.node.children,(function(n,r){e(new jr(n,t,r))}))}function qr(t){return new V(null===t.parent?t.name:qr(t.parent)+"/"+t.name)}var Br=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rr(),this.transactionQueueTree_=new jr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function zr(t){var e=t.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Hr(t){return(e=(e={timestamp:zr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Gr(t,e,n,r,i){t.dataUpdateCount++;var a=new V(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var u=Object(o.A)(n,(function(t){return Jt(t)}));s=function(t,e,n,r){var i=Gn(t,r);if(i){var o=Wn(i),a=o.path,s=o.queryId,u=X(a,e),c=re.fromObject(n);return Kn(t,a,new ae(te(s),u,c))}return[]}(t.serverSyncTree_,a,u,i)}else{var c=Jt(n);s=function(t,e,n,r){var i=Gn(t,r);if(null!=i){var o=Wn(i),a=o.path,s=o.queryId,u=X(a,e);return Kn(t,a,new oe(te(s),u,n))}return[]}(t.serverSyncTree_,a,c,i)}else if(r){var l=Object(o.A)(n,(function(t){return Jt(t)}));s=function(t,e,n){var r=re.fromObject(n);return qn(t,new ae({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,a,l)}else{var h=Jt(n);s=Mn(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=hi(t,a)),yr(t.eventQueue_,f,s)}function Wr(t,e){Kr(t,"connected",e),!1===e&&function(t){oi(t,"onDisconnectEvents");var e=Hr(t),n=rr();or(t.onDisconnect_,U(),(function(r,i){var o=tr(r,i,t.serverSyncTree_,e);ir(n,r,o)}));var r=[];or(n,U(),(function(e,n){r=r.concat(Mn(t.serverSyncTree_,e,n));var i=vi(t,e);hi(t,i)})),t.onDisconnect_=rr(),yr(t.eventQueue_,U(),r)}(t)}function Kr(t,e,n){var r=new V("/.info/"+e),i=Jt(n);t.infoData_.updateSnapshot(r,i);var o=Mn(t.infoSyncTree_,r,i);yr(t.eventQueue_,r,o)}function Qr(t){return t.nextWriteId_++}function Yr(t,e,n,r,i){oi(t,"set",{path:e.toString(),value:n,priority:r});var o=Hr(t),a=Jt(n,r),s=Un(t.serverSyncTree_,e),u=er(a,s,o),c=Qr(t),l=jn(t.serverSyncTree_,e,u,c,!0);pr(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||S("set at "+e+" failed: "+n);var a=Fn(t.serverSyncTree_,c,!o);yr(t.eventQueue_,e,a),ai(0,i,n,r)}));var h=vi(t,e);hi(t,h),yr(t.eventQueue_,h,[])}function Xr(t,e,n,r){oi(t,"update",{path:e.toString(),value:n});var i=!0,a=Hr(t),s={};if(R(n,(function(n,r){i=!1,s[n]=tr(Q(e,n),Jt(r),t.serverSyncTree_,a)})),i)b("update() called with empty data.  Don't do anything."),ai(0,r,"ok",void 0);else{var u=Qr(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=we(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=re.fromObject(n);return qn(t,new ae({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,s,u);pr(t.eventQueue_,c),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||S("update at "+e+" failed: "+n);var a=Fn(t.serverSyncTree_,u,!o),s=a.length>0?hi(t,e):e;yr(t.eventQueue_,s,a),ai(0,r,n,i)})),R(n,(function(n){var r=vi(t,Q(e,n));hi(t,r)})),yr(t.eventQueue_,e,[])}}function Zr(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(Y(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(Ut,(function(t,n){ir(e,new V(t),n)})),t(e,n)}if(e.children.size>0){var i=q(n);return n=z(n),e.children.has(i)&&t(e.children.get(i),n)&&e.children.delete(i),0===e.children.size}return!0}(t.onDisconnect_,e),ai(0,n,r,i)}))}function Jr(t,e,n,r){var i=Jt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&ir(t.onDisconnect_,e,i),ai(0,r,n,o)}))}function $r(t,e,n,r,i){var o=Jt(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&ir(t.onDisconnect_,e,o),ai(0,i,n,r)}))}function ti(t,e,n,r){if(Object(o.r)(n))return b("onDisconnect().update() called with empty data.  Don't do anything."),void ai(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&R(n,(function(n,r){var i=Jt(r);ir(t.onDisconnect_,Q(e,n),i)})),ai(0,r,i,o)}))}function ei(t,e,n){var r;r=".info"===q(e.path)?Vn(t.infoSyncTree_,e,n):Vn(t.serverSyncTree_,e,n),vr(t.eventQueue_,e.path,r)}function ni(t,e,n){var r;r=".info"===q(e.path)?Ln(t.infoSyncTree_,e,n):Ln(t.serverSyncTree_,e,n),vr(t.eventQueue_,e.path,r)}function ri(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function ii(t){t.persistentConnection_&&t.persistentConnection_.resume("repo_interrupt")}function oi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),b.apply(void 0,Object(i.f)([r],Object(i.e)(e)))}function ai(t,e,n,r){e&&M((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function si(t){return t.__database||(t.__database=new Di(t))}function ui(t,e,n,r,i){oi(t,"transaction on "+e);var a=function(){},s=new Ei(t,e);s.on("value",a);var u={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:i,retryCount:0,unwatcher:function(){s.off("value",a)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=ci(t,e,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(void 0===l){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var h=new Nr(u.currentInputSnapshot,new Ei(t,u.path),Ut);u.onComplete(null,!1,h)}}else{wt("transaction failed: Data returned ",l,u.path),u.status=0;var f=Fr(t.transactionQueueTree_,e),d=Mr(f)||[];d.push(u),Lr(f,d);var v=void 0;"object"==typeof l&&null!==l&&Object(o.h)(l,".priority")?(v=Object(o.C)(l,".priority"),Object(o.d)(_t(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):v=(Un(t.serverSyncTree_,e)||Xt.EMPTY_NODE).getPriority().val();var y=Hr(t),m=Jt(l,v),g=er(m,c,y);u.currentOutputSnapshotRaw=m,u.currentOutputSnapshotResolved=g,u.currentWriteId=Qr(t);var _=jn(t.serverSyncTree_,e,g,u.currentWriteId,u.applyLocally);yr(t.eventQueue_,e,_),li(t,t.transactionQueueTree_)}}function ci(t,e,n){return Un(t.serverSyncTree_,e,n)||Xt.EMPTY_NODE}function li(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||pi(t,e),Mr(e)){var n=di(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=ci(t,e,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=X(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,(function(r){oi(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++){if(n[a].status=2,i=i.concat(Fn(t.serverSyncTree_,n[a].currentWriteId)),n[a].onComplete){var s=n[a].currentOutputSnapshotResolved,u=new Ei(t,n[a].path),c=new Nr(s,u,Ut);o.push(n[a].onComplete.bind(null,null,!0,c))}n[a].unwatcher()}for(pi(t,Fr(t.transactionQueueTree_,e)),li(t,t.transactionQueueTree_),yr(t.eventQueue_,e,i),a=0;a<o.length;a++)M(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(S("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;hi(t,e)}}),s)}(t,qr(e),n)}else Vr(e)&&Ur(e,(function(e){li(t,e)}))}function hi(t,e){var n=fi(t,e),r=qr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],a=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),s=0;s<e.length;s++){var u=e[s],c=X(n,u.path),l=!1,h=void 0;if(Object(o.d)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Fn(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Fn(t.serverSyncTree_,u.currentWriteId,!0));else{var f=ci(t,u.path,a);u.currentInputSnapshot=f;var d=e[s].update(f.val());if(void 0!==d){wt("transaction failed: Data returned ",d,u.path);var p=Jt(d);"object"==typeof d&&null!=d&&Object(o.h)(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=Hr(t),m=er(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=Qr(t),a.splice(a.indexOf(v),1),i=(i=i.concat(jn(t.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(Fn(t.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Fn(t.serverSyncTree_,u.currentWriteId,!0))}if(yr(t.eventQueue_,n,i),i=[],l&&(e[s].status=2,setTimeout(e[s].unwatcher,Math.floor(0)),e[s].onComplete))if("nodata"===h){var g=new Ei(t,e[s].path),_=new Nr(e[s].currentInputSnapshot,g,Ut);r.push(e[s].onComplete.bind(null,null,!1,_))}else r.push(e[s].onComplete.bind(null,new Error(h),!1,null))}for(pi(t,t.transactionQueueTree_),s=0;s<r.length;s++)M(r[s]);li(t,t.transactionQueueTree_)}}(t,di(t,n),r),r}function fi(t,e){var n,r=t.transactionQueueTree_;for(n=q(e);null!==n&&void 0===Mr(r);)r=Fr(r,n),n=q(e=z(e));return r}function di(t,e){var n=[];return function t(e,n,r){var i=Mr(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);Ur(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function pi(t,e){var n=Mr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Lr(e,n.length>0?n:void 0)}Ur(e,(function(e){pi(t,e)}))}function vi(t,e){var n=qr(fi(t,e)),r=Fr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){yi(t,e)})),yi(t,r),function t(e,n,r,i){r&&!i&&n(e),Ur(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(r,(function(e){yi(t,e)})),n}function yi(t,e){var n=Mr(e);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(o.d)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):(Object(o.d)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Fn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===a?Lr(e,void 0):n.length=a+1,yr(t.eventQueue_,qr(e),i),s=0;s<r.length;s++)M(r[s])}}var mi,gi=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return Zr(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),xt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return Jr(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),xt("OnDisconnect.set",this.path_),bt("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return Jr(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),xt("OnDisconnect.setWithPriority",this.path_),bt("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ct("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return $r(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),xt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}kt("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return ti(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),_i=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),bi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),wi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ki=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new bi("value",this,new Nr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new wi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Ci=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new wi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new bi(t.type,this,new Nr(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Si=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(mi,"Reference.ts has not been loaded"),mi},set:function(t){mi=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Bt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==O)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ut){if(null!=e&&!_t(e)||null!=n&&!_t(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof on||t.getIndex()===rn,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),St("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var a=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,a.cancel,a.context);else{var s={};s[e]=n,this.onChildEvent(s,a.cancel,a.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new ki(t,e||null,n||null);ei(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Ci(t,e,n);ei(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),St("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var a=e||null;r=new ki(a,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Ci(i,null,n||null));ni(this.repo,this,r)},t.prototype.get=function(){return null!=(n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=X(t,n);r=r||xn(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||xn(i,U()):(i=new Sn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new se(r,!0,!1):null;return he(Tn(i,e,Ie(t.pendingWriteTree_,e.path),o?a.getNode():Xt.EMPTY_NODE,o).viewCache_)}((t=this.repo).serverSyncTree_,e=this))?Promise.resolve(new Nr(n,e.getRef(),e.getQueryParams().getIndex())):t.server_.get(e).then((function(n){var r=Jt(n),i=Mn(t.serverSyncTree_,e.path,r);return vr(t.eventQueue_,e.path,i),Promise.resolve(new Nr(r,e.getRef(),e.getQueryParams().getIndex()))}),(function(n){return oi(t,"get for query "+Object(o.F)(e)+" failed: "+n),Promise.reject(new Error(n))}));var t,e,n},t.prototype.once=function(e,n,r,i){var a=this;Object(o.G)("Query.once",1,4,arguments.length),St("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function t(r){u&&(u=!1,a.off(e,t),n&&n.bind(s.context)(r),c.resolve(r))};return this.on(e,l,(function(t){a.off(e,l),s.cancel&&s.cancel.bind(s.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,cn(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,ln(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Tt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new V(e);if(Y(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new on(n),i=vn(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=vn(this.queryParams_,Bt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=vn(this.queryParams_,Ut);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=vn(this.queryParams_,rn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),bt("Query.startAt",1,e,this.path,!0),Et("Query.startAt",2,n,!0);var r=hn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAfter",0,2,arguments.length),bt("Query.startAfter",1,e,this.path,!1),Et("Query.startAfter",2,n,!0);var r=fn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),bt("Query.endAt",1,e,this.path,!0),Et("Query.endAt",2,n,!0);var r=dn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endBefore",0,2,arguments.length),bt("Query.endBefore",1,e,this.path,!1),Et("Query.endBefore",2,n,!0);var r=pn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),bt("Query.equalTo",1,t,this.path,!1),Et("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+G(this.path)},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ut&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=D(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=J(this.path,e.path),a=this.queryIdentifier()===e.queryIdentifier();return r&&i&&a},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ei=function(t){function e(e,n){if(!(e instanceof Br))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new un,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),Y(this.path)?null:H(this.path)},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof V||(null===q(this.path)?Ot("Reference.child",1,t,!1):Tt("Reference.child",1,t,!1)),new e(this.repo,Q(this.path,t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=K(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return si(this.repo)},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),xt("Reference.set",this.path),bt("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return Yr(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),xt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}kt("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return Xr(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),xt("Reference.setWithPriority",this.path),bt("Reference.setWithPriority",1,t,this.path,!1),Ct("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return Yr(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),xt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),xt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),At("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new _i(n,i)),"function"==typeof e&&e(t,n,i)};return ui(this.repo,this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),xt("Reference.setPriority",this.path),Ct("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return Yr(this.repo,Q(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),xt("Reference.push",this.path),bt("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=zr(this.repo),i=tn(r),a=this.child(i),s=this.child(i);return n=null!=t?a.set(t,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),a},e.prototype.onDisconnect=function(){return xt("Reference.onDisconnect",this.path),new gi(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Si);Si.__referenceConstructor=Ei,function(t){Object(o.d)(!mn,"__referenceConstructor has already been defined"),mn=t}(Ei);var Ti=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(b("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Oi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),xi={},Ii=!1;function Ai(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),b("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=dt(i,r),u=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,u=(s=dt(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):a=!s.repoInfo.secure;var l=r&&a?new Oi:new Ti(t,e);return It("Invalid Firebase Database URL",1,s),Y(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path)."),si(function(t,e,n){var r=Object(o.C)(xi,e.name);r||(xi[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Br(t,Ii,e,n),r[t.toURLString()]=i,i}(u,t,l))}var Di=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,(function(){return Object(i.d)(this,(function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.C)(xi,e.app.name))&&Object(o.C)(n,e.key)===e||C("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),ri(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Br||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=lr(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Rr(t.repoInfo_,(function(e,n,r,i){Gr(t,e,n,r,i)}),t.authTokenProvider_),setTimeout((function(){return Wr(t,!0)}),0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Pr(t.repoInfo_,t.app.options.appId,(function(e,n,r,i){Gr(t,e,n,r,i)}),(function(e){Wr(t,e)}),(function(e){!function(t,e){R(e,(function(e,n){Kr(t,e,n)}))}(t,e)}),t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.statsReporter_=(n=function(){return new fr(t.stats_,t.server_)},r=t.repoInfo_.toString(),cr[r]||(cr[r]=n()),cr[r]),t.infoData_=new ar,t.infoSyncTree_=new Nn({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e.path);return a.isEmpty()||(o=Mn(t.infoSyncTree_,e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Kr(t,"connected",!1),t.serverSyncTree_=new Nn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);yr(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Ei(this.repo_,U())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new it(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Oi)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof Ei?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=dt(t,this.repo_.repoInfo_.nodeAdmin);It(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),ri(this.repo_)},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),ii(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Pi=Object.freeze({__proto__:null,forceLongPolling:function(){xr.forceDisallow(),Cr.forceAllow()},forceWebSockets:function(){Cr.forceDisallow()},isWebSocketsAvailable:function(){return xr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new hr(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);R(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,a=void 0!==o&&o;Tr(t.version);var u=new s.c("auth-internal",new s.b("database-standalone"));return u.setComponent(new s.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:Ai(e,u,n,a),namespace:i}}}),Ri=Pr;Pr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Pr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ni=Object.freeze({__proto__:null,DataConnection:Ri,RealTimeConnection:Ar,hijackHash:function(t){var e=Pr.prototype.put;return Pr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Pr.prototype.put=e}},ConnectionTarget:it,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Ii=t}(t)}}),ji=Di.ServerValue;!function(e){Tr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new s.a("database",(function(t,e){var n=e.instanceIdentifier;return Ai(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)}),"PUBLIC").setServiceProps({Reference:Ei,Query:Si,Database:Di,DataSnapshot:Nr,enableLogging:_,INTERNAL:Pi,ServerValue:ji,TEST_ACCESS:Ni}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.6"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7Hc7":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=1,i=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}var s=function(t){var e=r++;return o[e]=!0,i.then((function(){return a(e)&&t()})),e},u=function(t){a(t)},c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _createClass(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=s(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return _get(_getPrototypeOf(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(u(e),t.scheduled=void 0)}}]),n}(n("3N8a").a),l=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(n("IjjT").a))(c)},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),a=n("2QA8"),s=n("2fFW"),u=n("NJ4a"),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,o){var a;switch(_classCallCheck(this,n),(a=e.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=i.a;break;case 1:if(!t){a.destination=i.a;break}if("object"==typeof t){t instanceof n?(a.syncErrorThrowable=t.syncErrorThrowable,a.destination=t,t.add(_assertThisInitialized(a))):(a.syncErrorThrowable=!0,a.destination=new l(_assertThisInitialized(a),t));break}default:a.syncErrorThrowable=!0,a.destination=new l(_assertThisInitialized(a),t,r,o)}return a}return _createClass(n,[{key:a.a,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(o.a),l=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,s){var u,c;_classCallCheck(this,n),(u=e.call(this))._parentSubscriber=t;var l=_assertThisInitialized(u);return Object(r.a)(o)?c=o:o&&(c=o.next,a=o.error,s=o.complete,o!==i.a&&(l=Object.create(o),Object(r.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(_assertThisInitialized(u)))),u._context=l,u._next=c,u._error=a,u._complete=s,u}return _createClass(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!s.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(c)},"8Y7J":function(t,e,n){"use strict";n.d(e,"a",(function(){return So})),n.d(e,"b",(function(){return Du})),n.d(e,"c",(function(){return Tu})),n.d(e,"d",(function(){return Su})),n.d(e,"e",(function(){return Eu})),n.d(e,"f",(function(){return kc})),n.d(e,"g",(function(){return fc})),n.d(e,"h",(function(){return ao})),n.d(e,"i",(function(){return Bu})),n.d(e,"j",(function(){return es})),n.d(e,"k",(function(){return Nu})),n.d(e,"l",(function(){return ns})),n.d(e,"m",(function(){return bn})),n.d(e,"n",(function(){return eu})),n.d(e,"o",(function(){return K})),n.d(e,"p",(function(){return l})),n.d(e,"q",(function(){return W})),n.d(e,"r",(function(){return Co})),n.d(e,"s",(function(){return ws})),n.d(e,"t",(function(){return ks})),n.d(e,"u",(function(){return Ru})),n.d(e,"v",(function(){return st})),n.d(e,"w",(function(){return pc})),n.d(e,"x",(function(){return at})),n.d(e,"y",(function(){return sc})),n.d(e,"z",(function(){return Wu})),n.d(e,"A",(function(){return h})),n.d(e,"B",(function(){return Au})),n.d(e,"C",(function(){return Iu})),n.d(e,"D",(function(){return ru})),n.d(e,"E",(function(){return as})),n.d(e,"F",(function(){return is})),n.d(e,"G",(function(){return os})),n.d(e,"H",(function(){return us})),n.d(e,"I",(function(){return sr})),n.d(e,"J",(function(){return d})),n.d(e,"K",(function(){return mc})),n.d(e,"L",(function(){return Ts})),n.d(e,"M",(function(){return tc})),n.d(e,"N",(function(){return ls})),n.d(e,"O",(function(){return cs})),n.d(e,"P",(function(){return xs})),n.d(e,"Q",(function(){return yt})),n.d(e,"R",(function(){return Po})),n.d(e,"S",(function(){return uc})),n.d(e,"T",(function(){return Ln})),n.d(e,"U",(function(){return A})),n.d(e,"V",(function(){return nt})),n.d(e,"W",(function(){return Mn})),n.d(e,"X",(function(){return bc})),n.d(e,"Y",(function(){return nc})),n.d(e,"Z",(function(){return Pu})),n.d(e,"ab",(function(){return uo})),n.d(e,"bb",(function(){return Hs})),n.d(e,"cb",(function(){return or})),n.d(e,"db",(function(){return lr})),n.d(e,"eb",(function(){return Bn})),n.d(e,"fb",(function(){return xn})),n.d(e,"gb",(function(){return An})),n.d(e,"hb",(function(){return Nn})),n.d(e,"ib",(function(){return Pn})),n.d(e,"jb",(function(){return Dn})),n.d(e,"kb",(function(){return Rn})),n.d(e,"lb",(function(){return Us})),n.d(e,"mb",(function(){return _c})),n.d(e,"nb",(function(){return qs})),n.d(e,"ob",(function(){return Bs})),n.d(e,"pb",(function(){return In})),n.d(e,"qb",(function(){return L})),n.d(e,"rb",(function(){return Ro})),n.d(e,"sb",(function(){return $o})),n.d(e,"tb",(function(){return Jo})),n.d(e,"ub",(function(){return Do})),n.d(e,"vb",(function(){return Vs})),n.d(e,"wb",(function(){return Ut})),n.d(e,"xb",(function(){return O})),n.d(e,"yb",(function(){return On})),n.d(e,"zb",(function(){return Fa})),n.d(e,"Ab",(function(){return Ba})),n.d(e,"Bb",(function(){return Ja})),n.d(e,"Cb",(function(){return Rr})),n.d(e,"Db",(function(){return Mo})),n.d(e,"Eb",(function(){return _a})),n.d(e,"Fb",(function(){return ga})),n.d(e,"Gb",(function(){return ea})),n.d(e,"Hb",(function(){return yu})),n.d(e,"Ib",(function(){return bt})),n.d(e,"Jb",(function(){return Ot})),n.d(e,"Kb",(function(){return m})),n.d(e,"Lb",(function(){return g})),n.d(e,"Mb",(function(){return St})),n.d(e,"Nb",(function(){return xt})),n.d(e,"Ob",(function(){return qo})),n.d(e,"Pb",(function(){return Qo})),n.d(e,"Qb",(function(){return Xo})),n.d(e,"Rb",(function(){return Yo})),n.d(e,"Sb",(function(){return Ko})),n.d(e,"Tb",(function(){return Wo})),n.d(e,"Ub",(function(){return Zo})),n.d(e,"Vb",(function(){return yn})),n.d(e,"Wb",(function(){return Ra})),n.d(e,"Xb",(function(){return et})),n.d(e,"Yb",(function(){return Bo})),n.d(e,"Zb",(function(){return Cu})),n.d(e,"ac",(function(){return zo})),n.d(e,"bc",(function(){return ta})),n.d(e,"cc",(function(){return _u})),n.d(e,"dc",(function(){return De})),n.d(e,"ec",(function(){return oa})),n.d(e,"fc",(function(){return $s})),n.d(e,"gc",(function(){return tu})),n.d(e,"hc",(function(){return ua})),n.d(e,"ic",(function(){return sa})),n.d(e,"jc",(function(){return Ho})),n.d(e,"kc",(function(){return ca})),n.d(e,"lc",(function(){return Ys})),n.d(e,"mc",(function(){return Xs})),n.d(e,"nc",(function(){return fu})),n.d(e,"oc",(function(){return Uo})),n.d(e,"pc",(function(){return ae})),n.d(e,"qc",(function(){return hr})),n.d(e,"rc",(function(){return fr})),n.d(e,"sc",(function(){return Et})),n.d(e,"tc",(function(){return mu})),n.d(e,"uc",(function(){return du})),n.d(e,"vc",(function(){return ma})),n.d(e,"wc",(function(){return Vo})),n.d(e,"xc",(function(){return Aa})),n.d(e,"yc",(function(){return Da})),n.d(e,"zc",(function(){return Pa})),n.d(e,"Ac",(function(){return Na})),n.d(e,"Bc",(function(){return pu}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),a=n("VRyK"),s=n("w1tV");function u(t){return{toString:t}.toString()}function c(t,e,n){return u((function(){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=_construct(i,e);return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}))}var l=c("Inject",(function(t){return{token:t}})),h=c("Optional"),f=c("Self"),d=c("SkipSelf"),p=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function v(t){for(var e in t)if(t[e]===v)return e;throw Error("Could not find renamed property on target object.")}function y(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function m(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function g(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function _(t){return b(t,t[k])||b(t,t[E])}function b(t,e){return e&&e.token===t?e:null}function w(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(T))?t[C]:null}var k=v({"\u0275prov":v}),C=v({"\u0275inj":v}),S=v({"\u0275provFallback":v}),E=v({ngInjectableDef:v}),T=v({ngInjectorDef:v});function O(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(O).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function x(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var I=v({__forward_ref__:v});function A(t){return t.__forward_ref__=A,t.toString=function(){return O(this())},t}function D(t){return P(t)?t():t}function P(t){return"function"==typeof t&&t.hasOwnProperty(I)&&t.__forward_ref__===A}var R,N="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,M="undefined"!=typeof global&&global,L=N||M||j||F,V=v({"\u0275cmp":v}),U=v({"\u0275dir":v}),q=v({"\u0275pipe":v}),B=v({"\u0275mod":v}),z=v({"\u0275loc":v}),H=v({"\u0275fac":v}),G=v({__NG_ELEMENT_ID__:v}),W=function(){function t(e,n){_classCallCheck(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=m({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(t,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),t}(),K=new W("INJECTOR",-1),Q={},Y=/\n/gm,X=v({provide:String,useValue:v}),Z=void 0;function J(t){var e=Z;return Z=t,e}function $(t){var e=R;return R=t,e}function tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.Default;if(void 0===Z)throw new Error("inject() must be called from an injection context");return null===Z?rt(t,void 0,e):Z.get(t,e&p.Optional?null:void 0,e)}function et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.Default;return(R||tt)(D(t),e)}var nt=et;function rt(t,e,n){var r=_(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&p.Optional)return null;if(void 0!==e)return e;throw new Error("Injector: NOT_FOUND [".concat(O(t),"]"))}function it(t){for(var e=[],n=0;n<t.length;n++){var r=D(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=p.Default,a=0;a<r.length;a++){var s=r[a];s instanceof h||"Optional"===s.ngMetadataName||s===h?o|=p.Optional:s instanceof d||"SkipSelf"===s.ngMetadataName||s===d?o|=p.SkipSelf:s instanceof f||"Self"===s.ngMetadataName||s===f?o|=p.Self:i=s instanceof l||s===l?s.token:s}e.push(et(i,o))}else e.push(et(r))}return e}var ot=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;if(e===Q){var n=new Error("NullInjectorError: No provider for ".concat(O(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),at=function t(){_classCallCheck(this,t)},st=function t(){_classCallCheck(this,t)};function ut(t,e){t.forEach((function(t){return Array.isArray(t)?ut(t,e):e(t)}))}function ct(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function lt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ht(t,e){for(var n=[],r=0;r<t;r++)n.push(e);return n}function ft(t,e,n){var r=pt(t,e);return r>=0?t[1|r]=n:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r=~r,e,n),r}function dt(t,e){var n=pt(t,e);if(n>=0)return t[1|n]}function pt(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var o=r+(i-r>>1),a=t[o<<1];if(e===a)return o<<1;a>e?i=o:r=o+1}return~(i<<1)}(t,e)}var vt=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),yt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),mt={},gt=[],_t=0;function bt(t){return u((function(){var e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===vt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||gt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||yt.Emulated,id:"c",styles:t.styles||gt,_:null,setInput:null,schemas:t.schemas||null,tView:null},o=t.directives,a=t.features,s=t.pipes;return i.id+=_t++,i.inputs=Tt(t.inputs,r),i.outputs=Tt(t.outputs),a&&a.forEach((function(t){return t(i)})),i.directiveDefs=o?function(){return("function"==typeof o?o():o).map(wt)}:null,i.pipeDefs=s?function(){return("function"==typeof s?s():s).map(kt)}:null,i}))}function wt(t){return It(t)||function(t){return t[U]||null}(t)}function kt(t){return function(t){return t[q]||null}(t)}var Ct={};function St(t){var e={type:t.type,bootstrap:t.bootstrap||gt,declarations:t.declarations||gt,imports:t.imports||gt,exports:t.exports||gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u((function(){Ct[t.id]=t.type})),e}function Et(t,e){return u((function(){var n=Dt(t,!0);n.declarations=e.declarations||gt,n.imports=e.imports||gt,n.exports=e.exports||gt}))}function Tt(t,e){if(null==t)return mt;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var Ot=bt;function xt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function It(t){return t[V]||null}function At(t,e){return t.hasOwnProperty(H)?t[H]:null}function Dt(t,e){var n=t[B]||null;if(!n&&!0===e)throw new Error("Type ".concat(O(t)," does not have '\u0275mod' property."));return n}function Pt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Rt(t){return Array.isArray(t)&&!0===t[1]}function Nt(t){return 0!=(8&t.flags)}function jt(t){return 2==(2&t.flags)}function Ft(t){return 1==(1&t.flags)}function Mt(t){return null!==t.template}function Lt(t){return 0!=(512&t[2])}var Vt=void 0;function Ut(t){Vt=t}function qt(){return void 0!==Vt?Vt:"undefined"!=typeof document?document:void 0}function Bt(t){return!!t.listen}var zt={createRenderer:function(t,e){return qt()}};function Ht(t){for(;Array.isArray(t);)t=t[0];return t}function Gt(t,e){return Ht(e[t+20])}function Wt(t,e){return Ht(e[t.index])}function Kt(t,e){return t.data[e+20]}function Qt(t,e){return t[e+20]}function Yt(t,e){var n=e[t];return Pt(n)?n:n[0]}function Xt(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Zt(t){return 4==(4&t[2])}function Jt(t){return 128==(128&t[2])}function $t(t,e){return null===t||null==e?null:t[e]}function te(t){t[18]=0}function ee(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var ne={lFrame:Se(null),bindingsEnabled:!0,checkNoChangesMode:!1};function re(){return ne.bindingsEnabled}function ie(){return ne.lFrame.lView}function oe(){return ne.lFrame.tView}function ae(t){ne.lFrame.contextLView=t}function se(){return ne.lFrame.previousOrParentTNode}function ue(t,e){ne.lFrame.previousOrParentTNode=t,ne.lFrame.isParent=e}function ce(){return ne.lFrame.isParent}function le(){ne.lFrame.isParent=!1}function he(){return ne.checkNoChangesMode}function fe(t){ne.checkNoChangesMode=t}function de(){var t=ne.lFrame,e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function pe(){return ne.lFrame.bindingIndex++}function ve(t){var e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ye(t,e){var n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,me(e)}function me(t){ne.lFrame.currentDirectiveIndex=t}function ge(t){var e=ne.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function _e(){return ne.lFrame.currentQueryIndex}function be(t){ne.lFrame.currentQueryIndex=t}function we(t,e){var n=Ce();ne.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function ke(t,e){var n=Ce(),r=t[1];ne.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function Ce(){var t=ne.lFrame,e=null===t?null:t.child;return null===e?Se(t):e}function Se(t){var e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Ee(){var t=ne.lFrame;return ne.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}var Te=Ee;function Oe(){var t=Ee();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.currentSanitizer=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xe(){return ne.lFrame.selectedIndex}function Ie(t){ne.lFrame.selectedIndex=t}function Ae(){var t=ne.lFrame;return Kt(t.tView,t.selectedIndex)}function De(){ne.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Pe(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n];i.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,i.afterContentInit),i.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,i.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i.afterContentChecked)),i.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,i.afterViewInit),i.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,i.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,i.afterViewChecked)),null!=i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,i.onDestroy)}}function Re(t,e,n){Fe(t,e,3,n)}function Ne(t,e,n,r){(3&t[2])===n&&Fe(t,e,n,r)}function je(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Fe(t,e,n,r){for(var i=null!=r?r:-1,o=0,a=void 0!==r?65535&t[18]:0;a<e.length;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(Me(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Me(t,e,n,r){var i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(a)):o.call(a)}var Le=function t(e,n,r){_classCallCheck(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Ve(t,e,n){for(var r=Bt(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],u=n[i++];r?t.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else{var c=o,l=n[++i];qe(c)?r&&t.setProperty(e,c,l):r?t.setAttribute(e,c,l):e.setAttribute(c,l),i++}}return i}function Ue(t){return 3===t||4===t||6===t}function qe(t){return 64===t.charCodeAt(0)}function Be(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||ze(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function ze(t,e,n,r,i){var o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){var s=t[o++];if("number"==typeof s){if(s===e){a=-1;break}if(s>e){a=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function He(t){return-1!==t}function Ge(t){return 32767&t}function We(t){return t>>16}function Ke(t,e){for(var n=We(t),r=e;n>0;)r=r[15],n--;return r}function Qe(t){return"string"==typeof t?t:null==t?"":""+t}function Ye(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Qe(t)}var Xe=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L);function Ze(t){return t instanceof Function?t():t}var Je=!0;function $e(t){var e=Je;return Je=t,e}var tn=0;function en(t,e){var n=rn(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,nn(r.data,t),nn(e,null),nn(r.blueprint,null));var i=on(t,e),o=t.injectorIndex;if(He(i))for(var a=Ge(i),s=Ke(i,e),u=s[1].data,c=0;c<8;c++)e[o+c]=s[a+c]|u[a+c];return e[o+8]=i,o}function nn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function rn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function on(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=e[6],r=1;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function an(t,e,n){!function(t,e,n){var r="string"!=typeof n?n[G]:n.charCodeAt(0)||0;null==r&&(r=n[G]=tn++);var i=255&r,o=1<<i,a=64&i,s=32&i,u=e.data;128&i?a?s?u[t+7]|=o:u[t+6]|=o:s?u[t+5]|=o:u[t+4]|=o:a?s?u[t+3]|=o:u[t+2]|=o:s?u[t+1]|=o:u[t]|=o}(t,e,n)}function sn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t[G];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof o){we(e,t);try{var a=o();if(null!=a||r&p.Optional)return a;throw new Error("No provider for ".concat(Ye(n),"!"))}finally{Te()}}else if("number"==typeof o){if(-1===o)return new pn(t,e);var s=null,u=rn(t,e),c=-1,l=r&p.Host?e[16][6]:null;for((-1===u||r&p.SkipSelf)&&(c=-1===u?on(t,e):e[u+8],dn(r,!1)?(s=e[1],u=Ge(c),e=Ke(c,e)):u=-1);-1!==u;){c=e[u+8];var h=e[1];if(fn(o,u,h.data)){var f=cn(u,e,n,s,r,l);if(f!==un)return f}dn(r,e[1].data[u+8]===l)&&fn(o,u,e)?(s=h,u=Ge(c),e=Ke(c,e)):u=-1}}}if(r&p.Optional&&void 0===i&&(i=null),0==(r&(p.Self|p.Host))){var d=e[9],v=$(void 0);try{return d?d.get(n,i,r&p.Optional):rt(n,i,r&p.Optional)}finally{$(v)}}if(r&p.Optional)return i;throw new Error("NodeInjector: NOT_FOUND [".concat(Ye(n),"]"))}var un={};function cn(t,e,n,r,i,o){var a=e[1],s=a.data[t+8],u=ln(s,a,n,null==r?jt(s)&&Je:r!=a&&3===s.type,i&p.Host&&o===s);return null!==u?hn(e,a,u,s):un}function ln(t,e,n,r,i){for(var o=t.providerIndexes,a=e.data,s=65535&o,u=t.directiveStart,c=o>>16,l=i?s+c:t.directiveEnd,h=r?s:s+c;h<l;h++){var f=a[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=a[u];if(d&&Mt(d)&&d.type===n)return u}return null}function hn(t,e,n,r){var i=t[n],o=e.data;if(i instanceof Le){var a=i;if(a.resolving)throw new Error("Circular dep for "+Ye(o[n]));var s,u=$e(a.canSeeViewProviders);a.resolving=!0,a.injectImpl&&(s=$(a.injectImpl)),we(t,r);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.onChanges,i=e.onInit,o=e.doCheck;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{a.injectImpl&&$(s),$e(u),a.resolving=!1,Te()}}return i}function fn(t,e,n){var r=64&t,i=32&t;return!!((128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e])&1<<t)}function dn(t,e){return!(t&p.Self||t&p.Host&&e)}var pn=function(){function t(e,n){_classCallCheck(this,t),this._tNode=e,this._lView=n}return _createClass(t,[{key:"get",value:function(t,e){return sn(this._tNode,this._lView,t,void 0,e)}}]),t}();function vn(t){var e=t;if(P(t))return function(){var t=vn(D(e));return t?t():null};var n=At(e);if(null===n){var r=w(e);n=r&&r.factory}return n||null}function yn(t){return u((function(){for(var e=t.prototype.constructor,n=e[H]||vn(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var o=i[H]||vn(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(t){return new t}}))}function mn(t){return t.ngDebugContext}function gn(t){return t.ngOriginalError}function _n(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var bn=function(){function t(){_classCallCheck(this,t),this._console=console}return _createClass(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||_n}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?mn(t)?mn(t):this._findContext(gn(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=gn(t);e&&gn(e);)e=gn(e);return e}}]),t}(),wn=function(){function t(e){_classCallCheck(this,t),this.changingThisBreaksApplicationSecurity=e}return _createClass(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),t}(),kn=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(wn),Cn=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(wn),Sn=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(wn),En=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(wn),Tn=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(wn);function On(t){return t instanceof wn?t.changingThisBreaksApplicationSecurity:t}function xn(t,e){var n=In(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===e}function In(t){return t instanceof wn&&t.getTypeName()||null}function An(t){return new kn(t)}function Dn(t){return new Cn(t)}function Pn(t){return new Sn(t)}function Rn(t){return new En(t)}function Nn(t){return new Tn(t)}var jn=!0,Fn=!1;function Mn(){return Fn=!0,jn}function Ln(){if(Fn)throw new Error("Cannot enable prod mode after platform setup.");jn=!1}var Vn=function(){function t(e){_classCallCheck(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");var n=this.inertDocument.body;if(null==n){var r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r),n=this.inertDocument.createElement("body"),r.appendChild(n)}n.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!n.querySelector||n.querySelector("svg")?(n.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=n.querySelector&&n.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(t,[{key:"getInertBodyElement_XHR",value:function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;var n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),Un=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bn(t){return(t=String(t)).match(Un)||t.match(qn)?t:(Mn()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function zn(t){var e,n={},r=_createForOfIteratorHelper(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Hn(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var Gn,Wn=zn("area,br,col,hr,img,wbr"),Kn=zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qn=zn("rp,rt"),Yn=Hn(Qn,Kn),Xn=Hn(Wn,Hn(Kn,zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hn(Qn,zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yn),Zn=zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jn=zn("srcset"),$n=Hn(Zn,Jn,zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=zn("script,style,template"),er=function(){function t(){_classCallCheck(this,t),this.sanitizedSomething=!1,this.buf=[]}return _createClass(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!Xn.hasOwnProperty(e))return this.sanitizedSomething=!0,!tr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if($n.hasOwnProperty(s)){var u=o.value;Zn[s]&&(u=Bn(u)),Jn[s]&&(n=u,u=(n=String(n)).split(",").map((function(t){return Bn(t.trim())})).join(", ")),this.buf.push(" ",a,'="',ir(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();Xn.hasOwnProperty(e)&&!Wn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(ir(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}]),t}(),nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rr=/([^\#-~ |!])/g;function ir(t){return t.replace(/&/g,"&amp;").replace(nr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(rr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function or(t,e){var n=null;try{Gn=Gn||new Vn(t);var r=e?String(e):"";n=Gn.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Gn.getInertBodyElement(r)}while(r!==o);var a=new er,s=a.sanitizeChildren(ar(n)||n);return Mn()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=ar(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function ar(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var sr=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),ur=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),cr=/^url\(([^)]+)\)$/;function lr(t){if(!(t=String(t).trim()))return"";var e=t.match(cr);return e&&Bn(e[1])===e[1]||t.match(ur)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Mn()&&console.warn("WARNING: sanitizing unsafe style value ".concat(t," (see http://g.co/ng/security#xss).")),"unsafe")}function hr(t){var e=dr();return e?e.sanitize(sr.HTML,t)||"":xn(t,"HTML")?On(t):or(qt(),Qe(t))}function fr(t){var e=dr();return e?e.sanitize(sr.URL,t)||"":xn(t,"URL")?On(t):Bn(Qe(t))}function dr(){var t=ie();return t&&t[12]}function pr(t,e){t.__ngContext__=e}function vr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function yr(){throw new Error("Cannot mix multi providers and regular providers")}function mr(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function gr(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==mr((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function _r(t){return 0===t.type&&"ng-template"!==t.tagName}function br(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function wr(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(Ue(t[e]))return e;return t.length}(i),a=!1,s=0;s<e.length;s++){var u=e[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!br(t,u,n)||""===u&&1===e.length){if(kr(r))return!1;a=!0}}else{var c=8&r?u:e[++s];if(8&r&&null!==t.attrs){if(!gr(t.attrs,c,n)){if(kr(r))return!1;a=!0}continue}var l=Cr(8&r?"class":u,i,_r(t),n);if(-1===l){if(kr(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==mr(f,c,0)||2&r&&c!==h){if(kr(r))return!1;a=!0}}}}else{if(!a&&!kr(r)&&!kr(u))return!1;if(a&&kr(u))continue;a=!1,r=u|1&r}}return kr(r)||a}function kr(t){return 0==(1&t)}function Cr(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=e[++i];"string"==typeof s;)s=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Sr(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(wr(t,e[r],n))return!0;return!1}function Er(t,e){t:for(var n=0;n<e.length;n++){var r=e[n];if(t.length===r.length){for(var i=0;i<t.length;i++)if(t[i]!==r[i])continue t;return!0}}return!1}function Tr(t,e){return t?":not("+e.trim()+")":e}function Or(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var a=t[n];if("string"==typeof a)if(2&r){var s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||kr(a)||(e+=Tr(o,i),i=""),r=a,o=o||!kr(r);n++}return""!==i&&(e+=Tr(o,i)),e}var xr={};function Ir(t){var e=t[3];return Rt(e)?e[3]:e}function Ar(t){return Pr(t[13])}function Dr(t){return Pr(t[4])}function Pr(t){for(;null!==t&&!Rt(t);)t=t[4];return t}function Rr(t){Nr(oe(),ie(),xe()+t,he())}function Nr(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&Re(e,i,n)}else{var o=t.preOrderHooks;null!==o&&Ne(e,o,0,n)}Ie(n)}function jr(t,e){return t<<17|e<<2}function Fr(t){return t>>17&32767}function Mr(t){return 2|t}function Lr(t){return(131068&t)>>2}function Vr(t,e){return-131069&t|e<<2}function Ur(t){return 1|t}function qr(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=t.data[o];be(i),a.contentQueries(2,e[o],o)}}}function Br(t,e,n){return Bt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function zr(t,e,n,r,i,o,a,s,u,c){var l=e.blueprint.slice();return l[0]=i,l[2]=140|r,te(l),l[3]=l[15]=t,l[8]=n,l[10]=a||t&&t[10],l[11]=s||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Hr(t,e,n,r,i,o){var a=n+20,s=t.data[a]||function(t,e,n,r,i,o){var a=se(),s=ce(),u=s?a:a&&a.parent,c=t.data[n]=ti(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),a&&(!s||null!=a.child||null===c.parent&&2!==a.type?s||(a.next=c):a.child=c),c}(t,e,a,r,i,o);return ue(s,!0),s}function Gr(t,e,n){ke(e,e[6]);try{var r=t.viewQuery;null!==r&&ki(1,r,n);var i=t.template;null!==i&&Qr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&qr(t,e),t.staticViewQueries&&ki(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)mi(t,e[n])}(e,o)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),a}finally{e[2]&=-5,Oe()}}function Wr(t,e,n,r){var i=e[2];if(256!=(256&i)){ke(e,e[6]);var o=he();try{te(e),ne.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Qr(t,e,n,2,r);var a=3==(3&i);if(!o)if(a){var s=t.preOrderCheckHooks;null!==s&&Re(e,s,null)}else{var u=t.preOrderHooks;null!==u&&Ne(e,u,0,null),je(e,0)}if(function(t){for(var e=Ar(t);null!==e;e=Dr(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&ee(o,1),i[2]|=1024}}(e),function(t){for(var e=Ar(t);null!==e;e=Dr(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];Jt(r)&&Wr(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&qr(t,e),!o)if(a){var c=t.contentCheckHooks;null!==c&&Re(e,c)}else{var l=t.contentHooks;null!==l&&Ne(e,l,1),je(e,1)}!function(t,e){try{var n=t.expandoInstructions;if(null!==n)for(var r=t.expandoStartIndex,i=-1,o=0;o<n.length;o++){var a=n[o];"number"==typeof a?a<=0?(Ie(0-a),i=r+=9+n[++o]):r+=a:(null!==a&&(ye(r,i),a(2,e[i])),i++)}}finally{Ie(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)yi(t,e[n])}(e,h);var f=t.viewQuery;if(null!==f&&ki(2,f,r),!o)if(a){var d=t.viewCheckHooks;null!==d&&Re(e,d)}else{var p=t.viewHooks;null!==p&&Ne(e,p,2),je(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ee(e[3],-1))}finally{Oe()}}}function Kr(t,e,n,r){var i=e[10],o=!he(),a=Zt(e);try{o&&!a&&i.begin&&i.begin(),a&&Gr(t,e,r),Wr(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function Qr(t,e,n,r,i){var o=xe();try{Ie(-1),2&r&&e.length>20&&Nr(t,e,0,he()),n(r,i)}finally{Ie(o)}}function Yr(t,e,n){if(Nt(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}function Xr(t,e,n){re()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||en(n,e),pr(r,e);for(var a=n.initialInputs,s=i;s<o;s++){var u=t.data[s],c=Mt(u);c&&fi(e,n,u);var l=hn(e,t,s,n);pr(l,e),null!==a&&di(0,s-i,l,u,0,a),c&&(Yt(n.index,e)[8]=l)}}(t,e,n,Wt(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,a=t.firstCreatePass,s=n.index-20,u=ne.lFrame.currentDirectiveIndex;try{Ie(s);for(var c=r;c<i;c++){var l=t.data[c],h=e[c];me(c),null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs?ai(l,h):a&&o.push(null)}}finally{Ie(-1),me(u)}}(t,e,n))}function Zr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wt,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(e,t):t[a];t[i++]=s}}function Jr(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=$r(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function $r(t,e,n,r,i,o,a,s,u,c){var l=20+r,h=l+i,f=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:xr);return n}(l,h);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:s,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function ti(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ei(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ni(t,e,n,r,i,o,a,s){var u,c,l=Wt(e,n),h=e.inputs;!s&&null!=h&&(u=h[r])?(xi(t,n,u,r,i),jt(e)&&function(t,e){var n=Yt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=a?a(i,e.tagName||"",r):i,Bt(o)?o.setProperty(l,r,i):qe(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function ri(t,e,n,r){var i=!1;if(re()){var o=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];Sr(n,a.selectors,!1)&&(i||(i=[]),an(en(n,e),t,a.type),Mt(a)?(2&n.flags&&vr(n),ui(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){var s=0;i=!0,li(n,t.data.length,o.length);for(var u=0;u<o.length;u++){var c=o[u];c.providersResolver&&c.providersResolver(c)}si(t,n,o.length);for(var l=!1,h=!1,f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=Be(n.mergedAttrs,d.hostAttrs),hi(t,e,d),ci(t.data.length-1,d,a),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128),!l&&(d.onChanges||d.onInit||d.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),l=!0),h||!d.onChanges&&!d.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),h=!0),ii(t,d),s+=d.hostVars}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],a=null,s=null,u=e.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||_r(e)?null:pi(l,i);o.push(h),a=ei(l,u,a),s=ei(c.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,n),oi(t,e,s)}a&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new Error("Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,a)}return n.mergedAttrs=Be(n.mergedAttrs,n.attrs),i}function ii(t,e){var n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function oi(t,e,n){for(var r=0;r<n;r++)e.push(xr),t.blueprint.push(xr),t.data.push(null)}function ai(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function si(t,e,n){var r=20-e.index,i=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function ui(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ci(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Mt(e)&&(n[""]=t)}}function li(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function hi(t,e,n){t.data.push(n);var r=n.factory||(n.factory=At(n.type)),i=new Le(r,Mt(n),null);t.blueprint.push(i),e.push(i)}function fi(t,e,n){var r=Wt(e,t),i=Jr(n),o=t[10],a=gi(t,zr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=a}function di(t,e,n,r,i,o){var a=o[e];if(null!==a)for(var s=r.setInput,u=0;u<a.length;){var c=a[u++],l=a[u++],h=a[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function pi(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function vi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function yi(t,e){var n=Yt(e,t);if(Jt(n)){var r=n[1];80&n[2]?Wr(r,n,r.template,n[8]):n[5]>0&&function t(e){for(var n=Ar(e);null!==n;n=Dr(n))for(var r=10;r<n.length;r++){var i=n[r];if(1024&i[2]){var o=i[1];Wr(o,i,o.template,i[8])}else i[5]>0&&t(i)}var a=e[1].components;if(null!==a)for(var s=0;s<a.length;s++){var u=Yt(a[s],e);Jt(u)&&u[5]>0&&t(u)}}(n)}}function mi(t,e){var n=Yt(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Gr(r,n,n[8])}function gi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function _i(t){for(;t;){t[2]|=64;var e=Ir(t);if(Lt(t)&&!e)return t;t=e}return null}function bi(t,e,n){var r=e[10];r.begin&&r.begin();try{Wr(t,e,t.template,n)}catch(i){throw Oi(e,i),i}finally{r.end&&r.end()}}function wi(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=Xt(n),i=r[1];Kr(i,r,i.template,n)}}(t[8])}function ki(t,e,n){be(0),e(t,n)}var Ci=Promise.resolve(null);function Si(t){return t[7]||(t[7]=[])}function Ei(t){return t.cleanup||(t.cleanup=[])}function Ti(t,e,n){return(null===t||Mt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Oi(t,e){var n=t[9],r=n?n.get(bn,null):null;r&&r.handleError(e)}function xi(t,e,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],u=e[a],c=t.data[a];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function Ii(t,e){var n=e[3];return-1===t.index?Rt(n)?n:null:n}function Ai(t,e){var n=Ii(t,e);return n?Bi(e[11],n[7]):null}function Di(t,e,n,r,i){if(null!=r){var o,a=!1;Rt(r)?o=r:Pt(r)&&(a=!0,r=r[0]);var s=Ht(r);0===t&&null!==n?null==i?Ui(e,n,s):Vi(e,n,s,i||null):1===t&&null!==n?Vi(e,n,s,i||null):2===t?function(t,e,n){var r=Bi(t,e);r&&function(t,e,n,r){Bt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,n,r,i){var o=n[7];o!==Ht(n)&&Di(e,t,r,o,i);for(var a=10;a<n.length;a++){var s=n[a];Ki(s[1],s,t,e,r,o)}}(e,t,o,n,i)}}function Pi(t,e,n,r){var i=Ai(t.node,e);i&&Ki(t,e,e[11],n?1:2,i,r)}function Ri(t,e){var n=t[9],r=n.indexOf(e);1024&e[2]&&ee(e[3],-1),n.splice(r,1)}function Ni(t,e){if(!(t.length<=10)){var n=10+e,r=t[n];if(r){var i=r[17];null!==i&&i!==t&&Ri(i,r),e>0&&(t[n-1][4]=r[4]);var o=lt(t,10+e);Pi(r[1],r,!1,null);var a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function ji(t,e){if(!(256&e[2])){var n=e[11];Bt(n)&&n.destroyNode&&Ki(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return Mi(t[1],t);for(;e;){var n=null;if(Pt(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Pt(e)&&Mi(e[1],e),e=Fi(e,t);null===e&&(e=t),Pt(e)&&Mi(e[1],e),n=e&&e[4]}e=n}}(e)}}function Fi(t,e){var n;return Pt(t)&&(n=t[6])&&2===n.type?Ii(n,t):t[3]===e?null:t[3]}function Mi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof Le)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2)o[a+1].call(i[o[a]]);else o.call(i)}}}(t,e),function(t,e){var n=t.cleanup;if(null!==n){for(var r=e[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var o=n[i+1],a="function"==typeof o?o(e):Ht(e[o]),s=r[n[i+2]],u=n[i+3];"boolean"==typeof u?a.removeEventListener(n[i],s,u):u>=0?r[u]():r[-u].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);e[7]=null}}(t,e);var n=e[6];n&&3===n.type&&Bt(e[11])&&e[11].destroy();var r=e[17];if(null!==r&&Rt(e[3])){r!==e[3]&&Ri(r,e);var i=e[19];null!==i&&i.detachView(t)}}}function Li(t,e,n){for(var r=e.parent;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){var i=n[6];return 2===i.type?Ai(i,n):n[0]}if(e&&5===e.type&&4&e.flags)return Wt(e,n).parentNode;if(2&r.flags){var o=t.data,a=o[o[r.index].directiveStart].encapsulation;if(a!==yt.ShadowDom&&a!==yt.Native)return null}return Wt(r,n)}function Vi(t,e,n,r){Bt(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Ui(t,e,n){Bt(t)?t.appendChild(e,n):e.appendChild(n)}function qi(t,e,n,r){null!==r?Vi(t,e,n,r):Ui(t,e,n)}function Bi(t,e){return Bt(t)?t.parentNode(e):e.parentNode}function zi(t,e){if(2===t.type){var n=Ii(t,e);return null===n?null:Gi(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Wt(t,e):null}function Hi(t,e,n,r){var i=Li(t,r,e);if(null!=i){var o=e[11],a=zi(r.parent||e[6],e);if(Array.isArray(n))for(var s=0;s<n.length;s++)qi(o,i,n[s],a);else qi(o,i,n,a)}}function Gi(t,e){var n=10+t+1;if(n<e.length){var r=e[n],i=r[1].firstChild;if(null!==i)return function t(e,n){if(null!==n){var r=n.type;if(3===r)return Wt(n,e);if(0===r)return Gi(-1,e[n.index]);if(4===r||5===r){var i=n.child;if(null!==i)return t(e,i);var o=e[n.index];return Rt(o)?Gi(-1,o):Ht(o)}var a=e[16],s=a[6],u=Ir(a),c=s.projection[n.projection];return null!=c?t(u,c):t(e,n.next)}return null}(r,i)}return e[7]}function Wi(t,e,n,r,i,o,a){for(;null!=n;){var s=r[n.index],u=n.type;a&&0===e&&(s&&pr(Ht(s),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Wi(t,e,n.child,r,i,o,!1),Di(e,t,i,s,o)):1===u?Qi(t,e,r,n,i,o):Di(e,t,i,s,o)),n=a?n.projectionNext:n.next}}function Ki(t,e,n,r,i,o){Wi(n,r,t.node.child,e,i,o,!1)}function Qi(t,e,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Di(e,t,i,s[u],o);else Wi(t,e,s,a[3],i,o,!0)}function Yi(t,e,n){Bt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Xi(t,e,n){Bt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}var Zi,Ji,$i,to=function(){function t(e,n){_classCallCheck(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return _createClass(t,[{key:"rootNodes",get:function(){var t=this._lView;return null==t[0]?function t(e,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var a=n[r.index];if(null!==a&&i.push(Ht(a)),Rt(a))for(var s=10;s<a.length;s++){var u=a[s],c=u[1].firstChild;null!==c&&t(u[1],u,c,i)}var l=r.type;if(4===l||5===l)t(e,n,r.child,i);else if(1===l){var h=n[16],f=h[6].projection[r.projection];if(Array.isArray(f))i.push.apply(i,_toConsumableArray(f));else{var d=Ir(h);t(d[1],d,f,i,!0)}}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}ji(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){var e,n,r;e=this._lView[1],r=t,Si(n=this._lView).push(r),e.firstCreatePass&&Ei(e).push(n[7].length-1,null)}},{key:"markForCheck",value:function(){_i(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){bi(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){fe(!0);try{bi(t,e,n)}finally{fe(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,Ki(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),t}(),eo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t))._view=t,r}return _createClass(n,[{key:"detectChanges",value:function(){wi(this._view)}},{key:"checkNoChanges",value:function(){!function(t){fe(!0);try{wi(t)}finally{fe(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(to);function no(t,e,n){return Zi||(Zi=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(t)),new Zi(Wt(e,n))}function ro(t,e,n,r){return Ji||(Ji=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._declarationView=t,o._declarationTContainer=r,o.elementRef=i,o}return _createClass(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=zr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Gr(e,n,t),new to(n)}}]),n}(t)),0===n.type?new Ji(r,n,no(e,n,r)):null}function io(t,e,n,r){var i;$i||($i=function(t){_inherits(r,t);var n=_createSuper(r);function r(t,e,i){var o;return _classCallCheck(this,r),(o=n.call(this))._lContainer=t,o._hostTNode=e,o._hostView=i,o}return _createClass(r,[{key:"element",get:function(){return no(e,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new pn(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var t=on(this._hostTNode,this._hostView),e=Ke(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,i=n.parent;null!=i.parent&&r==i.parent.injectorIndex;)i=i.parent;return i}for(var o=We(t),a=e,s=e[6];o>1;)s=(a=a[15])[6],o--;return s}(t,this._hostView,this._hostTNode);return He(t)&&null!=n?new pn(n,e):new pn(null,this._hostView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var a=o.get(at,null);a&&(i=a)}var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){var n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Rt(n[3])){var i=this.indexOf(t);if(-1!==i)this.detach(i);else{var o=n[3],a=new $i(o,o[6],o[3]);a.detach(a.indexOf(t))}}var s=this._adjustIndex(e);return function(t,e,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],ct(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var a=e[17];null!==a&&n!==a&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);var s=e[19];null!==s&&s.insertView(t),e[2]|=128}(r,n,this._lContainer,s),Pi(r,n,!0,Gi(s,this._lContainer)),t.attachToViewContainerRef(this),ct(this._lContainer[8],s,t),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=this._lContainer[8];return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){this.allocateContainerIfNeeded();var e=this._adjustIndex(t,-1);!function(t,e){var n=Ni(t,e);n&&ji(n[1],n)}(this._lContainer,e),lt(this._lContainer[8],e)}},{key:"detach",value:function(t){this.allocateContainerIfNeeded();var e=this._adjustIndex(t,-1),n=Ni(this._lContainer,e);return n&&null!=lt(this._lContainer[8],e)?new to(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}}]),r}(t));var o=r[n.index];if(Rt(o))i=o;else{var a;if(4===n.type)a=Ht(o);else if(a=r[11].createComment(""),Lt(r)){var s=r[11],u=Wt(n,r);Vi(s,Bi(s,u),a,function(t,e){return Bt(t)?t.nextSibling(e):e.nextSibling}(s,u))}else Hi(r[1],r,a,n);r[n.index]=i=vi(o,r,a,n),gi(r,i)}return new $i(i,n,r)}function oo(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){if(!n&&jt(t)){var r=Yt(t.index,e);return new to(r,r)}return 3===t.type||0===t.type||4===t.type||5===t.type?new to(e[16],e):null}(se(),ie(),t)}var ao=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return so()},t}(),so=oo,uo=new W("Set Injector scope."),co={},lo={},ho=[],fo=void 0;function po(){return void 0===fo&&(fo=new ot),fo}function vo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new yo(t,n,e||po(),r)}var yo=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&ut(n,(function(t){return i.processProvider(t,e,n)})),ut([e],(function(t){return i.processInjectorType(t,[],a)})),this.records.set(K,_o(void 0,this));var s=this.records.get(uo);this.scope=null!=s?s.value:null,this.source=o||("object"==typeof e?null:O(e))}return _createClass(t,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(t){return t.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.Default;this.assertNotDestroyed();var r,i=J(this);try{if(!(n&p.SkipSelf)){var o=this.records.get(t);if(void 0===o){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof W)&&_(t);o=a&&this.injectableDefInScope(a)?_o(mo(t),co):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&p.Self?po():this.parent).get(t,e=n&p.Optional&&e===Q?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(O(t)),i)throw s;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=O(e);if(Array.isArray(e))i=e.map(O).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):O(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(Y,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,0,this.source)}throw s}finally{J(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach((function(e){return t.get(e)}))}},{key:"toString",value:function(){var t=[];return this.records.forEach((function(e,n){return t.push(O(n))})),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=D(t)))return!1;var i=w(t),o=null==i&&t.ngModule||void 0,a=void 0===o?t:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=w(o)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(a);try{ut(i.imports,(function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))}))}finally{}if(void 0!==u)for(var c=function(t){var e=u[t],n=e.ngModule,i=e.providers;ut(i,(function(t){return r.processProvider(t,n,i||ho)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(a),this.records.set(a,_o(i.factory,co));var h=i.providers;if(null!=h&&!s){var f=t;ut(h,(function(t){return r.processProvider(t,f,h)}))}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=wo(t=D(t))?t:D(t&&t.provide),i=function(t,e,n){return bo(t)?_o(void 0,t.useValue):_o(go(t,e,n),co)}(t,e,n);if(wo(t)||!0!==t.multi){var o=this.records.get(r);o&&void 0!==o.multi&&yr()}else{var a=this.records.get(r);a?void 0===a.multi&&yr():((a=_o(void 0,co,!0)).factory=function(){return it(a.multi)},this.records.set(r,a)),r=t,a.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===lo?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(O(t)):e.value===co&&(e.value=lo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}]),t}();function mo(t){var e=_(t),n=null!==e?e.factory:At(t);if(null!==n)return n;var r=w(t);if(null!==r)return r.factory;if(t instanceof W)throw new Error("Token ".concat(O(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=ht(e,"?");throw new Error("Can't resolve all parameters for ".concat(O(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[k]||t[E]||t[S]&&t[S]());if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function go(t,e,n){var r,i=void 0;if(wo(t)){var o=D(t);return At(o)||mo(o)}if(bo(t))i=function(){return D(t.useValue)};else if((r=t)&&r.useFactory)i=function(){return t.useFactory.apply(t,_toConsumableArray(it(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))i=function(){return et(D(t.useExisting))};else{var a=D(t&&(t.useClass||t.provide));if(a||function(t,e,n){var r="";throw t&&e&&(r=" - only instances of Provider and Type are allowed, got: [".concat(e.map((function(t){return t==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(O(t),"'")+r)}(e,n,t),!function(t){return!!t.deps}(t))return At(a)||mo(a);i=function(){return _construct(a,_toConsumableArray(it(t.deps)))}}return i}function _o(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function bo(t){return null!==t&&"object"==typeof t&&X in t}function wo(t){return"function"==typeof t}var ko=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=vo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)},Co=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?ko(t,e,""):ko(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=Q,t.NULL=new ot,t.\u0275prov=m({token:t,providedIn:"any",factory:function(){return et(K)}}),t.__NG_ELEMENT_ID__=-1,t}(),So=new W("AnalyzeForEntryComponents"),Eo=new Map,To=new Set;function Oo(t){return"string"==typeof t?t:t.text()}function xo(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var a=0;a<e.length;a++){var s=e[a];"number"==typeof s?o=s:1==o?i=x(i,s):2==o&&(r=x(r,s+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Io=null;function Ao(){if(!Io){var t=L.Symbol;if(t&&t.iterator)Io=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Io=r)}}return Io}function Do(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}var Po=function(){function t(e){_classCallCheck(this,t),this.wrapped=e}return _createClass(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function Ro(t){return!!No(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ao()in t)}function No(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function jo(t,e,n){return t[e]=n}function Fo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Mo(t,e,n,r){var i=ie();return Fo(i,pe(),e)&&(oe(),function(t,e,n,r,i,o){var a=Wt(t,e),s=e[11];if(null==r)Bt(s)?s.removeAttribute(a,n,o):a.removeAttribute(n);else{var u=null==i?Qe(r):i(r,t.tagName||"",n);Bt(s)?s.setAttribute(a,n,u,o):o?a.setAttributeNS(o,n,u):a.setAttribute(n,u)}}(Ae(),i,t,e,n,r)),Mo}function Lo(t,e,n,r){return Fo(t,pe(),n)?e+Qe(n)+r:xr}function Vo(t,e,n,r,i,o,a,s){var u=ie(),c=oe(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,a,s,u){var c=e.consts,l=Hr(e,n[6],t,0,a||null,$t(c,s));ri(e,n,l,$t(c,u)),Pe(e,l);var h=l.tViews=$r(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),f=ti(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,a):c.data[l];ue(h,!1);var f=u[11].createComment("");Hi(c,u,f,h),pr(f,u),gi(u,u[l]=vi(f,u,f,h)),Ft(h)&&Xr(c,u,h),null!=a&&Zr(u,h,s)}function Uo(t){return Qt(ne.lFrame.contextLView,t)}function qo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.Default,n=ie();return null==n?et(t,e):sn(se(),n,D(t),e)}function Bo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(Ue(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}return null}(se(),t)}function zo(){throw new Error("invalid")}function Ho(t,e,n){var r=ie();return Fo(r,pe(),e)&&ni(oe(),Ae(),r,t,e,r[11],n,!1),Ho}function Go(t,e,n,r,i){var o=i?"class":"style";xi(t,n,e.inputs[o],o,r)}function Wo(t,e,n,r){var i=ie(),o=oe(),a=20+t,s=i[11],u=i[a]=Br(e,s,ne.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,a){var s=e.consts,u=$t(s,o),c=Hr(e,n[6],t,3,i,u);return ri(e,n,c,$t(s,a)),null!==c.attrs&&xo(c,c.attrs,!1),null!==c.mergedAttrs&&xo(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[a];ue(c,!0);var l=c.mergedAttrs;null!==l&&Ve(s,u,l);var h=c.classes;null!==h&&Xi(s,u,h);var f=c.styles;null!==f&&Yi(s,u,f),Hi(o,i,u,c),0===ne.lFrame.elementDepthCount&&pr(u,i),ne.lFrame.elementDepthCount++,Ft(c)&&(Xr(o,i,c),Yr(o,c,i)),null!==r&&Zr(i,c)}function Ko(){var t=se();ce()?le():ue(t=t.parent,!1);var e=t;ne.lFrame.elementDepthCount--;var n=oe();n.firstCreatePass&&(Pe(n,t),Nt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Go(n,e,ie(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Go(n,e,ie(),e.stylesWithoutHost,!1)}function Qo(t,e,n,r){Wo(t,e,n,r),Ko()}function Yo(t,e,n){var r=ie(),i=oe(),o=t+20,a=i.firstCreatePass?function(t,e,n,r,i){var o=e.consts,a=$t(o,r),s=Hr(e,n[6],t,4,"ng-container",a);return null!==a&&xo(s,a,!0),ri(e,n,s,$t(o,i)),null!==e.queries&&e.queries.elementStart(e,s),s}(t,i,r,e,n):i.data[o];ue(a,!0);var s=r[o]=r[11].createComment("");Hi(i,r,s,a),pr(s,r),Ft(a)&&(Xr(i,r,a),Yr(i,a,r)),null!=n&&Zr(r,a)}function Xo(){var t=se(),e=oe();ce()?le():ue(t=t.parent,!1),e.firstCreatePass&&(Pe(e,t),Nt(t)&&e.queries.elementEnd(t))}function Zo(){return ie()}function Jo(t){return!!t&&"function"==typeof t.then}function $o(t){return!!t&&"function"==typeof t.subscribe}function ta(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=ie(),o=oe(),a=se();return na(o,i,i[11],a,t,e,n,r),ta}function ea(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=se(),o=ie(),a=oe();return na(a,o,Ti(ge(a.data),i,o),i,t,e,n,r),ea}function na(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=Ft(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=Si(e),h=!0;if(3===r.type){var f=Wt(r,e),d=s?s(f):mt,p=d.target||f,v=l.length,y=s?function(t){return s(Ht(t[r.index])).target}:r.index;if(Bt(n)){var m=null;if(!s&&u&&(m=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var s=e[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=o,m.__ngLastListenerFn__=o,h=!1;else{o=ia(r,e,o,!1);var g=n.listen(d.name||p,i,o);l.push(o,g),c&&c.push(i,y,v,v+1)}}else o=ia(r,e,o,!0),p.addEventListener(i,o,a),l.push(o),c&&c.push(i,y,v,a)}var _,b=r.outputs;if(h&&null!==b&&(_=b[i])){var w=_.length;if(w)for(var k=0;k<w;k+=2){var C=e[_[k]][_[k+1]].subscribe(o),S=l.length;l.push(o,C),c&&c.push(i,r.index,S,-(S+1))}}}function ra(t,e,n){try{return!1!==e(n)}catch(r){return Oi(t,r),!1}}function ia(t,e,n,r){return function i(o){if(o===Function)return n;var a=2&t.flags?Yt(t.index,e):e;0==(32&e[2])&&_i(a);for(var s=ra(e,n,o),u=i.__ngNextListenerFn__;u;)s=ra(e,u,o)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function oa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return(ne.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ne.lFrame.contextLView))[8]}(t)}function aa(t,e){for(var n=null,r=function(t){var e=t.attrs;if(null!=e){var n=e.indexOf(5);if(0==(1&n))return e[n+1]}return null}(t),i=0;i<e.length;i++){var o=e[i];if("*"!==o){if(null===r?Sr(t,o,!0):Er(r,o))return i}else n=i}return n}function sa(t){var e=ie()[16][6];if(!e.projection)for(var n=e.projection=ht(t?t.length:1,null),r=n.slice(),i=e.child;null!==i;){var o=t?aa(i,t):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}function ua(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=ie(),i=oe(),o=Hr(i,r[6],t,1,null,n||null);null===o.projection&&(o.projection=e),le(),function(t,e,n){Qi(e[11],0,e,n,Li(t,n,e),zi(n.parent||e[6],e))}(i,r,o)}function ca(t,e,n,r,i){var o=ie(),a=Lo(o,e,n,r);return a!==xr&&ni(oe(),Ae(),o,t,a,o[11],i,!1),ca}var la=[];function ha(t,e,n,r,i){for(var o=t[n+1],a=null===e,s=r?Fr(o):Lr(o),u=!1;0!==s&&(!1===u||a);){var c=t[s+1];fa(t[s],e)&&(u=!0,t[s+1]=r?Ur(c):Mr(c)),s=r?Fr(c):Lr(c)}u&&(t[n+1]=r?Mr(o):Ur(o))}function fa(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pt(t,e)>=0}var da={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pa(t){return t.substring(da.key,da.keyEnd)}function va(t,e){var n=da.textEnd;return n===e?-1:(e=da.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,da.key=e,n),ya(t,e,n))}function ya(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ma(t,e,n){return wa(t,e,n,!1),ma}function ga(t,e){return wa(t,e,null,!0),ga}function _a(t){!function(t,e,n,r){var i=oe(),o=ve(2);i.firstUpdatePass&&Ca(i,null,o,!0);var a=ie();if(n!==xr&&Fo(a,o,n)){var s=i.data[xe()+20];if(Ia(s,!0)&&!ka(i,o)){var u=s.classesWithoutHost;null!==u&&(n=x(u,n||"")),Go(i,s,a,n,!0)}else!function(t,e,n,r,i,o,a,s){i===xr&&(i=la);for(var u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;null!==l||null!==h;){var f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0,p=null,v=void 0;l===h?(u+=2,c+=2,f!==d&&(p=h,v=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,v=d),null!==p&&Ta(t,e,n,r,p,v,!0,s),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,s,a,a[11],a[o+1],a[o+1]=function(t,e,n){if(null==n||""===n)return la;var r=[],i=On(n);if(Array.isArray(i))for(var o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(var a in i)i.hasOwnProperty(a)&&t(r,a,i[a]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(ft,ba,t)}function ba(t,e){for(var n=function(t){return function(t){da.key=0,da.keyEnd=0,da.value=0,da.valueEnd=0,da.textEnd=t.length}(t),va(t,ya(t,0,da.textEnd))}(e);n>=0;n=va(e,n))ft(t,pa(e),!0)}function wa(t,e,n,r){var i,o,a=ie(),s=oe(),u=ve(2);(s.firstUpdatePass&&Ca(s,t,u,r),e!==xr&&Fo(a,u,e))&&(null==n&&(i=null===(o=ne.lFrame)?null:o.currentSanitizer)&&(n=i),Ta(s,s.data[xe()+20],a,a[11],t,a[u+1]=function(t,e){return null==t||("function"==typeof e?t=e(t):"string"==typeof e?t+=e:"object"==typeof t&&(t=O(On(t)))),t}(e,n),r,u))}function ka(t,e){return e>=t.expandoStartIndex}function Ca(t,e,n,r){var i=t.data;if(null===i[n+1]){var o=i[xe()+20],a=ka(t,n);Ia(o,r)&&null===e&&!a&&(e=!1),e=function(t,e,n,r){var i=ge(t),o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ea(n=Sa(null,t,e,n,r),e.attrs,r),o=null);else{var a=e.directiveStylingLast;if(-1===a||t[a]!==i)if(n=Sa(i,t,e,n,r),null===o){var s=function(t,e,n){var r=n?e.classBindings:e.styleBindings;if(0!==Lr(r))return t[Fr(r)]}(t,e,r);void 0!==s&&Array.isArray(s)&&function(t,e,n,r){t[Fr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,s=Ea(s=Sa(null,t,e,s[1],r),e.attrs,r))}else o=function(t,e,n){for(var r=void 0,i=e.directiveEnd,o=1+e.directiveStylingLast;o<i;o++)r=Ea(r,t[o].hostAttrs,n);return Ea(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){var a=o?e.classBindings:e.styleBindings,s=Fr(a),u=Lr(a);t[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||pt(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=Fr(t[s+1]);t[r+1]=jr(f,s),0!==f&&(t[f+1]=Vr(t[f+1],r)),t[s+1]=131071&t[s+1]|r<<17}else t[r+1]=jr(s,0),0!==s&&(t[s+1]=Vr(t[s+1],r)),s=r;else t[r+1]=jr(u,0),0===s?s=r:t[u+1]=Vr(t[u+1],r),u=r;l&&(t[r+1]=Mr(t[r+1])),ha(t,c,r,!0),ha(t,c,r,!1),function(t,e,n,r,i){var o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pt(o,e)>=0&&(n[r+1]=Ur(n[r+1]))}(e,c,t,r,o),a=jr(s,u),o?e.classBindings=a:e.styleBindings=a}(i,o,e,n,a,r)}}function Sa(t,e,n,r,i){var o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(r=Ea(r,(o=e[s]).hostAttrs,i),o!==t);)s++;return null!==t&&(n.directiveStylingLast=s),r}function Ea(t,e,n){var r=n?1:2,i=-1;if(null!==e)for(var o=0;o<e.length;o++){var a=e[o];"number"==typeof a?i=a:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ft(t,a,!!n||e[++o]))}return void 0===t?null:t}function Ta(t,e,n,r,i,o,a,s){if(3===e.type){var u=t.data,c=u[s+1];xa(1==(1&c)?Oa(u,e,n,i,Lr(c),a):void 0)||(xa(o)||2==(2&c)&&(o=Oa(u,null,n,i,s,a)),function(t,e,n,r,i){var o=Bt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{var a=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,a):n.style.removeProperty(r):o?t.setStyle(n,r,i,a):n.style.setProperty(r,i)}}(r,a,Gt(xe(),n),i,o))}}function Oa(t,e,n,r,i,o){for(var a=null===e,s=void 0;i>0;){var u=t[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===xr&&(f=h?la:void 0);var d=h?dt(f,r):l===r?f:void 0;if(c&&!xa(d)&&(d=dt(u,r)),xa(d)&&(s=d,a))return s;var p=t[i+1];i=a?Fr(p):Lr(p)}if(null!==e){var v=o?e.residualClasses:e.residualStyles;null!=v&&(s=dt(v,r))}return s}function xa(t){return void 0!==t}function Ia(t,e){return 0!=(t.flags&(e?16:32))}function Aa(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=ie(),r=oe(),i=t+20,o=r.firstCreatePass?Hr(r,n[6],t,3,null,null):r.data[i],a=n[i]=function(t,e){return Bt(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Hi(r,n,a,o),ue(o,!1)}function Da(t){return Pa("",t,""),Da}function Pa(t,e,n){var r=ie(),i=Lo(r,t,e,n);return i!==xr&&function(t,e,n){var r=Gt(e,t),i=t[11];Bt(i)?i.setValue(r,n):r.textContent=n}(r,xe(),i),Pa}function Ra(t,e,n){var r=ie();return Fo(r,pe(),e)&&ni(oe(),Ae(),r,t,e,r[11],n,!0),Ra}function Na(t,e,n){var r=ie();if(Fo(r,pe(),e)){var i=oe(),o=Ae();ni(i,o,r,t,e,Ti(ge(i.data),o,r),n,!0)}return Na}function ja(t,e){var n=Xt(t)[1],r=n.data.length-1;Pe(n,{directiveStart:r,directiveEnd:r+1})}function Fa(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0,r=[t];e;){var i=void 0;if(Mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var o=t;o.inputs=Ma(t.inputs),o.declaredInputs=Ma(t.declaredInputs),o.outputs=Ma(t.outputs);var a=i.hostBindings;a&&Ua(t,a);var s=i.viewQuery,u=i.contentQueries;if(s&&La(t,s),u&&Va(t,u),y(t.inputs,i.inputs),y(t.declaredInputs,i.declaredInputs),y(t.outputs,i.outputs),Mt(i)&&i.data.animation){var c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}o.afterContentChecked=o.afterContentChecked||i.afterContentChecked,o.afterContentInit=t.afterContentInit||i.afterContentInit,o.afterViewChecked=t.afterViewChecked||i.afterViewChecked,o.afterViewInit=t.afterViewInit||i.afterViewInit,o.doCheck=t.doCheck||i.doCheck,o.onDestroy=t.onDestroy||i.onDestroy,o.onInit=t.onInit||i.onInit}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(t),f===Fa&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Be(i.hostAttrs,n=Be(n,i.hostAttrs))}}(r)}function Ma(t){return t===mt?{}:t===gt?[]:t}function La(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function Va(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function Ua(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}var qa=function(){function t(e,n,r){_classCallCheck(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return _createClass(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function Ba(t){t.type.prototype.ngOnChanges&&(t.setInput=za,t.onChanges=function(){var t=Ha(this),e=t&&t.current;if(e){var n=t.previous;if(n===mt)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}})}function za(t,e,n,r){var i=Ha(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:mt,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new qa(u&&u.currentValue,e,a===mt),t[r]=e}function Ha(t){return t.__ngSimpleChanges__||null}function Ga(t,e,n,r,i){if(t=D(t),Array.isArray(t))for(var o=0;o<t.length;o++)Ga(t[o],e,n,r,i);else{var a=oe(),s=ie(),u=wo(t)?t:D(t.provide),c=go(t),l=se(),h=65535&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>16;if(wo(t)||!t.multi){var p=new Le(c,i,qo),v=Qa(u,e,i?h:h+d,f);-1===v?(an(en(l,s),a,u),Wa(a,t,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var y=Qa(u,e,h+d,f),m=Qa(u,e,h,h+d),g=y>=0&&n[y],_=m>=0&&n[m];if(i&&!_||!i&&!g){an(en(l,s),a,u);var b=function(t,e,n,r,i){var o=new Le(t,n,qo);return o.multi=[],o.index=e,o.componentProviders=0,Ka(o,i,r&&!n),o}(i?Xa:Ya,n.length,i,r,c);!i&&_&&(n[m].providerFactory=b),Wa(a,t,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(b),s.push(b)}else Wa(a,t,y>-1?y:m,Ka(n[i?m:y],c,!i&&r));!i&&r&&_&&n[m].componentProviders++}}}function Wa(t,e,n,r){var i=wo(e);if(i||e.useClass){var o=(e.useClass||e).prototype.ngOnDestroy;if(o){var a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var s=a.indexOf(n);-1===s?a.push(n,[r,o]):a[s+1].push(r,o)}else a.push(n,o)}}}function Ka(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Qa(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ya(t,e,n,r){return Za(this.multi,[])}function Xa(t,e,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=hn(n,n[1],this.providerFactory.index,r);Za(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else Za(o,i=[]);return i}function Za(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ja(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=oe();if(r.firstCreatePass){var i=Mt(t);Ga(n,r.data,r.blueprint,i,!0),Ga(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}Ba.ngInherit=!0;var $a=function t(){_classCallCheck(this,t)},ts=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(O(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),es=function(){var t=function t(){_classCallCheck(this,t)};return t.NULL=new ts,t}(),ns=function(){var t=function t(e){_classCallCheck(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=function(){return rs(t)},t}(),rs=function(t){return no(t,se(),ie())},is=function t(){_classCallCheck(this,t)},os=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),as=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return ss()},t}(),ss=function(){var t=ie(),e=Yt(se().index,t);return function(t){var e=t[11];if(Bt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Pt(e)?e:t)},us=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275prov=m({token:t,providedIn:"root",factory:function(){return null}}),t}(),cs=function t(e){_classCallCheck(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},ls=new cs("9.1.13"),hs=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return Ro(t)}},{key:"create",value:function(t){return new ds(t)}}]),t}(),fs=function(t,e){return e},ds=function(){function t(e){_classCallCheck(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fs}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<ms(n,r,i)?e:n,a=ms(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!Ro(t))throw new Error("Error trying to diff '".concat(O(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==o&&Do(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Do(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[Ao()]();!(r=i.next()).done;)e(r.value)}(t,(function(t){i=e._trackByFn(n,t),null!==o&&Do(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Do(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Do(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Do(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new ps(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ys),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ys),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),t}(),ps=function t(e,n){_classCallCheck(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},vs=function(){function t(){_classCallCheck(this,t),this._head=null,this._tail=null}return _createClass(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Do(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),ys=function(){function t(){_classCallCheck(this,t),this.map=new Map}return _createClass(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new vs,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),t}();function ms(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var gs=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return t instanceof Map||No(t)}},{key:"create",value:function(){return new _s}}]),t}(),_s=function(){function t(){_classCallCheck(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(t,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||No(t)))throw new Error("Error trying to diff '".concat(O(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new bs(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Do(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}}]),t}(),bs=function t(e){_classCallCheck(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},ws=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new h]]}}}]),t}();return t.\u0275prov=m({token:t,providedIn:"root",factory:function(){return new t([new hs])}}),t}(),ks=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new h]]}}}]),t}();return t.\u0275prov=m({token:t,providedIn:"root",factory:function(){return new t([new gs])}}),t}(),Cs=[new gs],Ss=new ws([new hs]),Es=new ks(Cs),Ts=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Os(t,ns)},t}(),Os=function(t,e){return ro(t,e,se(),ie())},xs=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Is(t,ns)},t}(),Is=function(t,e){return io(t,e,se(),ie())},As={},Ds=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this)).ngModule=t,r}return _createClass(n,[{key:"resolveComponentFactory",value:function(t){var e=It(t);return new Ns(e,this.ngModule)}}]),n}(es);function Ps(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var Rs=new W("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Xe}}),Ns=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(Or).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return _createClass(n,[{key:"inputs",get:function(){return Ps(this.componentDef.inputs)}},{key:"outputs",get:function(){return Ps(this.componentDef.outputs)}},{key:"create",value:function(t,e,n,r){var i,o,a=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,As,i);return o!==As||r===As?o:e.get(n,r,i)}}}(t,r.injector):t,s=a.get(is,zt),u=a.get(us,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(Bt(t))return t.selectRootElement(e,n===yt.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Br(l,s.createRenderer(null,this.componentDef),function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),p={components:[],scheduler:Xe,clean:Ci,playerHandler:null,flags:0},v=$r(0,-1,null,1,0,null,null,null,null,null),y=zr(null,v,p,f,null,null,s,c,u,a);ke(y,null);try{var m=function(t,e,n,r,i,o){var a=n[1];n[20]=t;var s=Hr(a,null,0,3,null,null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(xo(s,u,!0),null!==t&&(Ve(i,t,u),null!==s.classes&&Xi(i,t,s.classes),null!==s.styles&&Yi(i,t,s.styles)));var c=r.createRenderer(t,e),l=zr(n,Jr(e),null,e.onPush?64:16,n[20],s,r,c,void 0);return a.firstCreatePass&&(an(en(s,n),a,e.type),ui(a,s),li(s,n.length,1)),gi(n,l),n[20]=l}(h,this.componentDef,y,s,c);if(h)if(n)Ve(c,h,["ng-version",ls.full]);else{var g=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!kr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),_=g.attrs,b=g.classes;_&&Ve(c,h,_),b&&b.length>0&&Xi(c,h,b.join(" "))}if(o=Kt(v,0),void 0!==e)for(var w=o.projection=[],k=0;k<this.ngContentSelectors.length;k++){var C=e[k];w.push(null!=C?Array.from(C):null)}i=function(t,e,n,r,i){var o=n[1],a=function(t,e,n){var r=se();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),si(t,r,1),hi(t,e,n));var i=hn(e,t,e.length-1,r);pr(i,e);var o=Wt(r,e);return o&&pr(o,e),i}(o,n,e);r.components.push(a),t[8]=a,i&&i.forEach((function(t){return t(a,e)})),e.contentQueries&&e.contentQueries(1,a,n.length-1);var s=se();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Ie(s.index-20);var u=n[1];ii(u,e),oi(u,n,e.hostVars),ai(e,a)}return a}(m,this.componentDef,y,p,[ja]),Gr(v,y,null)}finally{Oe()}var S=new js(this.componentType,i,no(ns,o,y),y,o);return n&&!d||(v.node.child=o),S}}]),n}($a),js=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a){var s,u,c,l;return _classCallCheck(this,n),(s=e.call(this)).location=i,s._rootLView=o,s._tNode=a,s.destroyCbs=[],s.instance=r,s.hostView=s.changeDetectorRef=new eo(o),u=o[1],c=o,null==(l=u.node)&&(u.node=l=ti(0,null,2,-1,null,null)),c[6]=l,s.componentType=t,s}return _createClass(n,[{key:"injector",get:function(){return new pn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(t){this.destroyCbs&&this.destroyCbs.push(t)}}]),n}(function(){return function t(){_classCallCheck(this,t)}}()),Fs=void 0,Ms=["en",[["a","p"],["AM","PM"],Fs],[["AM","PM"],Fs,Fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fs,"{1} 'at' {0}",Fs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],Ls={};function Vs(t,e,n){"string"!=typeof e&&(n=e,e=t[Hs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Ls[e]=t,n&&(Ls[e][Hs.ExtraData]=n)}function Us(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=zs(e);if(n)return n;var r=e.split("-")[0];if(n=zs(r))return n;if("en"===r)return Ms;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}function qs(t){return Us(t)[Hs.CurrencyCode]||null}function Bs(t){return Us(t)[Hs.PluralCase]}function zs(t){return t in Ls||(Ls[t]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[t]),Ls[t]}var Hs=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.Directionality]="Directionality",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();function Gs(t){var e;null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(e," <=Actual]"))}(0,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}var Ws=new Map,Ks=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;_classCallCheck(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=_assertThisInitialized(i),i.destroyCbs=[],i.componentFactoryResolver=new Ds(_assertThisInitialized(i));var o=Dt(t),a=t[z]||null;return a&&Gs(a),i._bootstrapComponents=Ze(o.bootstrap),i._r3Injector=vo(t,r,[{provide:at,useValue:_assertThisInitialized(i)},{provide:es,useValue:i.componentFactoryResolver}],O(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return _createClass(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Co.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.Default;return t===Co||t===at||t===K?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(at),Qs=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this)).moduleType=t,null!==Dt(t)&&function t(e){if(null!==e.\u0275mod.id){var n=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(O(e)," vs ").concat(O(e.name)))})(n,Ws.get(n),e),Ws.set(n,e)}var r=e.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(e){return t(e)}))}(t),r}return _createClass(n,[{key:"create",value:function(t){return new Ks(this.moduleType,t)}}]),n}(st);function Ys(t,e,n,r){return function(t,e,n,r,i,o){var a=e+n;return Fo(t,a,i)?jo(t,a+1,o?r.call(o,i):r(i)):Zs(t,a+1)}(ie(),de(),t,e,n,r)}function Xs(t,e,n,r,i){return Js(ie(),de(),t,e,n,r,i)}function Zs(t,e){var n=t[e];return n===xr?void 0:n}function Js(t,e,n,r,i,o,a){var s=e+n;return function(t,e,n,r){var i=Fo(t,e,n);return Fo(t,e+1,r)||i}(t,s,i,o)?jo(t,s+2,a?r.call(a,i,o):r(i,o)):Zs(t,s+2)}function $s(t,e){var n,r=oe(),i=t+20;r.firstCreatePass?(n=function(t,e){if(e)for(var n=e.length-1;n>=0;n--){var r=e[n];if(t===r.name)return r}throw new Error("The pipe '".concat(t,"' could not be found!"))}(e,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory||(n.factory=At(n.type)),a=$(qo),s=$e(!1),u=o();return $e(s),$(a),function(t,e,n,r){var i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(r,ie(),t,u),u}function tu(t,e,n,r){var i=ie(),o=Qt(i,t);return function(t,e){return Po.isWrapped(e)&&(e=Po.unwrap(e),t[ne.lFrame.bindingIndex]=xr),e}(i,function(t,e){return t[1].data[e+20].pure}(i,t)?Js(i,de(),e,o.transform,n,r,o):o.transform(n,r))}var eu=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(t=e.call(this)).__isAsync=r,t}return _createClass(n,[{key:"emit",value:function(t){_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var o,a=function(t){return null},s=function(){return null};t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(a=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},e&&(a=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)}),r&&(s=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var u=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,o,a,s);return t instanceof i.a&&t.add(u),u}}]),n}(r.a);function nu(){return this._results[Ao()]()}var ru=function(){function t(){_classCallCheck(this,t),this.dirty=!0,this._results=[],this.changes=new eu,this.length=0;var e=Ao(),n=t.prototype;n[e]||(n[e]=nu)}return _createClass(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),iu=function(){function t(e){_classCallCheck(this,t),this.queryList=e,this.matches=null}return _createClass(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),ou=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,t),this.queries=e}return _createClass(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==ku(t,e).matches&&this.queries[e].setDirty()}}]),t}(),au=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,t),this.predicate=e,this.descendants=n,this.isStatic=r,this.read=i},su=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,t),this.queries=e}return _createClass(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(t){this.queries.push(t)}}]),t}(),uu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return _createClass(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){if(Array.isArray(this.metadata.predicate))for(var n=this.metadata.predicate,r=0;r<n.length;r++)this.matchTNodeWithReadOption(t,e,cu(e,n[r]));else{var i=this.metadata.predicate;i===Ts?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ln(e,t,i,!1,!1))}}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===ns||r===xs||r===Ts&&0===e.type)this.addMatch(e.index,-2);else{var i=ln(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function cu(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function lu(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?no(ns,t,e):0===t.type?ro(Ts,ns,t,e):null}(e,t):-2===n?function(t,e,n){return n===ns?no(ns,e,t):n===Ts?ro(Ts,ns,e,t):n===xs?io(xs,ns,e,t):void 0}(t,e,r):hn(t,t[1],n,e)}function hu(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var o=t.data,a=n.matches,s=[],u=0;u<a.length;u+=2){var c=a[u];s.push(c<0?null:lu(e,o[c],a[u+1],n.metadata.read))}i.matches=s}return i.matches}function fu(t){var e=ie(),n=oe(),r=_e();be(r+1);var i=ku(n,r);if(t.dirty&&Zt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{var o=i.crossesNgTemplate?function t(e,n,r,i){var o=e.queries.getByIndex(r),a=o.matches;if(null!==a)for(var s=hu(e,n,o,r),u=0;u<a.length;u+=2){var c=a[u];if(c>0)i.push(s[u/2]);else{for(var l=a[u+1],h=n[-c],f=10;f<h.length;f++){var d=h[f];d[17]===d[3]&&t(d[1],d,l,i)}if(null!==h[9])for(var p=h[9],v=0;v<p.length;v++){var y=p[v];t(y[1],y,l,i)}}}return i}(n,e,r,[]):hu(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function du(t,e,n){vu(oe(),ie(),t,e,n,!0)}function pu(t,e,n){vu(oe(),ie(),t,e,n,!1)}function vu(t,e,n,r,i,o){t.firstCreatePass&&(wu(t,new au(n,r,o,i),-1),o&&(t.staticViewQueries=!0)),bu(t,e)}function yu(t,e,n,r){gu(oe(),ie(),e,n,r,!1,se(),t)}function mu(t,e,n,r){gu(oe(),ie(),e,n,r,!0,se(),t)}function gu(t,e,n,r,i,o,a,s){t.firstCreatePass&&(wu(t,new au(n,r,o,i),a.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,s),o&&(t.staticContentQueries=!0)),bu(t,e)}function _u(){return t=ie(),e=_e(),t[19].queries[e].queryList;var t,e}function bu(t,e){var n=new ru;!function(t,e,n,r){var i=Si(e);i.push(n),t.firstCreatePass&&Ei(t).push(r,i.length-1)}(t,e,n,n.destroy),null===e[19]&&(e[19]=new ou),e[19].queries.push(new iu(n))}function wu(t,e,n){null===t.queries&&(t.queries=new su),t.queries.track(new uu(e,n))}function ku(t,e){return t.queries.getByIndex(e)}function Cu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.Default,e=oo(!0);if(null!=e||t&p.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}var Su=new W("Application Initializer"),Eu=function(){var t=function(){function t(e){var n=this;_classCallCheck(this,t),this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return _createClass(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Jo(i)&&e.push(i)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(et(Su,8))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t}(),Tu=new W("AppId"),Ou={provide:Tu,useFactory:function(){return"".concat(xu()).concat(xu()).concat(xu())},deps:[]};function xu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Iu=new W("Platform Initializer"),Au=new W("Platform ID"),Du=new W("appBootstrapListener"),Pu=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t}(),Ru=new W("LocaleId"),Nu=new W("DefaultCurrencyCode"),ju=function t(e,n){_classCallCheck(this,t),this.ngModuleFactory=e,this.componentFactories=n},Fu=function(t){return new Qs(t)},Mu=Fu,Lu=function(t){return Promise.resolve(Fu(t))},Vu=function(t){var e=Fu(t),n=Ze(Dt(t).declarations).reduce((function(t,e){var n=It(e);return n&&t.push(new Ns(n)),t}),[]);return new ju(e,n)},Uu=Vu,qu=function(t){return Promise.resolve(Vu(t))},Bu=function(){var t=function(){function t(){_classCallCheck(this,t),this.compileModuleSync=Mu,this.compileModuleAsync=Lu,this.compileModuleAndAllComponentsSync=Uu,this.compileModuleAndAllComponentsAsync=qu}return _createClass(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t}(),zu=new W("compilerOptions"),Hu=Promise.resolve(0);function Gu(t){"undefined"==typeof Zone?Hu.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var Wu=function(){function t(e){var n,r,i=e.enableLongStackTrace,o=void 0!==i&&i,a=e.shouldCoalesceEventChangeDetection,s=void 0!==a&&a;if(_classCallCheck(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new eu(!1),this.onMicrotaskEmpty=new eu(!1),this.onStable=new eu(!1),this.onError=new eu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=L.requestAnimationFrame,e=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(L,(function(){t.lastRequestAnimationFrameId=-1,Xu(t),Yu(t)})),Xu(t))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(t,e,i,o,a,s){try{return Zu(n),t.invokeTask(i,o,a,s)}finally{r&&"eventTask"===o.type&&r(),Ju(n)}},onInvoke:function(t,e,r,i,o,a,s){try{return Zu(n),t.invoke(r,i,o,a,s)}finally{Ju(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Xu(n),Yu(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Qu,Ku,Ku);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function Ku(){}var Qu={};function Yu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function Xu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Zu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ju(t){t._nesting--,Yu(t)}var $u=function(){function t(){_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new eu,this.onMicrotaskEmpty=new eu,this.onStable=new eu,this.onError=new eu}return _createClass(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),tc=function(){var t=function(){function t(e){var n=this;_classCallCheck(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){Wu.assertNotInAngularZone(),Gu((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())Gu((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(t){return t.timeoutId!==i})),t(r._didWork,r.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(et(Wu))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t}(),ec=function(){var t=function(){function t(){_classCallCheck(this,t),this._applications=new Map,ic.addToWindow(this)}return _createClass(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ic.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t}();function nc(t){ic=t}var rc,ic=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),oc=function(t,e,n){var r=t.get(zu,[]).concat(e),i=new Qs(n);if(0===Eo.size)return Promise.resolve(i);var o,a,s=(o=r.map((function(t){return t.providers})),a=[],o.forEach((function(t){return t&&a.push.apply(a,_toConsumableArray(t))})),a);if(0===s.length)return Promise.resolve(i);var u=function(){var t=L.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),c=Co.create({providers:s}).get(u.ResourceLoader);return function(t){var e=[],n=new Map;function r(t){var e=n.get(t);if(!e){var r=function(t){return Promise.resolve(c.get(t))}(t);n.set(t,e=r.then(Oo))}return e}return Eo.forEach((function(t,n){var i=[];t.templateUrl&&i.push(r(t.templateUrl).then((function(e){t.template=e})));var o=t.styleUrls,a=t.styles||(t.styles=[]),s=t.styles.length;o&&o.forEach((function(e,n){a.push(""),i.push(r(e).then((function(r){a[s+n]=r,o.splice(o.indexOf(e),1),0==o.length&&(t.styleUrls=void 0)})))}));var u=Promise.all(i).then((function(){return function(t){To.delete(t)}(n)}));e.push(u)})),Eo=new Map,Promise.all(e).then((function(){}))}().then((function(){return i}))},ac=new W("AllowMultipleToken"),sc=function t(e,n){_classCallCheck(this,t),this.name=e,this.token=n};function uc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+e,i=new W(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=cc();if(!o||o.injector.get(ac,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0},{provide:uo,useValue:"platform"});!function(t){if(rc&&!rc.destroyed&&!rc.injector.get(ac,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rc=t.get(lc);var e=t.get(Iu,null);e&&e.forEach((function(t){return t()}))}(Co.create({providers:a,name:r}))}return function(t){var e=cc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function cc(){return rc&&!rc.destroyed?rc:null}var lc=function(){var t=function(){function t(e){_classCallCheck(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(n=e?e.ngZone:void 0,r=e&&e.ngZoneEventCoalescing||!1,"noop"===n?new $u:("zone.js"===n?void 0:n)||new Wu({enableLongStackTrace:Mn(),shouldCoalesceEventChangeDetection:r})),a=[{provide:Wu,useValue:o}];return o.run((function(){var e=Co.create({providers:a,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(bn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return dc(i._modules,n)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(t){r.handleError(t)}})})),function(t,e,r){try{var o=((a=n.injector.get(Eu)).runInitializers(),a.donePromise.then((function(){return Gs(n.injector.get(Ru,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return Jo(o)?o.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):o}catch(s){throw e.runOutsideAngular((function(){return t.handleError(s)})),s}var a}(r,o)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=hc({},n);return oc(this.injector,r,t).then((function(t){return e.bootstrapModuleFactory(t,r)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(fc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(O(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(et(Co))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t}();function hc(t,e){return Array.isArray(e)?e.reduce(hc,t):Object.assign(Object.assign({},t),e)}var fc=function(){var t=function(){function t(e,n,r,i,u,c){var l=this;_classCallCheck(this,t),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=u,this._initStatus=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Mn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){l._zone.run((function(){l.tick()}))}});var h=new o.a((function(t){l._stable=l._zone.isStable&&!l._zone.hasPendingMacrotasks&&!l._zone.hasPendingMicrotasks,l._zone.runOutsideAngular((function(){t.next(l._stable),t.complete()}))})),f=new o.a((function(t){var e;l._zone.runOutsideAngular((function(){e=l._zone.onStable.subscribe((function(){Wu.assertNotInAngularZone(),Gu((function(){l._stable||l._zone.hasPendingMacrotasks||l._zone.hasPendingMicrotasks||(l._stable=!0,t.next(!0))}))}))}));var n=l._zone.onUnstable.subscribe((function(){Wu.assertInAngularZone(),l._stable&&(l._stable=!1,l._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=Object(a.a)(h,f.pipe(Object(s.a)()))}return _createClass(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof $a?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(at),o=n.create(Co.NULL,[],e||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(tc,null);return a&&o.injector.get(ec).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Mn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=_createForOfIteratorHelper(this._views);try{for(n.s();!(e=n.n()).done;){e.value.detectChanges()}}catch(o){n.e(o)}finally{n.f()}if(this._enforceNoNewChanges){var r,i=_createForOfIteratorHelper(this._views);try{for(i.s();!(r=i.n()).done;){r.value.checkNoChanges()}}catch(o){i.e(o)}finally{i.f()}}}catch(a){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(a)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;dc(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Du,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),dc(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}();return t.\u0275fac=function(e){return new(e||t)(et(Wu),et(Pu),et(Co),et(bn),et(es),et(Eu))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t}();function dc(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var pc=function t(){_classCallCheck(this,t)},vc=function t(){_classCallCheck(this,t)},yc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},mc=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this._compiler=e,this._config=n||yc}return _createClass(t,[{key:"load",value:function(t){return this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var e=this,r=_slicedToArray(t.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),n("zn8P")(i).then((function(t){return t[o]})).then((function(t){return gc(t,i,o)})).then((function(t){return e._compiler.compileModuleAsync(t)}))}},{key:"loadFactory",value:function(t){var e=_slicedToArray(t.split("#"),2),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(t){return t[i+o]})).then((function(t){return gc(t,r,i)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(et(Bu),et(vc,8))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t}();function gc(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var _c=function(t){return null},bc=uc(null,"core",[{provide:Au,useValue:"unknown"},{provide:lc,deps:[Co]},{provide:ec,deps:[]},{provide:Pu,deps:[]}]),wc=[{provide:fc,useClass:fc,deps:[Wu,Pu,Co,bn,es,Eu]},{provide:Rs,deps:[Wu],useFactory:function(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}},{provide:Eu,useClass:Eu,deps:[[new h,Su]]},{provide:Bu,useClass:Bu,deps:[]},Ou,{provide:ws,useFactory:function(){return Ss},deps:[]},{provide:ks,useFactory:function(){return Es},deps:[]},{provide:Ru,useFactory:function(t){return Gs(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new l(Ru),new h,new d]]},{provide:Nu,useValue:"USD"}],kc=function(){var t=function t(e){_classCallCheck(this,t)};return t.\u0275mod=St({type:t}),t.\u0275inj=g({factory:function(e){return new(e||t)(et(fc))},providers:wc}),t}()},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),a=n("kJWO"),s=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[a.a]}(t))return function(t,e){return new r.a((function(n){var r=new o.a;return r.add(e.schedule((function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a((function(n){var r=new o.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(Object(l.a)(t))return Object(s.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,i=new o.a;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[u.a](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a"),i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC"),i=new r.a((function(t){return t.complete()}));function o(t){return t?function(t){return new r.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r,i=n("7o/Q"),o=n("2QA8"),a=n("gRHU"),s=n("kJWO"),u=n("mCNh"),c=n("2fFW"),l=((r=function(){function t(e){_classCallCheck(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return _createClass(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,s=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(a.a)}(t,e,n);if(s.add(r?r.call(s,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),c.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,o=e.isStopped;if(n||o)return!1;t=r&&r instanceof i.a?r:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=h(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}}),r,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:s.a,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:Object(u.b)(e)(this)}},{key:"toPromise",value:function(t){var e=this;return new(t=h(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))}}]),t}()).create=function(t){return new r(t)},r);function h(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;_classCallCheck(this,t),this.SchedulerAction=e,this.now=n}return _createClass(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),i=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.now;return _classCallCheck(this,n),(i=e.call(this,t,(function(){return n.delegate&&n.delegate!==_assertThisInitialized(i)?n.delegate.now():o()}))).actions=[],i.active=!1,i.scheduled=void 0,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(r)},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.3.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=e[e.length-1];return Object(r.a)(a)?(e.pop(),Object(o.a)(e,a)):Object(i.a)(e)}},Lhse:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}),0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),a=n("kJWO"),s=n("I55L"),u=n("c2HN"),c=n("XoHu"),l=function(t){if(t&&"function"==typeof t[a.a])return l=t,function(t){var e=l[a.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(s.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,i.a),t};if(t&&"function"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,l,h=Object(c.a)(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(h," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),a=n("yCtX");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=e[e.length-1];return Object(i.a)(c)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(s=e.pop())):"number"==typeof c&&(s=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(s)(Object(a.a)(e,u))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),a=n("9ppp"),s=n("Ylt2"),u=n("2QA8"),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t)).destination=t,r}return n}(i.a),l=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _createClass(n,[{key:u.a,value:function(){return new c(this)}},{key:"lift",value:function(t){var e=new h(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new a.a;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new s.a(this,t))}},{key:"asObservable",value:function(){var t=new r.a;return t.source=this,t}}]),n}(r.a);return t.create=function(t,e){return new h(t,e)},t}(),h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).destination=t,i.source=r,i}return _createClass(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):o.a.EMPTY}}]),n}(l)},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Y7HM:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(n("quSY").a)},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("51Dv"),i=n("SeVD"),o=n("HDdC");function a(t,e,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new r.a(t,n,a);if(!s.closed)return e instanceof o.a?e.subscribe(s):Object(i.a)(e)(s)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a((function(n){var r=new i.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},jmUF:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return S})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return y})),n.d(e,"j",(function(){return k}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),a=n("tf+s"),s=n("pxpQ"),u=n("8Y7J"),c=n("Jgta");function l(){}var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a;_classCallCheck(this,t),this.zone=e,this.delegate=n}return _createClass(t,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(t,e,n){var r=this.zone;return this.delegate.schedule((function(e){var n=this;r.runGuarded((function(){t.apply(n,[e])}))}),e,n)}}]),t}(),f=function(){function t(e){_classCallCheck(this,t),this.zone=e,this.task=null}return _createClass(t,[{key:"call",value:function(t,e){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run((function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)})),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}},{key:"unscheduleTask",value:function(){var t=this;setTimeout((function(){null!=t.task&&"scheduled"===t.task.state&&(t.task.invoke(),t.task=null)}),10)}}]),t}(),d=function t(e){_classCallCheck(this,t),this.ngZone=e,this.outsideAngular=e.runOutsideAngular((function(){return new h(Zone.current)})),this.insideAngular=e.run((function(){return new h(Zone.current,i.a)}))};function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(a.a)(t.outsideAngular),Object(s.b)(t.insideAngular))}}var v=["ngOnDestroy"],y=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(t,{get:function(i,o){return n.runOutsideAngular((function(){var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(v.indexOf(o)>-1)return function(){};var a=e.toPromise().then((function(t){var e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then((function(t){return n.run((function(){return t}))})):n.run((function(){return e}))}));return new Proxy((function(){}),{get:function(t,e){return a[e]},apply:function(t,e,n){return a.then((function(t){var e,i=t&&t.apply(void 0,_toConsumableArray(n));return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i}))}})}))}})},m=function(t,e){e.forEach((function(e){Object.getOwnPropertyNames(e.prototype||e).forEach((function(n){Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))}))}))},g=new u.q("angularfire2.app.options"),_=new u.q("angularfire2.app.nameOrConfig"),b=new u.O("6.1.4");function w(e,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var o=c.a.apps.filter((function(t){return t&&t.name===i.name}))[0]||n.runOutsideAngular((function(){return c.a.initializeApp(e,i)}));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error","".concat(o.name," Firebase App already initialized with different options").concat(t.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(a){}return o}var k=function(){C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Object(u.W)()&&"undefined"!=typeof console&&(e=console)[t].apply(e,r)};function S(e,n,r,i,o){var a=_toArray(globalThis.\u0275AngularfireInstanceCache.get(e)||[]),s=a[0],u=a.slice(1);if(s){try{o.some((function(t,e){var n=u[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n}))&&C("error","".concat(n," was already initialized on the ").concat(r.name," Firebase App instance with different settings.").concat(t.hot?" You may need to reload as Firebase is not HMR aware.":""))}catch(l){}return s}var c=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[c].concat(_toConsumableArray(o))),c}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);var E={provide:function t(){_classCallCheck(this,t)},useFactory:w,deps:[g,u.z,[new u.A,_]]},T=function(){var t=function(){function t(e){_classCallCheck(this,t),c.a.registerVersion("angularfire",b.full,e.toString()),c.a.registerVersion("angular",u.N.full)}return _createClass(t,null,[{key:"initializeApp",value:function(e,n){return{ngModule:t,providers:[{provide:g,useValue:e},{provide:_,useValue:n}]}}}]),t}();return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)(u.Xb(u.B))},providers:[E]}),t}()}).call(this,n("3UD+")(t))},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(n("7o/Q").a)},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}var o=function(){function t(e,n){_classCallCheck(this,t),this.project=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))}}]),t}(),a=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||_assertThisInitialized(o),o}return _createClass(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(r.a)},mAIw:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},mCNh:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("SpAZ");function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o(e)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return h}));var r,i=n("7o/Q"),o=n("EY2u"),a=n("LRne"),s=n("z6cu"),u=((r=function(){function t(e,n,r){_classCallCheck(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return _createClass(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(a.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(o.b)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}()).completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r);function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new l(t,e))}}var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this.scheduler=e,this.delay=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.scheduler,this.delay))}}]),t}(),h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return _createClass(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new f(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(u.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(u.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(u.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(i.a),f=function t(e,n){_classCallCheck(this,t),this.notification=e,this.destination=n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],a=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},u=a.INFO,c=((i={})[a.DEBUG]="log",i[a.VERBOSE]="log",i[a.INFO]="info",i[a.WARN]="warn",i[a.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],t)),this._logHandler.apply(this,r([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],t)),this._logHandler.apply(this,r([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],t)),this._logHandler.apply(this,r([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],t)),this._logHandler.apply(this,r([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],t)),this._logHandler.apply(this,r([this,a.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:a[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return M})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return P})),n.d(e,"i",(function(){return L})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return B})),n.d(e,"m",(function(){return d})),n.d(e,"n",(function(){return D})),n.d(e,"o",(function(){return y})),n.d(e,"p",(function(){return m})),n.d(e,"q",(function(){return _})),n.d(e,"r",(function(){return N})),n.d(e,"s",(function(){return b})),n.d(e,"t",(function(){return p})),n.d(e,"u",(function(){return v})),n.d(e,"v",(function(){return k})),n.d(e,"w",(function(){return g})),n.d(e,"x",(function(){return w})),n.d(e,"y",(function(){return A})),n.d(e,"z",(function(){return O})),n.d(e,"A",(function(){return j})),n.d(e,"B",(function(){return F})),n.d(e,"C",(function(){return R})),n.d(e,"D",(function(){return W})),n.d(e,"E",(function(){return G})),n.d(e,"F",(function(){return x})),n.d(e,"G",(function(){return q})),n.d(e,"H",(function(){return z})),n.d(e,"I",(function(){return H}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return s.encodeByteArray(e,!0)},c=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function v(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return d().indexOf("Electron/")>=0}function b(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function k(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?E(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new C(i,s,r);return u},t}();function E(t,e){return t.replace(T,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var T=/\{\$([^}]+)}/g;function O(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var I=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=O(c(o[0])||""),n=O(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=I(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},D=function(t){var e=I(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function F(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function L(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var G=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _createClass(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?_get(_getPrototypeOf(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?_get(_getPrototypeOf(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(n("3N8a").a),i=new(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(n("IjjT").a))(r)},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r,i,o=n("DH7j"),a=n("XoHu"),s=n("n6bG"),u=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),c=((i=function(){function t(e){_classCallCheck(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return _createClass(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var c=0;c<n.length;++c)n[c].remove(this);if(Object(s.a)(r))try{r.call(this)}catch(p){e=p instanceof u?l(p.errors):[p]}if(Object(o.a)(i))for(var h=-1,f=i.length;++h<f;){var d=i[h];if(Object(a.a)(d))try{d.unsubscribe()}catch(p){e=e||[],p instanceof u?e=e.concat(l(p.errors)):e.push(p)}}if(e)throw new u(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}()).EMPTY=((r=new i).closed=!0,r),i);function l(t){return t.reduce((function(t,e){return t.concat(e instanceof u?e.errors:e)}),[])}},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("7Hc7"),o=n("Y7HM"),a=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.a;return _classCallCheck(this,n),(r=e.call(this)).source=t,r.delayTime=a,r.scheduler=s,(!Object(o.a)(a)||a<0)&&(r.delayTime=0),s&&"function"==typeof s.schedule||(r.scheduler=i.a),r}return _createClass(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.a;return new n(t,e,r)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(r.a);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new u(t,e))}}var u=function(){function t(e,n){_classCallCheck(this,t),this.scheduler=e,this.delay=n}return _createClass(t,[{key:"call",value:function(t,e){return new a(e,this.delay,this.scheduler).subscribe(t)}}]),t}()},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("7o/Q");function i(){}var o=n("n6bG");function a(t,e,n){return function(r){return r.lift(new s(t,e,n))}}var s=function(){function t(e,n,r){_classCallCheck(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),u=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,a,s){var u;return _classCallCheck(this,n),(u=e.call(this,t))._tapNext=i,u._tapError=i,u._tapComplete=i,u._tapError=a||i,u._tapComplete=s||i,Object(o.a)(r)?(u._context=_assertThisInitialized(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i,u._tapError=r.error||i,u._tapComplete=r.complete||i),u}return _createClass(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(r.a)},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),a=n("quSY");function s(){return function(t){return t.lift(new c(t))}}var u,c=function(){function t(e){_classCallCheck(this,t),this.connectable=e}return _createClass(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),l=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).connectable=r,i}return _createClass(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(o.a),h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _createClass(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.a.EMPTY)),t}},{key:"refCount",value:function(){return s()(this)}}]),n}(i.a),f={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(u=h.prototype)._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}},d=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).connectable=r,i}return _createClass(n,[{key:"_error",value:function(t){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(r.b);function p(){return new r.a}function v(){return function(t){return s()((e=p,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function a(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},z6cu:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t,e){return new r.a(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function o(t){var e=t.error;t.subscriber.error(e)}},zIRd:function(t,e,n){"use strict";var r,i,o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=n("qOnz"),s=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.b("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.b("@firebase/app"),d=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(a.j)(t),this.container=new s.b(e.name),this._addComponent(new s.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(Object(a.h)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(c.join(" "))}o(new s.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(a.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return f.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Object(a.k)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(d);return e.INTERNAL=o(o({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(a.k)(e,t)},createSubscribe:a.i,ErrorFactory:a.b,deepExtend:a.k}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(a.o)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(a.u)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var g,_=p;(g=_).INTERNAL.registerComponent(new s.a("platform-logger",(function(t){return new v(t)}),"PRIVATE")),g.registerVersion("@firebase/app","0.6.17",void 0),g.registerVersion("fire-js",""),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("8Y7J"),i={apiKey:"AIzaSyDPZhoVxLBx1GUTy0NIQieVGm2NtwolEFY",authDomain:"galli-list.firebaseapp.com",projectId:"galli-list",storageBucket:"galli-list.appspot.com",messagingSenderId:"158754402733",appId:"1:158754402733:web:b5515d146fa09b6df5b124",measurementId:"G-SWZE1FZZP9"},o=null;function a(){return o}var s,u=new r.q("DocumentToken"),c=((s=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||s)},s.\u0275prov=Object(r.Kb)({factory:l,token:s,providedIn:"platform"}),s);function l(){return Object(r.Xb)(d)}var h,f=new r.q("Location Initialized"),d=((h=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._doc=t,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=a().getLocation(),this._history=a().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return a().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){a().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){a().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(t,e,n){p()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){p()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(c)).\u0275fac=function(t){return new(t||h)(r.Xb(u))},h.\u0275prov=Object(r.Kb)({factory:v,token:h,providedIn:"platform"}),h);function p(){return!!window.history.pushState}function v(){return new d(Object(r.Xb)(u))}function y(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}var _,b=((_=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||_)},_.\u0275prov=Object(r.Kb)({factory:w,token:_,providedIn:"root"}),_);function w(t){var e=Object(r.Xb)(u).location;return new T(Object(r.Xb)(c),e&&e.origin||"")}var k,C,S,E=new r.q("appBaseHref"),T=((S=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;if(_classCallCheck(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,_possibleConstructorReturn(i)}return _createClass(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return y(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(b)).\u0275fac=function(t){return new(t||S)(r.Xb(c),r.Xb(E,8))},S.\u0275prov=r.Kb({token:S,factory:S.\u0275fac}),S),O=((C=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return _createClass(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=y(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(b)).\u0275fac=function(t){return new(t||C)(r.Xb(c),r.Xb(E,8))},C.\u0275prov=r.Kb({token:C,factory:C.\u0275fac}),C),x=((k=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=e;var o=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=m(A(o)),this._platformStrategy.onPopState((function(t){i._subject.emit({url:i.path(!0),pop:!0,state:t.state,type:t.type})}))}return _createClass(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+g(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,A(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this.subscribe((function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(t,e)}))}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}()).\u0275fac=function(t){return new(t||k)(r.Xb(b),r.Xb(c))},k.normalizeQueryParams=g,k.joinWithSlash=y,k.stripTrailingSlash=m,k.\u0275prov=Object(r.Kb)({factory:I,token:k,providedIn:"root"}),k);function I(){return new x(Object(r.Xb)(b),Object(r.Xb)(c))}function A(t){return t.replace(/\/index.html$/,"")}var D=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),P=function(){var t={Format:0,Standalone:1};return t[t.Format]="Format",t[t.Standalone]="Standalone",t}(),R=function(){var t={Narrow:0,Abbreviated:1,Wide:2,Short:3};return t[t.Narrow]="Narrow",t[t.Abbreviated]="Abbreviated",t[t.Wide]="Wide",t[t.Short]="Short",t}(),N=function(){var t={Short:0,Medium:1,Long:2,Full:3};return t[t.Short]="Short",t[t.Medium]="Medium",t[t.Long]="Long",t[t.Full]="Full",t}(),j=function(){var t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return t[t.Decimal]="Decimal",t[t.Group]="Group",t[t.List]="List",t[t.PercentSign]="PercentSign",t[t.PlusSign]="PlusSign",t[t.MinusSign]="MinusSign",t[t.Exponential]="Exponential",t[t.SuperscriptingExponent]="SuperscriptingExponent",t[t.PerMille]="PerMille",t[t.Infinity]="Infinity",t[t.NaN]="NaN",t[t.TimeSeparator]="TimeSeparator",t[t.CurrencyDecimal]="CurrencyDecimal",t[t.CurrencyGroup]="CurrencyGroup",t}();function F(t,e){return B(Object(r.lb)(t)[r.bb.DateFormat],e)}function M(t,e){return B(Object(r.lb)(t)[r.bb.TimeFormat],e)}function L(t,e){return B(Object(r.lb)(t)[r.bb.DateTimeFormat],e)}function V(t,e){var n=Object(r.lb)(t),i=n[r.bb.NumberSymbols][e];if(void 0===i){if(e===j.CurrencyDecimal)return n[r.bb.NumberSymbols][j.Decimal];if(e===j.CurrencyGroup)return n[r.bb.NumberSymbols][j.Group]}return i}var U=r.ob;function q(t){if(!t[r.bb.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(t[r.bb.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function B(t,e){for(var n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function z(t){var e=_slicedToArray(t.split(":"),2);return{hours:+e[0],minutes:+e[1]}}var H=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,G={},W=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,K=function(){var t={Short:0,ShortGMT:1,Long:2,Extended:3};return t[t.Short]="Short",t[t.ShortGMT]="ShortGMT",t[t.Long]="Long",t[t.Extended]="Extended",t}(),Q=function(){var t={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return t[t.FullYear]="FullYear",t[t.Month]="Month",t[t.Date]="Date",t[t.Hours]="Hours",t[t.Minutes]="Minutes",t[t.Seconds]="Seconds",t[t.FractionalSeconds]="FractionalSeconds",t[t.Day]="Day",t}(),Y=function(){var t={DayPeriods:0,Days:1,Months:2,Eras:3};return t[t.DayPeriods]="DayPeriods",t[t.Days]="Days",t[t.Months]="Months",t[t.Eras]="Eras",t}();function X(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));for(var a=String(t);a.length<e;)a="0"+a;return r&&(a=a.substr(a.length-e)),o+a}function J(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(o,a){var s,u=function(t,e){switch(t){case Q.FullYear:return e.getFullYear();case Q.Month:return e.getMonth();case Q.Date:return e.getDate();case Q.Hours:return e.getHours();case Q.Minutes:return e.getMinutes();case Q.Seconds:return e.getSeconds();case Q.FractionalSeconds:return e.getMilliseconds();case Q.Day:return e.getDay();default:throw new Error('Unknown DateType value "'.concat(t,'".'))}}(t,o);if((n>0||u>-n)&&(u+=n),t===Q.Hours)0===u&&-12===n&&(u=12);else if(t===Q.FractionalSeconds)return s=e,Z(u,3).substr(0,s);var c=V(a,j.MinusSign);return Z(u,e,c,r,i)}}function $(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P.Format,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(o,a){return function(t,e,n,i,o,a){switch(n){case Y.Months:return function(t,e,n){var i=Object(r.lb)(t),o=B([i[r.bb.MonthsFormat],i[r.bb.MonthsStandalone]],e);return B(o,n)}(e,o,i)[t.getMonth()];case Y.Days:return function(t,e,n){var i=Object(r.lb)(t),o=B([i[r.bb.DaysFormat],i[r.bb.DaysStandalone]],e);return B(o,n)}(e,o,i)[t.getDay()];case Y.DayPeriods:var s=t.getHours(),u=t.getMinutes();if(a){var c,l=function(t){var e=Object(r.lb)(t);return q(e),(e[r.bb.ExtraData][2]||[]).map((function(t){return"string"==typeof t?z(t):[z(t[0]),z(t[1])]}))}(e),h=function(t,e,n){var i=Object(r.lb)(t);q(i);var o=B([i[r.bb.ExtraData][0],i[r.bb.ExtraData][1]],e)||[];return B(o,n)||[]}(e,o,i);if(l.forEach((function(t,e){if(Array.isArray(t)){var n=t[0],r=n.hours,i=n.minutes,o=t[1],a=o.hours,l=o.minutes;s>=r&&u>=i&&(s<a||s===a&&u<l)&&(c=h[e])}else{var f=t.hours,d=t.minutes;f===s&&d===u&&(c=h[e])}})),c)return c}return function(t,e,n){var i=Object(r.lb)(t),o=B([i[r.bb.DayPeriodsFormat],i[r.bb.DayPeriodsStandalone]],e);return B(o,n)}(e,o,i)[s<12?0:1];case Y.Eras:return function(t,e){return B(Object(r.lb)(t)[r.bb.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,a,t,e,n,i)}}function tt(t){return function(e,n,r){var i=-1*r,o=V(n,j.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case K.Short:return(i>=0?"+":"")+Z(a,2,o)+Z(Math.abs(i%60),2,o);case K.ShortGMT:return"GMT"+(i>=0?"+":"")+Z(a,1,o);case K.Long:return"GMT"+(i>=0?"+":"")+Z(a,2,o)+":"+Z(Math.abs(i%60),2,o);case K.Extended:return 0===r?"Z":(i>=0?"+":"")+Z(a,2,o)+":"+Z(Math.abs(i%60),2,o);default:throw new Error('Unknown zone width "'.concat(t,'"'))}}}function et(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var i,o,a,s;if(e){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,c=n.getDate();i=1+Math.floor((c+u)/7)}else{var l=(o=n.getFullYear(),a=new Date(o,0,1).getDay(),new Date(o,0,1+(a<=4?4:11)-a)),h=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))).getTime()-l.getTime();i=1+Math.round(h/6048e5)}return Z(i,t,V(r,j.MinusSign))}}var nt={};function rt(t,e){t=t.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function it(t){return t instanceof Date&&!isNaN(t.valueOf())}var ot,at,st,ut,ct=function t(){_classCallCheck(this,t)},lt=((at=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this)).locale=t,r}return _createClass(n,[{key:"getPluralCategory",value:function(t,e){switch(U(e||this.locale)(t)){case D.Zero:return"zero";case D.One:return"one";case D.Two:return"two";case D.Few:return"few";case D.Many:return"many";default:return"other"}}}]),n}(ct)).\u0275fac=function(t){return new(t||at)(r.Xb(r.u))},at.\u0275prov=r.Kb({token:at,factory:at.\u0275fac}),at),ht=((ot=function(){function t(e,n,r,i){_classCallCheck(this,t),this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _createClass(t,[{key:"klass",set:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.rb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}},{key:"_applyKeyValueChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachChangedItem((function(t){return e._toggleClass(t.key,t.currentValue)})),t.forEachRemovedItem((function(t){t.previousValue&&e._toggleClass(t.key,!1)}))}},{key:"_applyIterableChanges",value:function(t){var e=this;t.forEachAddedItem((function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.xb)(t.item));e._toggleClass(t.item,!0)})),t.forEachRemovedItem((function(t){return e._toggleClass(t.item,!1)}))}},{key:"_applyClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!0)})):Object.keys(t).forEach((function(n){return e._toggleClass(n,!!t[n])})))}},{key:"_removeClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach((function(t){return e._toggleClass(t,!1)})):Object.keys(t).forEach((function(t){return e._toggleClass(t,!1)})))}},{key:"_toggleClass",value:function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach((function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)}))}}]),t}()).\u0275fac=function(t){return new(t||ot)(r.Ob(r.s),r.Ob(r.t),r.Ob(r.l),r.Ob(r.E))},ot.\u0275dir=r.Jb({type:ot,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),ot),ft=function(){function t(e,n,r,i){_classCallCheck(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return _createClass(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),dt=((st=function(){function t(e,n,r){_classCallCheck(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _createClass(t,[{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(t){Object(r.W)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=t}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(TI){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new ft(null,e._ngForOf,-1,-1),null===i?void 0:i),a=new pt(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new pt(t,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||st)(r.Ob(r.P),r.Ob(r.L),r.Ob(r.s))},st.\u0275dir=r.Jb({type:st,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),st),pt=function t(e,n){_classCallCheck(this,t),this.record=e,this.view=n},vt=((ut=function(){function t(e,n){_classCallCheck(this,t),this._viewContainer=e,this._context=new yt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(t,[{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){mt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){mt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}()).\u0275fac=function(t){return new(t||ut)(r.Ob(r.P),r.Ob(r.L))},ut.\u0275dir=r.Jb({type:ut,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),ut),yt=function t(){_classCallCheck(this,t),this.$implicit=null,this.ngIf=null};function mt(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(Object(r.xb)(e),"'."))}var gt,_t,bt,wt,kt=function(){function t(e,n){_classCallCheck(this,t),this._viewContainerRef=e,this._templateRef=n,this._created=!1}return _createClass(t,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}]),t}(),Ct=((wt=function(){function t(){_classCallCheck(this,t),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return _createClass(t,[{key:"ngSwitch",set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}},{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}},{key:"_matchCase",value:function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}},{key:"_updateDefaultCases",value:function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}]),t}()).\u0275fac=function(t){return new(t||wt)},wt.\u0275dir=r.Jb({type:wt,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),wt),St=((bt=function(){function t(e,n,r){_classCallCheck(this,t),this.ngSwitch=r,r._addCase(),this._view=new kt(e,n)}return _createClass(t,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),t}()).\u0275fac=function(t){return new(t||bt)(r.Ob(r.P),r.Ob(r.L),r.Ob(Ct,1))},bt.\u0275dir=r.Jb({type:bt,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),bt),Et=((_t=function(){function t(e){_classCallCheck(this,t),this.locale=e}return _createClass(t,[{key:"transform",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(null==e||""===e||e!=e)return null;try{return function(t,e,n,i){var o=function(t){if(it(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();var e,n=parseFloat(t);if(!isNaN(t-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){var r=_slicedToArray(t.split("-").map((function(t){return+t})),3),i=r[0],o=r[1],a=r[2];return new Date(i,o-1,a)}if(e=t.match(H))return function(t){var e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));var a=Number(t[4]||0)-n,s=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,a,s,u,c),e}(e)}var s=new Date(t);if(!it(s))throw new Error('Unable to convert "'.concat(t,'" into a date'));return s}(t);e=function t(e,n){var i=function(t){return Object(r.lb)(t)[r.bb.LocaleId]}(e);if(G[i]=G[i]||{},G[i][n])return G[i][n];var o="";switch(n){case"shortDate":o=F(e,N.Short);break;case"mediumDate":o=F(e,N.Medium);break;case"longDate":o=F(e,N.Long);break;case"fullDate":o=F(e,N.Full);break;case"shortTime":o=M(e,N.Short);break;case"mediumTime":o=M(e,N.Medium);break;case"longTime":o=M(e,N.Long);break;case"fullTime":o=M(e,N.Full);break;case"short":var a=t(e,"shortTime"),s=t(e,"shortDate");o=X(L(e,N.Short),[a,s]);break;case"medium":var u=t(e,"mediumTime"),c=t(e,"mediumDate");o=X(L(e,N.Medium),[u,c]);break;case"long":var l=t(e,"longTime"),h=t(e,"longDate");o=X(L(e,N.Long),[l,h]);break;case"full":var f=t(e,"fullTime"),d=t(e,"fullDate");o=X(L(e,N.Full),[f,d])}return o&&(G[i][n]=o),o}(n,e)||e;for(var a,s=[];e;){if(!(a=W.exec(e))){s.push(e);break}var u=(s=s.concat(a.slice(1))).pop();if(!u)break;e=u}var c=o.getTimezoneOffset();i&&(c=rt(i,c),o=function(t,e,n){var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(rt(e,r)-r))}(o,i));var l="";return s.forEach((function(t){var e=function(t){if(nt[t])return nt[t];var e;switch(t){case"G":case"GG":case"GGG":e=$(Y.Eras,R.Abbreviated);break;case"GGGG":e=$(Y.Eras,R.Wide);break;case"GGGGG":e=$(Y.Eras,R.Narrow);break;case"y":e=J(Q.FullYear,1,0,!1,!0);break;case"yy":e=J(Q.FullYear,2,0,!0,!0);break;case"yyy":e=J(Q.FullYear,3,0,!1,!0);break;case"yyyy":e=J(Q.FullYear,4,0,!1,!0);break;case"M":case"L":e=J(Q.Month,1,1);break;case"MM":case"LL":e=J(Q.Month,2,1);break;case"MMM":e=$(Y.Months,R.Abbreviated);break;case"MMMM":e=$(Y.Months,R.Wide);break;case"MMMMM":e=$(Y.Months,R.Narrow);break;case"LLL":e=$(Y.Months,R.Abbreviated,P.Standalone);break;case"LLLL":e=$(Y.Months,R.Wide,P.Standalone);break;case"LLLLL":e=$(Y.Months,R.Narrow,P.Standalone);break;case"w":e=et(1);break;case"ww":e=et(2);break;case"W":e=et(1,!0);break;case"d":e=J(Q.Date,1);break;case"dd":e=J(Q.Date,2);break;case"E":case"EE":case"EEE":e=$(Y.Days,R.Abbreviated);break;case"EEEE":e=$(Y.Days,R.Wide);break;case"EEEEE":e=$(Y.Days,R.Narrow);break;case"EEEEEE":e=$(Y.Days,R.Short);break;case"a":case"aa":case"aaa":e=$(Y.DayPeriods,R.Abbreviated);break;case"aaaa":e=$(Y.DayPeriods,R.Wide);break;case"aaaaa":e=$(Y.DayPeriods,R.Narrow);break;case"b":case"bb":case"bbb":e=$(Y.DayPeriods,R.Abbreviated,P.Standalone,!0);break;case"bbbb":e=$(Y.DayPeriods,R.Wide,P.Standalone,!0);break;case"bbbbb":e=$(Y.DayPeriods,R.Narrow,P.Standalone,!0);break;case"B":case"BB":case"BBB":e=$(Y.DayPeriods,R.Abbreviated,P.Format,!0);break;case"BBBB":e=$(Y.DayPeriods,R.Wide,P.Format,!0);break;case"BBBBB":e=$(Y.DayPeriods,R.Narrow,P.Format,!0);break;case"h":e=J(Q.Hours,1,-12);break;case"hh":e=J(Q.Hours,2,-12);break;case"H":e=J(Q.Hours,1);break;case"HH":e=J(Q.Hours,2);break;case"m":e=J(Q.Minutes,1);break;case"mm":e=J(Q.Minutes,2);break;case"s":e=J(Q.Seconds,1);break;case"ss":e=J(Q.Seconds,2);break;case"S":e=J(Q.FractionalSeconds,1);break;case"SS":e=J(Q.FractionalSeconds,2);break;case"SSS":e=J(Q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=tt(K.Short);break;case"ZZZZZ":e=tt(K.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=tt(K.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=tt(K.Long);break;default:return null}return nt[t]=e,e}(t);l+=e?e(o,n,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),l}(e,n,o||this.locale,i)}catch(a){throw function(t,e){return Error("InvalidPipeArgument: '".concat(e,"' for pipe '").concat(Object(r.xb)(t),"'"))}(t,a.message)}}}]),t}()).\u0275fac=function(t){return new(t||_t)(r.Ob(r.u))},_t.\u0275pipe=r.Nb({name:"date",type:_t,pure:!0}),_t),Tt=((gt=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:gt}),gt.\u0275inj=r.Lb({factory:function(t){return new(t||gt)},providers:[{provide:ct,useClass:lt}]}),gt);function Ot(t){return"server"===t}var xt,It,At,Dt,Pt,Rt=((xt=function t(){_classCallCheck(this,t)}).\u0275prov=Object(r.Kb)({token:xt,providedIn:"root",factory:function(){return new Nt(Object(r.Xb)(u),window,Object(r.Xb)(r.m))}}),xt),Nt=function(){function t(e,n,r){_classCallCheck(this,t),this.document=e,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='".concat(t,"']"));if(n)return void this.scrollToElement(n)}catch(zA){this.errorHandler.handleError(zA)}}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(TI){return!1}}}]),t}(),jt=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getProperty",value:function(t,e){return t[e]}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"getValue",value:function(t){return t.value}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=Ft||(Ft=document.querySelector("base"))?Ft.getAttribute("href"):null;return null==n?null:(e=n,It||(It=document.createElement("a")),It.setAttribute("href",e),"/"===It.pathname.charAt(0)?It.pathname:"/"+It.pathname)}},{key:"resetBaseElement",value:function(){Ft=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return function(t,e){e=encodeURIComponent(e);var n,r=_createForOfIteratorHelper(t.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.indexOf("="),a=_slicedToArray(-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],2),s=a[0],u=a[1];if(s.trim()===e)return decodeURIComponent(u)}}catch(c){r.e(c)}finally{r.f()}return null}(document.cookie,t)}}],[{key:"makeCurrent",value:function(){var t;t=new n,o||(o=t)}}]),n}(function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.call(this)}return _createClass(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function t(){_classCallCheck(this,t)}}())),Ft=null,Mt=new r.q("TRANSITION_ID"),Lt=[{provide:r.d,useFactory:function(t,e,n){return function(){n.get(r.e).donePromise.then((function(){var n=a();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter((function(e){return e.getAttribute("ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}},deps:[Mt,u,r.r],multi:!0}],Vt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){r.qb.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.qb.getAllAngularTestabilities=function(){return t.getAllTestabilities()},r.qb.getAllAngularRootElements=function(){return t.getAllRootElements()},r.qb.frameworkStabilizers||(r.qb.frameworkStabilizers=[]),r.qb.frameworkStabilizers.push((function(t){var e=r.qb.getAllAngularTestabilities(),n=e.length,i=!1,o=function(e){i=i||e,0==--n&&t(i)};e.forEach((function(t){t.whenStable(o)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?a().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){Object(r.Y)(new t)}}]),t}(),Ut=new r.q("EventManagerPlugins"),qt=((At=function(){function t(e,n){var r=this;_classCallCheck(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=r})),this._plugins=e.slice().reverse()}return _createClass(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)}}]),t}()).\u0275fac=function(t){return new(t||At)(r.Xb(Ut),r.Xb(r.z))},At.\u0275prov=r.Kb({token:At,factory:At.\u0275fac}),At),Bt=function(){function t(e){_classCallCheck(this,t),this._doc=e}return _createClass(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=a().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),zt=((Pt=function(){function t(){_classCallCheck(this,t),this._stylesSet=new Set}return _createClass(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}()).\u0275fac=function(t){return new(t||Pt)},Pt.\u0275prov=r.Kb({token:Pt,factory:Pt.\u0275fac}),Pt),Ht=((Dt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(t.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return a().remove(t)}))}}]),n}(zt)).\u0275fac=function(t){return new(t||Dt)(r.Xb(u))},Dt.\u0275prov=r.Kb({token:Dt,factory:Dt.\u0275fac}),Dt),Gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Wt=/%COMP%/g;function Kt(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Kt(t,i,n):(i=i.replace(Wt,t),n.push(i))}return n}function Qt(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Yt,Xt,Zt,Jt,$t=((Yt=function(){function t(e,n,r){_classCallCheck(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new te(e)}return _createClass(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new ee(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case r.Q.Native:case r.Q.ShadowDom:return new ne(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=Kt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Yt)(r.Xb(qt),r.Xb(Ht),r.Xb(r.c))},Yt.\u0275prov=r.Kb({token:Yt,factory:Yt.\u0275fac}),Yt),te=function(){function t(e){_classCallCheck(this,t),this.eventManager=e,this.data=Object.create(null)}return _createClass(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(Gt[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=Gt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=Gt[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,i){i&r.G.DashCase?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Qt(n)):this.eventManager.addEventListener(t,e,Qt(n))}}]),t}(),ee=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;_classCallCheck(this,n),(a=e.call(this,t)).component=i;var s,u=Kt(o+"-"+i.id,i.styles,[]);return r.addStyles(u),a.contentAttr="_ngcontent-%COMP%".replace(Wt,o+"-"+i.id),a.hostAttr=(s=o+"-"+i.id,"_nghost-%COMP%".replace(Wt,s)),a}return _createClass(n,[{key:"applyToHost",value:function(t){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,t,e);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(te),ne=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a){var s;_classCallCheck(this,n),(s=e.call(this,t)).sharedStylesHost=i,s.hostEl=o,s.component=a,s.shadowRoot=a.encapsulation===r.Q.ShadowDom?o.attachShadow({mode:"open"}):o.createShadowRoot(),s.sharedStylesHost.addHost(s.shadowRoot);for(var u=Kt(a.id,a.styles,[]),c=0;c<u.length;c++){var l=document.createElement("style");l.textContent=u[c],s.shadowRoot.appendChild(l)}return s}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(te),re=((Xt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(Bt)).\u0275fac=function(t){return new(t||Xt)(r.Xb(u))},Xt.\u0275prov=r.Kb({token:Xt,factory:Xt.\u0275fac}),Xt),ie=["alt","control","meta","shift"],oe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ae={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},se={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},ue=((Zt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return a().onAndCancel(t,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(ie.forEach((function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")})),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ae.hasOwnProperty(e)&&(e=ae[e]))}return oe[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ie.forEach((function(r){r!=n&&(0,se[r])(t)&&(e+=r+".")})),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded((function(){return e(i)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(Bt)).\u0275fac=function(t){return new(t||Zt)(r.Xb(u))},Zt.\u0275prov=r.Kb({token:Zt,factory:Zt.\u0275fac}),Zt),ce=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){jt.makeCurrent(),Vt.init()},multi:!0},{provide:u,useFactory:function(){return Object(r.wb)(document),document},deps:[]}],le=Object(r.S)(r.X,"browser",ce),he=[[],{provide:r.ab,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Ut,useClass:re,multi:!0,deps:[u,r.z,r.B]},{provide:Ut,useClass:ue,multi:!0,deps:[u]},[],{provide:$t,useClass:$t,deps:[qt,Ht,r.c]},{provide:r.F,useExisting:$t},{provide:zt,useExisting:Ht},{provide:Ht,useClass:Ht,deps:[u]},{provide:r.M,useClass:r.M,deps:[r.z]},{provide:qt,useClass:qt,deps:[Ut,r.z]},[]],fe=((Jt=function(){function t(e){if(_classCallCheck(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Mt,useExisting:r.c},Lt]}}}]),t}()).\u0275mod=r.Mb({type:Jt}),Jt.\u0275inj=r.Lb({factory:function(t){return new(t||Jt)(r.Xb(Jt,12))},providers:he,imports:[Tt,r.f]}),Jt);function de(t){return null!=t&&""+t!="false"}function pe(t){return Array.isArray(t)?t:[t]}function ve(t){return null==t?"":"string"==typeof t?t:t+"px"}function ye(t){return t instanceof r.l?t.nativeElement:t}"undefined"!=typeof window&&window;var me=n("XNiG"),ge=n("LRne"),_e=n("HDdC"),be=n("DH7j"),we=n("n6bG"),ke=n("lJxs");function Ce(t,e,n,r){return Object(we.a)(n)&&(r=n,n=void 0),r?Ce(t,e,n).pipe(Object(ke.a)((function(t){return Object(be.a)(t)?r.apply(void 0,_toConsumableArray(t)):r(t)}))):new _e.a((function(r){!function t(e,n,r,i,o){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),a=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),a=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,h=e.length;l<h;l++)t(e[l],n,r,i,o)}i.add(a)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)}))}var Se=n("VRyK");n("3N8a"),n("IjjT"),n("7Hc7");var Ee=n("quSY"),Te=n("7o/Q");function Oe(t,e){return function(n){return n.lift(new xe(t,e))}}var xe=function(){function t(e,n){_classCallCheck(this,t),this.compare=e,this.keySelector=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Ie(t,this.compare,this.keySelector))}}]),t}(),Ie=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return _createClass(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(Te.a),Ae=n("D0XW"),De=n("l7GE"),Pe=n("ZUHj"),Re=function(){function t(e){_classCallCheck(this,t),this.durationSelector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Ne(t,this.durationSelector))}}]),t}(),Ne=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).durationSelector=r,i.hasValue=!1,i}return _createClass(n,[{key:"_next",value:function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e;try{e=(0,this.durationSelector)(t)}catch(r){return this.destination.error(r)}var n=Object(Pe.a)(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}},{key:"notifyNext",value:function(t,e,n,r){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(De.a),je=n("Y7HM"),Fe=n("z+Ro");function Me(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function Le(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.a;return e=function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return Object(je.a)(e)?r=Number(e)<1?1:Number(e):Object(Fe.a)(e)&&(n=e),Object(Fe.a)(n)||(n=Ae.a),new _e.a((function(e){var i=Object(je.a)(t)?t:+t-n.now();return n.schedule(Me,i,{index:0,period:r,subscriber:e})}))}(t,n)},function(t){return t.lift(new Re(e))}}function Ve(t,e){return function(n){return n.lift(new Ue(t,e))}}var Ue=function(){function t(e,n){_classCallCheck(this,t),this.predicate=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new qe(t,this.predicate,this.thisArg))}}]),t}(),qe=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return _createClass(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(Te.a);function Be(t){return function(e){return e.lift(new ze(t))}}var ze=function(){function t(e){_classCallCheck(this,t),this.notifier=e}return _createClass(t,[{key:"call",value:function(t,e){var n=new He(t),r=Object(Pe.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}]),t}(),He=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t)).seenValue=!1,r}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(De.a),Ge=n("bHdf");function We(){return Object(Ge.a)(1)}function Ke(){return We()(Object(ge.a).apply(void 0,arguments))}function Qe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return Object(Fe.a)(r)?(e.pop(),function(t){return Ke(e,t,r)}):function(t){return Ke(e,t)}}function Ye(){return function(t){return t.lift(new Xe)}}var Xe=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Ze(t))}}]),t}(),Ze=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this,t)).hasPrev=!1,r}return _createClass(n,[{key:"_next",value:function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}]),n}(Te.a),Je=n("51Dv"),$e=n("Cfvw");function tn(t,e){return"function"==typeof e?function(n){return n.pipe(tn((function(n,r){return Object($e.a)(t(n,r)).pipe(Object(ke.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new nn(t))}}var en,nn=function(){function t(e){_classCallCheck(this,t),this.project=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new rn(t,this.project))}}]),t}(),rn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new Je.a(this,e,n),o=this.destination;o.add(i),this.innerSubscription=Object(Pe.a)(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||_get(_getPrototypeOf(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}}]),n}(De.a),on=n("qgXg"),an=n("pxpQ"),sn=n("9ppp"),un=n("Ylt2"),cn=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(t=e.call(this)).scheduler=o,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=r<1?1:r,t._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return _createClass(n,[{key:"nextInfiniteTimeWindow",value:function(t){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this._events.push(new ln(this._getNow(),t)),this._trimBufferThenGetEvents(),_get(_getPrototypeOf(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new sn.a;if(this.isStopped||this.hasError?e=Ee.a.EMPTY:(this.observers.push(t),e=new un.a(this,t)),i&&t.add(t=new an.a(t,i)),n)for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(var s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||on.a).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}]),n}(me.a),ln=function t(e,n){_classCallCheck(this,t),this.time=e,this.value=n};function hn(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,s=t.refCount,u=t.scheduler,c=0,l=!1,h=!1;return function(t){c++,e&&!l||(l=!1,e=new cn(i,a,u),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}}));var r=e.subscribe(this);this.add((function(){c--,r.unsubscribe(),n&&!h&&s&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)}))}}(r))}}try{en="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(TI){en=!1}var fn,dn,pn,vn,yn,mn=((pn=function t(e){_classCallCheck(this,t),this._platformId=e,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!en)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).\u0275fac=function(t){return new(t||pn)(r.Xb(r.B,8))},pn.\u0275prov=Object(r.Kb)({factory:function(){return new pn(Object(r.Xb)(r.B,8))},token:pn,providedIn:"root"}),pn),gn=((dn=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:dn}),dn.\u0275inj=r.Lb({factory:function(t){return new(t||dn)}}),dn),_n=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function bn(){if(fn)return fn;if("object"!=typeof document||!document)return fn=new Set(_n);var t=document.createElement("input");return fn=new Set(_n.filter((function(e){return t.setAttribute("type",e),t.type===e})))}function wn(t){return function(){if(null==vn&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return vn=!0}}))}finally{vn=vn||!1}return vn}()?t:!!t.capture}var kn,Cn,Sn,En,Tn,On,xn=new r.q("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(r.V)(u)}}),In=((On=function(){function t(e){if(_classCallCheck(this,t),this.value="ltr",this.change=new r.n,e){var n=e.documentElement?e.documentElement.dir:null,i=(e.body?e.body.dir:null)||n;this.value="ltr"===i||"rtl"===i?i:"ltr"}}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),t}()).\u0275fac=function(t){return new(t||On)(r.Xb(xn,8))},On.\u0275prov=Object(r.Kb)({factory:function(){return new On(Object(r.Xb)(xn,8))},token:On,providedIn:"root"}),On),An=((Tn=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Tn}),Tn.\u0275inj=r.Lb({factory:function(t){return new(t||Tn)}}),Tn),Dn=((En=function(){function t(e,n,r){_classCallCheck(this,t),this._ngZone=e,this._platform=n,this._scrolled=new me.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}return _createClass(t,[{key:"register",value:function(t){var e=this;this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe((function(){return e._scrolled.next(t)})))}},{key:"deregister",value:function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}},{key:"scrolled",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new _e.a((function(n){t._globalSubscription||t._addGlobalListener();var r=e>0?t._scrolled.pipe(Le(e)).subscribe(n):t._scrolled.subscribe(n);return t._scrolledCount++,function(){r.unsubscribe(),t._scrolledCount--,t._scrolledCount||t._removeGlobalListener()}})):Object(ge.a)()}},{key:"ngOnDestroy",value:function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach((function(e,n){return t.deregister(n)})),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(t,e){var n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Ve((function(t){return!t||n.indexOf(t)>-1})))}},{key:"getAncestorScrollContainers",value:function(t){var e=this,n=[];return this.scrollContainers.forEach((function(r,i){e._scrollableContainsElement(i,t)&&n.push(i)})),n}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_scrollableContainsElement",value:function(t,e){var n=e.nativeElement,r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular((function(){return Ce(t._getWindow().document,"scroll").subscribe((function(){return t._scrolled.next()}))}))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),t}()).\u0275fac=function(t){return new(t||En)(r.Xb(r.z),r.Xb(mn),r.Xb(u,8))},En.\u0275prov=Object(r.Kb)({factory:function(){return new En(Object(r.Xb)(r.z),Object(r.Xb)(mn),Object(r.Xb)(u,8))},token:En,providedIn:"root"}),En),Pn=((Sn=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this._platform=e,this._document=r,n.runOutsideAngular((function(){var t=i._getWindow();i._change=e.isBrowser?Object(Se.a)(Ce(t,"resize"),Ce(t,"orientationchange")):Object(ge.a)(),i._invalidateCache=i.change().subscribe((function(){return i._updateViewportSize()}))}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._invalidateCache.unsubscribe()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}},{key:"getViewportRect",value:function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),n=e.width,r=e.height;return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var t=this._getDocument(),e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return t>0?this._change.pipe(Le(t)):this._change}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_updateViewportSize",value:function(){var t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}]),t}()).\u0275fac=function(t){return new(t||Sn)(r.Xb(mn),r.Xb(r.z),r.Xb(u,8))},Sn.\u0275prov=Object(r.Kb)({factory:function(){return new Sn(Object(r.Xb)(mn),Object(r.Xb)(r.z),Object(r.Xb)(u,8))},token:Sn,providedIn:"root"}),Sn),Rn=((Cn=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Cn}),Cn.\u0275inj=r.Lb({factory:function(t){return new(t||Cn)}}),Cn),Nn=((kn=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:kn}),kn.\u0275inj=r.Lb({factory:function(t){return new(t||kn)},imports:[[An,gn,Rn],An,Rn]}),kn);function jn(){throw Error("Host already has a portal attached")}var Fn,Mn,Ln=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"attach",value:function(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&jn(),this._attachedHost=t,t.attach(this)}},{key:"detach",value:function(){var t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}},{key:"isAttached",get:function(){return null!=this._attachedHost}},{key:"setAttachedHost",value:function(t){this._attachedHost=t}}]),t}(),Vn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this)).component=t,a.viewContainerRef=r,a.injector=i,a.componentFactoryResolver=o,a}return n}(Ln),Un=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this)).templateRef=t,o.viewContainerRef=r,o.context=i,o}return _createClass(n,[{key:"origin",get:function(){return this.templateRef.elementRef}},{key:"attach",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=e,_get(_getPrototypeOf(n.prototype),"attach",this).call(this,t)}},{key:"detach",value:function(){return this.context=void 0,_get(_getPrototypeOf(n.prototype),"detach",this).call(this)}}]),n}(Ln),qn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i;return _classCallCheck(this,n),(i=e.call(this)).element=t instanceof r.l?t.nativeElement:t,i}return n}(Ln),Bn=function(){function t(){_classCallCheck(this,t),this._isDisposed=!1,this.attachDomPortal=null}return _createClass(t,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&jn(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof Vn?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Un?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof qn?(this._attachedPortal=t,this.attachDomPortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(t){this._disposeFn=t}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),t}(),zn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a){var s,u;return _classCallCheck(this,n),(u=e.call(this)).outletElement=t,u._componentFactoryResolver=r,u._appRef=i,u._defaultInjector=o,u.attachDomPortal=function(t){if(!u._document)throw Error("Cannot attach DOM portal without _document constructor parameter");var e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");var r=u._document.createComment("dom-portal");e.parentNode.insertBefore(r,e),u.outletElement.appendChild(e),_get((s=_assertThisInitialized(u),_getPrototypeOf(n.prototype)),"setDisposeFn",s).call(s,(function(){r.parentNode&&r.parentNode.replaceChild(e,r)}))},u._document=a,u}return _createClass(n,[{key:"attachComponentPortal",value:function(t){var e,n=this,r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);return t.viewContainerRef?(e=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn((function(){return e.destroy()}))):(e=r.create(t.injector||this._defaultInjector),this._appRef.attachView(e.hostView),this.setDisposeFn((function(){n._appRef.detachView(e.hostView),e.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(e)),e}},{key:"attachTemplatePortal",value:function(t){var e=this,n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context);return r.detectChanges(),r.rootNodes.forEach((function(t){return e.outletElement.appendChild(t)})),this.setDisposeFn((function(){var t=n.indexOf(r);-1!==t&&n.remove(t)})),r}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(t){return t.hostView.rootNodes[0]}}]),n}(Bn),Hn=((Mn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o){var a,s;return _classCallCheck(this,n),(s=e.call(this))._componentFactoryResolver=t,s._viewContainerRef=i,s._isInitialized=!1,s.attached=new r.n,s.attachDomPortal=function(t){if(!s._document)throw Error("Cannot attach DOM portal without _document constructor parameter");var e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");var r=s._document.createComment("dom-portal");t.setAttachedHost(_assertThisInitialized(s)),e.parentNode.insertBefore(r,e),s._getRootNode().appendChild(e),_get((a=_assertThisInitialized(s),_getPrototypeOf(n.prototype)),"setDisposeFn",a).call(a,(function(){r.parentNode&&r.parentNode.replaceChild(e,r)}))},s._document=o,s}return _createClass(n,[{key:"portal",get:function(){return this._attachedPortal},set:function(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&_get(_getPrototypeOf(n.prototype),"detach",this).call(this),t&&_get(_getPrototypeOf(n.prototype),"attach",this).call(this,t),this._attachedPortal=t)}},{key:"attachedRef",get:function(){return this._attachedRef}},{key:"ngOnInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this._attachedPortal=null,this._attachedRef=null}},{key:"attachComponentPortal",value:function(t){t.setAttachedHost(this);var e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),i=e.createComponent(r,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),_get(_getPrototypeOf(n.prototype),"setDisposeFn",this).call(this,(function(){return i.destroy()})),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}},{key:"attachTemplatePortal",value:function(t){var e=this;t.setAttachedHost(this);var r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return _get(_getPrototypeOf(n.prototype),"setDisposeFn",this).call(this,(function(){return e._viewContainerRef.clear()})),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}},{key:"_getRootNode",value:function(){var t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}]),n}(Bn)).\u0275fac=function(t){return new(t||Mn)(r.Ob(r.j),r.Ob(r.P),r.Ob(u))},Mn.\u0275dir=r.Jb({type:Mn,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[r.zb]}),Mn),Gn=((Fn=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Fn}),Fn.\u0275inj=r.Lb({factory:function(t){return new(t||Fn)}}),Fn),Wn=function(){function t(e,n){_classCallCheck(this,t),this._parentInjector=e,this._customTokens=n}return _createClass(t,[{key:"get",value:function(t,e){var n=this._customTokens.get(t);return void 0!==n?n:this._parentInjector.get(t,e)}}]),t}(),Kn=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Qn=n("EY2u");function Yn(t){return function(e){return 0===t?Object(Qn.b)():e.lift(new Xn(t))}}var Xn=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new Kn}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Zn(t,this.total))}}]),t}(),Zn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(Te.a),Jn=function(){function t(e,n){_classCallCheck(this,t),this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return _createClass(t,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ve(-this._previousScrollPosition.left),t.style.top=ve(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=r,n.scrollBehavior=i}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}]),t}();function $n(){return Error("Scroll strategy has already been attached.")}var tr=function(){function t(e,n,r,i){var o=this;_classCallCheck(this,t),this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=function(){o.disable(),o._overlayRef.hasAttached()&&o._ngZone.run((function(){return o._overlayRef.detach()}))}}return _createClass(t,[{key:"attach",value:function(t){if(this._overlayRef)throw $n();this._overlayRef=t}},{key:"enable",value:function(){var t=this;if(!this._scrollSubscription){var e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe((function(){var e=t._viewportRuler.getViewportScrollPosition().top;Math.abs(e-t._initialScrollPosition)>t._config.threshold?t._detach():t._overlayRef.updatePosition()}))):this._scrollSubscription=e.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),t}(),er=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),t}();function nr(t,e){return e.some((function(e){return t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right}))}function rr(t,e){return e.some((function(e){return t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right}))}var ir,or=function(){function t(e,n,r,i){_classCallCheck(this,t),this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}return _createClass(t,[{key:"attach",value:function(t){if(this._overlayRef)throw $n();this._overlayRef=t}},{key:"enable",value:function(){var t=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe((function(){if(t._overlayRef.updatePosition(),t._config&&t._config.autoClose){var e=t._overlayRef.overlayElement.getBoundingClientRect(),n=t._viewportRuler.getViewportSize(),r=n.width,i=n.height;nr(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(t.disable(),t._ngZone.run((function(){return t._overlayRef.detach()})))}})))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),t}(),ar=((ir=function t(e,n,r,i){var o=this;_classCallCheck(this,t),this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=function(){return new er},this.close=function(t){return new tr(o._scrollDispatcher,o._ngZone,o._viewportRuler,t)},this.block=function(){return new Jn(o._viewportRuler,o._document)},this.reposition=function(t){return new or(o._scrollDispatcher,o._viewportRuler,o._ngZone,t)},this._document=i}).\u0275fac=function(t){return new(t||ir)(r.Xb(Dn),r.Xb(Pn),r.Xb(r.z),r.Xb(u))},ir.\u0275prov=Object(r.Kb)({factory:function(){return new ir(Object(r.Xb)(Dn),Object(r.Xb)(Pn),Object(r.Xb)(r.z),Object(r.Xb)(u))},token:ir,providedIn:"root"}),ir),sr=function t(e){if(_classCallCheck(this,t),this.scrollStrategy=new er,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];void 0!==e[i]&&(this[i]=e[i])}},ur=function t(e,n,r,i,o){_classCallCheck(this,t),this.offsetX=r,this.offsetY=i,this.panelClass=o,this.originX=e.originX,this.originY=e.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},cr=function t(e,n){_classCallCheck(this,t),this.connectionPair=e,this.scrollableViewProperties=n};function lr(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error("ConnectedPosition: Invalid ".concat(t,' "').concat(e,'". Expected "top", "bottom" or "center".'))}function hr(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error("ConnectedPosition: Invalid ".concat(t,' "').concat(e,'". Expected "start", "end" or "center".'))}var fr,dr,pr=((fr=function(){function t(e){var n=this;_classCallCheck(this,t),this._attachedOverlays=[],this._keydownListener=function(t){for(var e=n._attachedOverlays,r=e.length-1;r>-1;r--)if(e[r]._keydownEvents.observers.length>0){e[r]._keydownEvents.next(t);break}},this._document=e}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._detach()}},{key:"add",value:function(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(t)}},{key:"remove",value:function(t){var e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()}},{key:"_detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),t}()).\u0275fac=function(t){return new(t||fr)(r.Xb(u))},fr.\u0275prov=Object(r.Kb)({factory:function(){return new fr(Object(r.Xb)(u))},token:fr,providedIn:"root"}),fr),vr=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine),yr=((dr=function(){function t(e,n){_classCallCheck(this,t),this._platform=n,this._document=e}return _createClass(t,[{key:"ngOnDestroy",value:function(){var t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var t=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(t||vr)for(var e=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]'),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);var r=this._document.createElement("div");r.classList.add("cdk-overlay-container"),vr?r.setAttribute("platform","test"):t||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}]),t}()).\u0275fac=function(t){return new(t||dr)(r.Xb(u),r.Xb(mn))},dr.\u0275prov=Object(r.Kb)({factory:function(){return new dr(Object(r.Xb)(u),Object(r.Xb)(mn))},token:dr,providedIn:"root"}),dr),mr=function(){function t(e,n,r,i,o,a,s,u){var c=this;_classCallCheck(this,t),this._portalOutlet=e,this._host=n,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=u,this._backdropElement=null,this._backdropClick=new me.a,this._attachments=new me.a,this._detachments=new me.a,this._locationChanges=Ee.a.EMPTY,this._backdropClickHandler=function(t){return c._backdropClick.next(t)},this._keydownEvents=new me.a,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}return _createClass(t,[{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}},{key:"attach",value:function(t){var e=this,n=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Yn(1)).subscribe((function(){e.hasAttached()&&e.updatePosition()})),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe((function(){return e.dispose()}))),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}}},{key:"dispose",value:function(){var t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick.asObservable()}},{key:"attachments",value:function(){return this._attachments.asObservable()}},{key:"detachments",value:function(){return this._detachments.asObservable()}},{key:"keydownEvents",value:function(){return this._keydownEvents.asObservable()}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}},{key:"setDirection",value:function(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}},{key:"addPanelClass",value:function(t){this._pane&&this._toggleClasses(this._pane,t,!0)}},{key:"removePanelClass",value:function(t){this._pane&&this._toggleClasses(this._pane,t,!1)}},{key:"getDirection",value:function(){var t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}},{key:"updateScrollStrategy",value:function(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var t=this._pane.style;t.width=ve(this._config.width),t.height=ve(this._config.height),t.minWidth=ve(this._config.minWidth),t.minHeight=ve(this._config.minHeight),t.maxWidth=ve(this._config.maxWidth),t.maxHeight=ve(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(t){this._pane.style.pointerEvents=t?"auto":"none"}},{key:"_attachBackdrop",value:function(){var t=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){t._backdropElement&&t._backdropElement.classList.add("cdk-overlay-backdrop-showing")}))})):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var t,e=this,n=this._backdropElement;if(n){var r=function r(){n&&(n.removeEventListener("click",e._backdropClickHandler),n.removeEventListener("transitionend",r),n.parentNode&&n.parentNode.removeChild(n)),e._backdropElement==n&&(e._backdropElement=null),e._config.backdropClass&&e._toggleClasses(n,e._config.backdropClass,!1),clearTimeout(t)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular((function(){n.addEventListener("transitionend",r)})),n.style.pointerEvents="none",t=this._ngZone.runOutsideAngular((function(){return setTimeout(r,500)}))}}},{key:"_toggleClasses",value:function(t,e,n){var r=t.classList;pe(e).forEach((function(t){t&&(n?r.add(t):r.remove(t))}))}},{key:"_detachContentWhenStable",value:function(){var t=this;this._ngZone.runOutsideAngular((function(){var e=t._ngZone.onStable.asObservable().pipe(Be(Object(Se.a)(t._attachments,t._detachments))).subscribe((function(){t._pane&&t._host&&0!==t._pane.children.length||(t._pane&&t._config.panelClass&&t._toggleClasses(t._pane,t._config.panelClass,!1),t._host&&t._host.parentElement&&(t._previousHostParent=t._host.parentElement,t._previousHostParent.removeChild(t._host)),e.unsubscribe())}))}))}},{key:"_disposeScrollStrategy",value:function(){var t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}]),t}(),gr=/([A-Za-z%]+)$/,_r=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new me.a,this._resizeSubscription=Ee.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(e)}return _createClass(t,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(t){var e=this;if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe((function(){e._isInitialRender=!0,e.apply()}))}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var t,e,n=this._originRect,r=this._overlayRect,i=this._viewportRect,o=[],a=_createForOfIteratorHelper(this._preferredPositions);try{for(a.s();!(e=a.n()).done;){var s=e.value,u=this._getOriginPoint(n,s),c=this._getOverlayPoint(u,r,s),l=this._getOverlayFit(c,r,i,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,u);this._canFitWithFlexibleDimensions(l,c,i)?o.push({position:s,origin:u,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(u,s)}):(!t||t.overlayFit.visibleArea<l.visibleArea)&&(t={overlayFit:l,overlayPoint:c,originPoint:u,position:s,overlayRect:r})}}catch(m){a.e(m)}finally{a.f()}if(o.length){var h,f=null,d=-1,p=_createForOfIteratorHelper(o);try{for(p.s();!(h=p.n()).done;){var v=h.value,y=v.boundingBoxRect.width*v.boundingBoxRect.height*(v.position.weight||1);y>d&&(d=y,f=v)}}catch(m){p.e(m)}finally{p.f()}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(t.position,t.originPoint);this._applyPosition(t.position,t.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&br(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}},{key:"withScrollableContainers",value:function(t){return this._scrollables=t,this}},{key:"withPositions",value:function(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(t){return this._viewportMargin=t,this}},{key:"withFlexibleDimensions",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=t,this}},{key:"withGrowAfterOpen",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=t,this}},{key:"withPush",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=t,this}},{key:"withLockedPosition",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=t,this}},{key:"setOrigin",value:function(t){return this._origin=t,this}},{key:"withDefaultOffsetX",value:function(t){return this._offsetX=t,this}},{key:"withDefaultOffsetY",value:function(t){return this._offsetY=t,this}},{key:"withTransformOriginOn",value:function(t){return this._transformOriginSelector=t,this}},{key:"_getOriginPoint",value:function(t,e){var n;if("center"==e.originX)n=t.left+t.width/2;else{var r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return{x:n,y:"center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}}},{key:"_getOverlayPoint",value:function(t,e,n){var r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}},{key:"_getOverlayFit",value:function(t,e,n,r){var i=t.x,o=t.y,a=this._getOffset(r,"x"),s=this._getOffset(r,"y");a&&(i+=a),s&&(o+=s);var u=0-o,c=o+e.height-n.height,l=this._subtractOverflows(e.width,0-i,i+e.width-n.width),h=this._subtractOverflows(e.height,u,c),f=l*h;return{visibleArea:f,isCompletelyWithinViewport:e.width*e.height===f,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:l==e.width}}},{key:"_canFitWithFlexibleDimensions",value:function(t,e,n){if(this._hasFlexibleDimensions){var r=n.bottom-e.y,i=n.right-e.x,o=wr(this._overlayRef.getConfig().minHeight),a=wr(this._overlayRef.getConfig().minWidth),s=t.fitsInViewportHorizontally||null!=a&&a<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&s}return!1}},{key:"_pushOverlayOnScreen",value:function(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};var r,i,o=this._viewportRect,a=Math.max(t.x+e.width-o.right,0),s=Math.max(t.y+e.height-o.bottom,0),u=Math.max(o.top-n.top-t.y,0),c=Math.max(o.left-n.left-t.x,0);return r=e.width<=o.width?c||-a:t.x<this._viewportMargin?o.left-n.left-t.x:0,i=e.height<=o.height?u||-s:t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:r,y:i},{x:t.x+r,y:t.y+i}}},{key:"_applyPosition",value:function(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){var n=this._getScrollVisibility(),r=new cr(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(t){if(this._transformOriginSelector){var e,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=t.overlayY;e="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(var i=0;i<n.length;i++)n[i].style.transformOrigin="".concat(e," ").concat(r)}}},{key:"_calculateBoundingBoxRect",value:function(t,e){var n,r,i,o,a,s,u=this._viewportRect,c=this._isRtl();if("top"===e.overlayY)r=t.y,n=u.height-r+this._viewportMargin;else if("bottom"===e.overlayY)i=u.height-t.y+2*this._viewportMargin,n=u.height-i+this._viewportMargin;else{var l=Math.min(u.bottom-t.y+u.top,t.y),h=this._lastBoundingBoxSize.height;n=2*l,r=t.y-l,n>h&&!this._isInitialRender&&!this._growAfterOpen&&(r=t.y-h/2)}if("end"===e.overlayX&&!c||"start"===e.overlayX&&c)s=u.width-t.x+this._viewportMargin,o=t.x-this._viewportMargin;else if("start"===e.overlayX&&!c||"end"===e.overlayX&&c)a=t.x,o=u.right-t.x;else{var f=Math.min(u.right-t.x+u.left,t.x),d=this._lastBoundingBoxSize.width;o=2*f,a=t.x-f,o>d&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.x-d/2)}return{top:r,left:a,bottom:i,right:s,width:o,height:n}}},{key:"_setBoundingBoxStyles",value:function(t,e){var n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{var i=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ve(n.height),r.top=ve(n.top),r.bottom=ve(n.bottom),r.width=ve(n.width),r.left=ve(n.left),r.right=ve(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",i&&(r.maxHeight=ve(i)),o&&(r.maxWidth=ve(o))}this._lastBoundingBoxSize=n,br(this._boundingBox.style,r)}},{key:"_resetBoundingBoxStyles",value:function(){br(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){br(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(t,e){var n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){var a=this._viewportRuler.getViewportScrollPosition();br(n,this._getExactOverlayY(e,t,a)),br(n,this._getExactOverlayX(e,t,a))}else n.position="static";var s="",u=this._getOffset(e,"x"),c=this._getOffset(e,"y");u&&(s+="translateX(".concat(u,"px) ")),c&&(s+="translateY(".concat(c,"px)")),n.transform=s.trim(),o.maxHeight&&(r?n.maxHeight=ve(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=ve(o.maxWidth):i&&(n.maxWidth="")),br(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(t,e,n){var r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));var o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=ve(i.y),r}},{key:"_getExactOverlayX",value:function(t,e,n){var r={left:"",right:""},i=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),"right"===(this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left")?r.right=this._document.documentElement.clientWidth-(i.x+this._overlayRect.width)+"px":r.left=ve(i.x),r}},{key:"_getScrollVisibility",value:function(){var t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map((function(t){return t.getElementRef().nativeElement.getBoundingClientRect()}));return{isOriginClipped:rr(t,n),isOriginOutsideView:nr(t,n),isOverlayClipped:rr(e,n),isOverlayOutsideView:nr(e,n)}}},{key:"_subtractOverflows",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){return t-Math.max(e,0)}),t)}},{key:"_getNarrowedViewportRect",value:function(){var t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}},{key:"_validatePositions",value:function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach((function(t){hr("originX",t.originX),lr("originY",t.originY),hr("overlayX",t.overlayX),lr("overlayY",t.overlayY)}))}},{key:"_addPanelClasses",value:function(t){var e=this;this._pane&&pe(t).forEach((function(t){""!==t&&-1===e._appliedPanelClasses.indexOf(t)&&(e._appliedPanelClasses.push(t),e._pane.classList.add(t))}))}},{key:"_clearPanelClasses",value:function(){var t=this;this._pane&&(this._appliedPanelClasses.forEach((function(e){t._pane.classList.remove(e)})),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var t=this._origin;if(t instanceof r.l)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();var e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}]),t}();function br(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function wr(t){if("number"!=typeof t&&null!=t){var e=_slicedToArray(t.split(gr),2),n=e[0],r=e[1];return r&&"px"!==r?null:parseFloat(n)}return t||null}var kr,Cr,Sr,Er=function(){function t(e,n,r,i,o,a,s){_classCallCheck(this,t),this._preferredPositions=[],this._positionStrategy=new _r(r,i,o,a,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,n)}return _createClass(t,[{key:"_isRtl",get:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"onPositionChange",get:function(){return this._positionStrategy.positionChanges}},{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(t){this._positionStrategy.withScrollableContainers(t)}},{key:"withFallbackPosition",value:function(t,e,n,r){var i=new ur(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}},{key:"withOffsetX",value:function(t){return this._positionStrategy.withDefaultOffsetX(t),this}},{key:"withOffsetY",value:function(t){return this._positionStrategy.withDefaultOffsetY(t),this}},{key:"withLockedPosition",value:function(t){return this._positionStrategy.withLockedPosition(t),this}},{key:"withPositions",value:function(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(t){return this._positionStrategy.setOrigin(t),this}}]),t}(),Tr=function(){function t(){_classCallCheck(this,t),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return _createClass(t,[{key:"attach",value:function(t){var e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}},{key:"left",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}},{key:"right",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}},{key:"width",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}},{key:"height",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}},{key:"centerHorizontally",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(t),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(t),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),r=n.width,i=n.height,o=n.maxWidth,a=n.maxHeight,s=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),u=!("100%"!==i&&"100vh"!==i||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=s?"0":this._leftOffset,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,s?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=u?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}}]),t}(),Or=((Cr=function(){function t(e,n,r,i){_classCallCheck(this,t),this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i}return _createClass(t,[{key:"global",value:function(){return new Tr}},{key:"connectedTo",value:function(t,e,n){return new Er(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(t){return new _r(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),t}()).\u0275fac=function(t){return new(t||Cr)(r.Xb(Pn),r.Xb(u),r.Xb(mn),r.Xb(yr))},Cr.\u0275prov=Object(r.Kb)({factory:function(){return new Cr(Object(r.Xb)(Pn),Object(r.Xb)(u),Object(r.Xb)(mn),Object(r.Xb)(yr))},token:Cr,providedIn:"root"}),Cr),xr=0,Ir=((kr=function(){function t(e,n,r,i,o,a,s,u,c,l){_classCallCheck(this,t),this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=i,this._keyboardDispatcher=o,this._injector=a,this._ngZone=s,this._document=u,this._directionality=c,this._location=l}return _createClass(t,[{key:"create",value:function(t){var e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new sr(t);return i.direction=i.direction||this._directionality.value,new mr(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(t){var e=this._document.createElement("div");return e.id="cdk-overlay-"+xr++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}},{key:"_createHostElement",value:function(){var t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}},{key:"_createPortalOutlet",value:function(t){return this._appRef||(this._appRef=this._injector.get(r.g)),new zn(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),t}()).\u0275fac=function(t){return new(t||kr)(r.Xb(ar),r.Xb(yr),r.Xb(r.j),r.Xb(Or),r.Xb(pr),r.Xb(r.r),r.Xb(r.z),r.Xb(u),r.Xb(In),r.Xb(x,8))},kr.\u0275prov=r.Kb({token:kr,factory:kr.\u0275fac}),kr),Ar={provide:new r.q("cdk-connected-overlay-scroll-strategy"),deps:[Ir],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},Dr=((Sr=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Sr}),Sr.\u0275inj=r.Lb({factory:function(t){return new(t||Sr)},providers:[Ir,Ar],imports:[[An,Gn,Nn],Nn]}),Sr),Pr=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var r;return _classCallCheck(this,n),(r=e.call(this))._value=t,r}return _createClass(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(t){var e=_get(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new sn.a;return this._value}},{key:"next",value:function(t){_get(_getPrototypeOf(n.prototype),"next",this).call(this,this._value=t)}}]),n}(me.a),Rr=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Nr=n("yCtX"),jr={};function Fr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=null,i=null;return Object(Fe.a)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(be.a)(e[0])&&(e=e[0]),Object(Nr.a)(e,i).lift(new Mr(r))}var Mr=function(){function t(e){_classCallCheck(this,t),this.resultSelector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Lr(t,this.resultSelector))}}]),t}(),Lr=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return _createClass(n,[{key:"_next",value:function(t){this.values.push(jr),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(Pe.a)(this,r,r,n))}}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n,r,i){var o=this.values,a=this.toRespond?o[n]===jr?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(De.a);function Vr(t){return new _e.a((function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object($e.a)(n):Object(Qn.b)()).subscribe(e)}))}function Ur(t){return function(e){return 0===t?Object(Qn.b)():e.lift(new qr(t))}}var qr=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new Kn}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Br(t,this.total))}}]),t}(),Br=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(Te.a);function zr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr;return function(e){return e.lift(new Hr(t))}}var Hr=function(){function t(e){_classCallCheck(this,t),this.errorFactory=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Gr(t,this.errorFactory))}}]),t}(),Gr=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return _createClass(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(zA){t=zA}this.destination.error(t)}}]),n}(Te.a);function Wr(){return new Rr}function Kr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new Qr(t))}}var Qr=function(){function t(e){_classCallCheck(this,t),this.defaultValue=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Yr(t,this.defaultValue))}}]),t}(),Yr=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return _createClass(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(Te.a),Xr=n("SpAZ");function Zr(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Ve((function(e,n){return t(e,n,r)})):Xr.a,Ur(1),n?Kr(e):zr((function(){return new Rr})))}}function Jr(t){return function(e){var n=new $r(t),r=e.lift(n);return n.caught=r}}var $r=function(){function t(e){_classCallCheck(this,t),this.selector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new ti(t,this.selector,this.caught))}}]),t}(),ti=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return _createClass(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(o){return void _get(_getPrototypeOf(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new Je.a(this,void 0,void 0);this.add(r);var i=Object(Pe.a)(this,e,void 0,void 0,r);i!==r&&this.add(i)}}}]),n}(De.a);function ei(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Ve((function(e,n){return t(e,n,r)})):Xr.a,Yn(1),n?Kr(e):zr((function(){return new Rr})))}}var ni=n("5+tZ"),ri=function(){function t(e,n,r){_classCallCheck(this,t),this.predicate=e,this.thisArg=n,this.source=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new ii(t,this.predicate,this.thisArg,this.source))}}]),t}(),ii=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t)).predicate=r,a.thisArg=i,a.source=o,a.index=0,a.thisArg=i||_assertThisInitialized(a),a}return _createClass(n,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(Te.a);function oi(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ai(t,e,n))}}var ai=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new si(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),si=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return _createClass(n,[{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}},{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}}]),n}(Te.a);function ui(t,e){return Object(ni.a)(t,e,1)}var ci,li=n("mCNh"),hi=n("vkgz"),fi=function(){function t(e){_classCallCheck(this,t),this.callback=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new di(t,this.callback))}}]),t}(),di=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).add(new Ee.a(r)),i}return n}(Te.a),pi=function t(e,n){_classCallCheck(this,t),this.id=e,this.url=n},vi=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=a,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(pi),yi=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(pi),mi=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).reason=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(pi),gi=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,r)).error=i,o}return _createClass(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(pi),_i=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(pi),bi=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(pi),wi=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a){var s;return _classCallCheck(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s.shouldActivate=a,s}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(pi),ki=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(pi),Ci=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _createClass(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(pi),Si=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Ei=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),Ti=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Oi=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),xi=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Ii=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Ai=function(){function t(e,n,r){_classCallCheck(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return _createClass(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),Di=((ci=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||ci)},ci.\u0275cmp=r.Ib({type:ci,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Pb(0,"router-outlet")},directives:function(){return[Va]},encapsulation:2}),ci),Pi=function(){function t(e){_classCallCheck(this,t),this.params=e||{}}return _createClass(t,[{key:"has",value:function(t){return this.params.hasOwnProperty(t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function Ri(t){return new Pi(t)}function Ni(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ji(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var Fi=function t(e,n){_classCallCheck(this,t),this.routes=e,this.module=n};function Mi(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];Li(r,Vi(e,r))}}function Li(t,e){if(!t)throw new Error("\n      Invalid configuration of route '".concat(e,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(t))throw new Error("Invalid configuration of route '".concat(e,"': Array cannot be specified"));if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error("Invalid configuration of route '".concat(e,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and children cannot be used together"));if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and loadChildren cannot be used together"));if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': children and loadChildren cannot be used together"));if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and component cannot be used together"));if(t.path&&t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': path and matcher cannot be used together"));if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': routes must have either a path or a matcher specified"));if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '".concat(e,"': path cannot start with a slash"));if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(e,'", redirectTo: "').concat(t.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '".concat(e,"': pathMatch can only be set to 'prefix' or 'full'"));t.children&&Mi(t.children,e)}function Vi(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function Ui(t){var e=t.children&&t.children.map(Ui),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Di),n}function qi(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!Bi(t[n=r[o]],e[n]))return!1;return!0}function Bi(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every((function(t){return e.indexOf(t)>-1})):t===e}function zi(t){return Array.prototype.concat.apply([],t)}function Hi(t){return t.length>0?t[t.length-1]:null}function Gi(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Wi(t){return Object(r.sb)(t)?t:Object(r.tb)(t)?Object($e.a)(Promise.resolve(t)):Object(ge.a)(t)}function Ki(t,e,n){return n?function(t,e){return qi(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Zi(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every((function(n){return Bi(t[n],e[n])}))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Zi(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Zi(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Zi(n.segments,a)&&!!n.children.primary&&e(n.children.primary,r,s)}(e,n,n.segments)}(t.root,e.root)}var Qi=function(){function t(e,n,r){_classCallCheck(this,t),this.root=e,this.queryParams=n,this.fragment=r}return _createClass(t,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ri(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return eo.serialize(this)}}]),t}(),Yi=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.segments=e,this.children=n,this.parent=null,Gi(n,(function(t,e){return t.parent=r}))}return _createClass(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return no(this)}}]),t}(),Xi=function(){function t(e,n){_classCallCheck(this,t),this.path=e,this.parameters=n}return _createClass(t,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Ri(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return uo(this)}}]),t}();function Zi(t,e){return t.length===e.length&&t.every((function(t,n){return t.path===e[n].path}))}function Ji(t,e){var n=[];return Gi(t.children,(function(t,r){"primary"===r&&(n=n.concat(e(t,r)))})),Gi(t.children,(function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))})),n}var $i=function t(){_classCallCheck(this,t)},to=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"parse",value:function(t){var e=new po(t);return new Qi(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){return"".concat("/"+function t(e,n){if(!e.hasChildren())return no(e);if(n){var r=e.children.primary?t(e.children.primary,!1):"",i=[];return Gi(e.children,(function(e,n){"primary"!==n&&i.push("".concat(n,":").concat(t(e,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var o=Ji(e,(function(n,r){return"primary"===r?[t(e.children.primary,!1)]:["".concat(r,":").concat(t(n,!1))]}));return"".concat(no(e),"/(").concat(o.join("//"),")")}(t.root,!0)).concat((e=t.queryParams,n=Object.keys(e).map((function(t){var n=e[t];return Array.isArray(n)?n.map((function(e){return"".concat(io(t),"=").concat(io(e))})).join("&"):"".concat(io(t),"=").concat(io(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"");var e,n}}]),t}(),eo=new to;function no(t){return t.segments.map((function(t){return uo(t)})).join("/")}function ro(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function io(t){return ro(t).replace(/%3B/gi,";")}function oo(t){return ro(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ao(t){return decodeURIComponent(t)}function so(t){return ao(t.replace(/\+/g,"%20"))}function uo(t){return"".concat(oo(t.path)).concat((e=t.parameters,Object.keys(e).map((function(t){return";".concat(oo(t),"=").concat(oo(e[t]))})).join("")));var e}var co=/^[^\/()?;=#]+/;function lo(t){var e=t.match(co);return e?e[0]:""}var ho=/^[^=?&#]+/,fo=/^[^?&#]+/,po=function(){function t(e){_classCallCheck(this,t),this.url=e,this.remaining=e}return _createClass(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yi([],{}):new Yi([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Yi(t,e)),n}},{key:"parseSegment",value:function(){var t=lo(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new Xi(ao(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=lo(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=lo(this.remaining);r&&(n=r,this.capture(n))}t[ao(e)]=ao(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(ho);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(fo);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=so(e),o=so(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=lo(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Yi([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),vo=function(){function t(e){_classCallCheck(this,t),this._root=e}return _createClass(t,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=yo(t,this._root);return e?e.children.map((function(t){return t.value})):[]}},{key:"firstChild",value:function(t){var e=yo(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=mo(t,this._root);return e.length<2?[]:e[e.length-2].children.map((function(t){return t.value})).filter((function(e){return e!==t}))}},{key:"pathFromRoot",value:function(t){return mo(t,this._root).map((function(t){return t.value}))}}]),t}();function yo(t,e){if(t===e.value)return e;var n,r=_createForOfIteratorHelper(e.children);try{for(r.s();!(n=r.n()).done;){var i=yo(t,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function mo(t,e){if(t===e.value)return[e];var n,r=_createForOfIteratorHelper(e.children);try{for(r.s();!(n=r.n()).done;){var i=mo(t,n.value);if(i.length)return i.unshift(e),i}}catch(o){r.e(o)}finally{r.f()}return[]}var go=function(){function t(e,n){_classCallCheck(this,t),this.value=e,this.children=n}return _createClass(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function _o(t){var e={};return t&&t.children.forEach((function(t){return e[t.value.outlet]=t})),e}var bo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).snapshot=r,To(_assertThisInitialized(i),t),i}return _createClass(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(vo);function wo(t,e){var n=function(t,e){var n=new So([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Eo("",new go(n,[]))}(t,e),r=new Pr([new Xi("",{})]),i=new Pr({}),o=new Pr({}),a=new Pr({}),s=new Pr(""),u=new ko(r,i,a,s,o,"primary",e,n.root);return u.snapshot=n.root,new bo(new go(u,[]),n)}var ko=function(){function t(e,n,r,i,o,a,s,u){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return _createClass(t,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(ke.a)((function(t){return Ri(t)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(ke.a)((function(t){return Ri(t)})))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),t}();function Co(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var So=function(){function t(e,n,r,i,o,a,s,u,c,l,h){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return _createClass(t,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Ri(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ri(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(t){return t.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),t}(),Eo=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,r)).url=t,To(_assertThisInitialized(i),r),i}return _createClass(n,[{key:"toString",value:function(){return Oo(this._root)}}]),n}(vo);function To(t,e){e.value._routerState=t,e.children.forEach((function(e){return To(t,e)}))}function Oo(t){var e=t.children.length>0?" { ".concat(t.children.map(Oo).join(", ")," } "):"";return"".concat(t.value).concat(e)}function xo(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,qi(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),qi(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!qi(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),qi(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Io(t,e){return qi(t.params,e.params)&&function(t,e){return Zi(t,e)&&t.every((function(t,n){return qi(t.parameters,e[n].parameters)}))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Io(t.parent,e.parent))}function Ao(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Do(t,e,n,r,i){var o={};return r&&Gi(r,(function(t,e){o[e]=Array.isArray(t)?t.map((function(t){return""+t})):""+t})),new Qi(n.root===t?e:function t(e,n,r){var i={};return Gi(e.children,(function(e,o){i[o]=e===n?r:t(e,n,r)})),new Yi(e.segments,i)}(n.root,t,e),o,i)}var Po=function(){function t(e,n,r){if(_classCallCheck(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ao(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(t){return"object"==typeof t&&null!=t&&t.outlets}));if(i&&i!==Hi(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),Ro=function t(e,n,r){_classCallCheck(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function No(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function jo(t,e,n){if(t||(t=new Yi([],{})),0===t.segments.length&&t.hasChildren())return Fo(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=No(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Uo(s,u,a))return o;r+=2}else{if(!Uo(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new Yi(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new Yi(t.segments.slice(r.pathIndex),t.children),Fo(o,0,i)}return r.match&&0===i.length?new Yi(t.segments,{}):r.match&&!t.hasChildren()?Mo(t,e,n):r.match?Fo(t,0,i):Mo(t,e,n)}function Fo(t,e,n){if(0===n.length)return new Yi(t.segments,{});var r=function(t){return"object"!=typeof t[0]||void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),i={};return Gi(r,(function(n,r){null!==n&&(i[r]=jo(t.children[r],e,n))})),Gi(t.children,(function(t,e){void 0===r[e]&&(i[e]=t)})),new Yi(t.segments,i)}function Mo(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=Lo(n[i].outlets);return new Yi(r,o)}if(0===i&&Ao(n[0]))r.push(new Xi(t.segments[e].path,n[0])),i++;else{var a=No(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Ao(s)?(r.push(new Xi(a,Vo(s))),i+=2):(r.push(new Xi(a,{})),i++)}}return new Yi(r,{})}function Lo(t){var e={};return Gi(t,(function(t,n){null!==t&&(e[n]=Mo(new Yi([],{}),0,t))})),e}function Vo(t){var e={};return Gi(t,(function(t,n){return e[n]=""+t})),e}function Uo(t,e,n){return t==n.path&&qi(e,n.parameters)}var qo=function(){function t(e,n,r,i){_classCallCheck(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),xo(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=_o(e);t.children.forEach((function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]})),Gi(i,(function(t,e){r.deactivateRouteAndItsChildren(t,n)}))}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=_o(t),o=t.value.component?r.children:e;Gi(i,(function(t,e){return n.deactivateRouteAndItsChildren(t,o)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=_o(e);t.children.forEach((function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Ii(t.value.snapshot))})),t.children.length&&this.forwardEvent(new Oi(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(xo(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Bo(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function Bo(t){xo(t.value),t.children.forEach(Bo)}function zo(t){return"function"==typeof t}function Ho(t){return t instanceof Qi}var Go=function t(e){_classCallCheck(this,t),this.segmentGroup=e||null},Wo=function t(e){_classCallCheck(this,t),this.urlTree=e};function Ko(t){return new _e.a((function(e){return e.error(new Go(t))}))}function Qo(t){return new _e.a((function(e){return e.error(new Wo(t))}))}function Yo(t){return new _e.a((function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))}))}var Xo=function(){function t(e,n,i,o,a){_classCallCheck(this,t),this.configLoader=n,this.urlSerializer=i,this.urlTree=o,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(r.x)}return _createClass(t,[{key:"apply",value:function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(ke.a)((function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)}))).pipe(Jr((function(e){if(e instanceof Wo)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Go)throw t.noMatchError(e);throw e})))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(ke.a)((function(n){return e.createUrlTree(n,t.queryParams,t.fragment)}))).pipe(Jr((function(t){if(t instanceof Go)throw e.noMatchError(t);throw t})))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new Yi([],{primary:t}):t;return new Qi(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(ke.a)((function(t){return new Yi([],t)}))):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Object(ge.a)({});var o=[],a=[],s={};return Gi(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(t,e,c,u)).pipe(Object(ke.a)((function(t){return s[i]=t})));"primary"===i?o.push(l):a.push(l)})),ge.a.apply(null,o.concat(a)).pipe(We(),Zr(),Object(ke.a)((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(t,e,n,r,i,o){var a=this;return Object(ge.a).apply(void 0,_toConsumableArray(n)).pipe(Object(ke.a)((function(s){return a.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Jr((function(t){if(t instanceof Go)return Object(ge.a)(null);throw t})))})),We(),ei((function(t){return!!t})),Jr((function(t,n){if(t instanceof Rr||"EmptyError"===t.name){if(a.noLeftoversInUrl(e,r,i))return Object(ge.a)(new Yi([],{}));throw new Go(e)}throw t})))}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return ta(r)!==o?Ko(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Ko(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Qo(o):this.lineralizeSegments(n,o).pipe(Object(ni.a)((function(n){var o=new Yi(n,{});return i.expandSegment(t,o,e,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=Zo(e,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return Ko(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Qo(f):this.lineralizeSegments(r,f).pipe(Object(ni.a)((function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(ke.a)((function(t){return n._loadedConfig=t,new Yi(r,{})}))):Object(ge.a)(new Yi(r,{}));var o=Zo(e,n,r),a=o.matched,s=o.consumedSegments,u=o.lastChild;if(!a)return Ko(e);var c=r.slice(u);return this.getChildConfig(t,n,r).pipe(Object(ni.a)((function(t){var n=t.module,r=t.routes,o=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some((function(n){return $o(t,e,n)&&"primary"!==ta(n)}))}(t,n,r)?{segmentGroup:Jo(new Yi(e,function(t,e){var n={};n.primary=e;var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;""===o.path&&"primary"!==ta(o)&&(n[ta(o)]=new Yi([],{}))}}catch(a){i.e(a)}finally{i.f()}return n}(r,new Yi(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some((function(n){return $o(t,e,n)}))}(t,n,r)?{segmentGroup:Jo(new Yi(t.segments,function(t,e,n,r){var i,o={},a=_createForOfIteratorHelper(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;$o(t,e,s)&&!r[ta(s)]&&(o[ta(s)]=new Yi([],{}))}}catch(u){a.e(u)}finally{a.f()}return Object.assign(Object.assign({},r),o)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,c,r),a=o.segmentGroup,u=o.slicedSegments;return 0===u.length&&a.hasChildren()?i.expandChildren(n,r,a).pipe(Object(ke.a)((function(t){return new Yi(s,t)}))):0===r.length&&0===u.length?Object(ge.a)(new Yi(s,{})):i.expandSegment(n,a,r,u,"primary",!0).pipe(Object(ke.a)((function(t){return new Yi(s.concat(t.segments),t.children)})))})))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?Object(ge.a)(new Fi(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ge.a)(e._loadedConfig):function(t,e,n){var r,i=e.canLoad;return i&&0!==i.length?Object($e.a)(i).pipe(Object(ke.a)((function(r){var i,o=t.get(r);if(function(t){return t&&zo(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!zo(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return Wi(i)}))).pipe(We(),(r=function(t){return!0===t},function(t){return t.lift(new ri(r,void 0,t))})):Object(ge.a)(!0)}(t.injector,e,n).pipe(Object(ni.a)((function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(ke.a)((function(t){return e._loadedConfig=t,t}))):function(t){return new _e.a((function(e){return e.error(Ni("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))}))}(e)}))):Object(ge.a)(new Fi([],t))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ge.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Yo(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Qi(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return Gi(t,(function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t})),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return Gi(e.children,(function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)})),new Yi(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map((function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)}))}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===t.path)return e.splice(r),o;r++}}catch(a){i.e(a)}finally{i.f()}return t}}]),t}();function Zo(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||ji)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Jo(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new Yi(t.segments.concat(e.segments),e.children)}return t}function $o(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function ta(t){return t.outlet||"primary"}var ea=function t(e){_classCallCheck(this,t),this.path=e,this.route=this.path[this.path.length-1]},na=function t(e,n){_classCallCheck(this,t),this.component=e,this.route=n};function ra(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ia(t,e,n){var r=_o(t),i=t.value;Gi(r,(function(t,r){ia(t,i.component?e?e.children.getContext(r):null:e,n)})),n.canDeactivateChecks.push(new na(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var oa=Symbol("INITIAL_VALUE");function aa(){return tn((function(t){return Fr.apply(void 0,_toConsumableArray(t.map((function(t){return t.pipe(Yn(1),Qe(oa))})))).pipe(oi((function(t,e){var n=!1;return e.reduce((function(t,r,i){if(t!==oa)return t;if(r===oa&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Ho(r))return r}return t}),t)}),oa),Ve((function(t){return t!==oa})),Object(ke.a)((function(t){return Ho(t)?t:!0===t})),Yn(1))}))}function sa(t,e){return null!==t&&e&&e(new xi(t)),Object(ge.a)(!0)}function ua(t,e){return null!==t&&e&&e(new Ti(t)),Object(ge.a)(!0)}function ca(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ge.a)(!0);var i=r.map((function(r){return Vr((function(){var i,o=ra(r,e,n);if(function(t){return t&&zo(t.canActivate)}(o))i=Wi(o.canActivate(e,t));else{if(!zo(o))throw new Error("Invalid CanActivate guard");i=Wi(o(e,t))}return i.pipe(ei())}))}));return Object(ge.a)(i).pipe(aa())}function la(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map((function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)})).filter((function(t){return null!==t})).map((function(e){return Vr((function(){var i=e.guards.map((function(i){var o,a=ra(i,e.node,n);if(function(t){return t&&zo(t.canActivateChild)}(a))o=Wi(a.canActivateChild(r,t));else{if(!zo(a))throw new Error("Invalid CanActivateChild guard");o=Wi(a(r,t))}return o.pipe(ei())}));return Object(ge.a)(i).pipe(aa())}))}));return Object(ge.a)(i).pipe(aa())}var ha=function t(){_classCallCheck(this,t)},fa=function(){function t(e,n,r,i,o,a){_classCallCheck(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _createClass(t,[{key:"recognize",value:function(){try{var t=va(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new So([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new go(n,e),i=new Eo(this.url,r);return this.inheritParamsAndData(i._root),Object(ge.a)(i)}catch(zA){return new _e.a((function(e){return e.error(zA)}))}}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=Co(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach((function(t){return e.inheritParamsAndData(t)}))}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){var n,r=this,i=Ji(e,(function(e,n){return r.processSegmentGroup(t,e,n)}));return n={},i.forEach((function(t){var e=n[t.value.outlet];if(e){var r=e.url.map((function(t){return t.toString()})).join("/"),i=t.value.url.map((function(t){return t.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[t.value.outlet]=t.value})),i.sort((function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)})),i}},{key:"processSegment",value:function(t,e,n,r){var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;try{return this.processSegmentAgainstRoute(a,e,n,r)}catch(zA){if(!(zA instanceof ha))throw zA}}}catch(s){o.e(s)}finally{o.f()}if(this.noLeftoversInUrl(e,n,r))return[];throw new ha}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo)throw new ha;if((t.outlet||"primary")!==r)throw new ha;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?Hi(n).parameters:{};i=new So(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ga(t),r,t.component,t,da(e),pa(e)+n.length,_a(t))}else{var u=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new ha;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||ji)(n,t,e);if(!r)throw new ha;var i={};Gi(r.posParams,(function(t,e){i[e]=t.path}));var o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=u.consumedSegments,a=n.slice(u.lastChild),i=new So(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ga(t),r,t.component,t,da(e),pa(e)+o.length,_a(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=va(e,o,a,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new go(i,d)]}if(0===c.length&&0===f.length)return[new go(i,[])];var p=this.processSegment(c,h,f,"primary");return[new go(i,p)]}}]),t}();function da(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function pa(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function va(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some((function(n){return ya(t,e,n)&&"primary"!==ma(n)}))}(t,n,r)){var o=new Yi(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var o,a=_createForOfIteratorHelper(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(""===s.path&&"primary"!==ma(s)){var u=new Yi([],{});u._sourceSegment=t,u._segmentIndexShift=e.length,i[ma(s)]=u}}}catch(c){a.e(c)}finally{a.f()}return i}(t,e,r,new Yi(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some((function(n){return ya(t,e,n)}))}(t,n,r)){var a=new Yi(t.segments,function(t,e,n,r,i,o){var a,s={},u=_createForOfIteratorHelper(r);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(ya(t,n,c)&&!i[ma(c)]){var l=new Yi([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[ma(c)]=l}}}catch(h){u.e(h)}finally{u.f()}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}var s=new Yi(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function ya(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function ma(t){return t.outlet||"primary"}function ga(t){return t.data||{}}function _a(t){return t.resolve||{}}function ba(t,e,n,r){var i=ra(t,e,r);return Wi(i.resolve?i.resolve(e,n):i(e,n))}function wa(t){return function(e){return e.pipe(tn((function(e){var n=t(e);return n?Object($e.a)(n).pipe(Object(ke.a)((function(){return e}))):Object($e.a)([e])})))}}var ka=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}(),Ca=new r.q("ROUTES"),Sa=function(){function t(e,n,r,i){_classCallCheck(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(ke.a)((function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Fi(zi(i.injector.get(Ca)).map(Ui),i)})))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Object($e.a)(this.loader.load(t)):Wi(t()).pipe(Object(ni.a)((function(t){return t instanceof r.v?Object(ge.a)(t):Object($e.a)(e.compiler.compileModuleAsync(t))})))}}]),t}(),Ea=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function Ta(t){throw t}function Oa(t,e,n){return e.parse("/")}function xa(t,e){return Object(ge.a)(null)}var Ia,Aa,Da=((Aa=function(){function t(e,n,i,o,a,s,u,c){var l=this;_classCallCheck(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=i,this.location=o,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new me.a,this.errorHandler=Ta,this.malformedUriErrorHandler=Oa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xa,afterPreactivation:xa},this.urlHandlingStrategy=new Ea,this.routeReuseStrategy=new ka,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=a.get(r.x),this.console=a.get(r.Z);var h=a.get(r.z);this.isNgZoneEnabled=h instanceof r.z,this.resetConfig(c),this.currentUrlTree=new Qi(new Yi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Sa(s,u,(function(t){return l.triggerEvent(new Si(t))}),(function(t){return l.triggerEvent(new Ei(t))})),this.routerState=wo(this.currentUrlTree,this.rootComponentType),this.transitions=new Pr({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(Ve((function(t){return 0!==t.id})),Object(ke.a)((function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})})),tn((function(t){var r,i,o,a,s=!1,u=!1;return Object(ge.a)(t).pipe(Object(hi.a)((function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}})),tn((function(t){var r,i,o,a,s=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||s)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ge.a)(t).pipe(tn((function(t){var r=e.transitions.getValue();return n.next(new vi(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?Qn.a:[t]})),tn((function(t){return Promise.resolve(t)})),(r=e.ngModule.injector,i=e.configLoader,o=e.urlSerializer,a=e.config,function(t){return t.pipe(tn((function(t){return function(t,e,n,r,i){return new Xo(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,a).pipe(Object(ke.a)((function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})})))})))}),Object(hi.a)((function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})})),function(t,n,r,i,o){return function(r){return r.pipe(Object(ni.a)((function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new fa(t,e,n,r,i,o).recognize()}(t,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,e.serializeUrl(a)),i,o).pipe(Object(ke.a)((function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})})));var a})))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Object(hi.a)((function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),Object(hi.a)((function(t){var r=new _i(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)})));if(s&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var u=t.id,c=t.extractedUrl,l=t.source,h=t.restoredState,f=t.extras,d=new vi(u,e.serializeUrl(c),l,h);n.next(d);var p=wo(c,e.rootComponentType).snapshot;return Object(ge.a)(Object.assign(Object.assign({},t),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Qn.a})),wa((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(hi.a)((function(t){var n=new bi(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),Object(ke.a)((function(t){return Object.assign(Object.assign({},t),{guards:(n=t.targetSnapshot,r=t.currentSnapshot,i=e.rootContexts,o=n._root,function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=_o(n);return e.children.forEach((function(e){!function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,s=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Zi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zi(t.url,e.url)||!qi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Io(t,e)||!qi(t.queryParams,e.queryParams);case"paramsChange":default:return!Io(t,e)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new ea(i)):(a.data=s.data,a._resolvedData=s._resolvedData),t(e,n,a.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new na(u&&u.outlet&&u.outlet.component||null,s))}else s&&ia(n,u,o),o.canActivateChecks.push(new ea(i)),t(e,null,a.component?u?u.children:null:r,i,o)}(e,a[e.value.outlet],r,i.concat([e.value]),o),delete a[e.value.outlet]})),Gi(a,(function(t,e){return ia(t,r.getContext(e),o)})),o}(o,r?r._root:null,i,[o.value]))});var n,r,i,o})),function(t,e){return function(n){return n.pipe(Object(ni.a)((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?Object(ge.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object($e.a)(t).pipe(Object(ni.a)((function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ge.a)(!0);var a=o.map((function(o){var a,s=ra(o,e,i);if(function(t){return t&&zo(t.canDeactivate)}(s))a=Wi(s.canDeactivate(t,e,n,r));else{if(!zo(s))throw new Error("Invalid CanDeactivate guard");a=Wi(s(t,e,n,r))}return a.pipe(ei())}));return Object(ge.a)(a).pipe(aa())}(t.component,t.route,n,e,r)})),ei((function(t){return!0!==t}),!0))}(s,r,i,t).pipe(Object(ni.a)((function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Object($e.a)(e).pipe(ui((function(e){return Object($e.a)([ua(e.route.parent,r),sa(e.route,r),la(t,e.path,n),ca(t,e.route,n)]).pipe(We(),ei((function(t){return!0!==t}),!0))})),ei((function(t){return!0!==t}),!0))}(r,a,t,e):Object(ge.a)(n)})),Object(ke.a)((function(t){return Object.assign(Object.assign({},n),{guardsResult:t})})))})))}}(e.ngModule.injector,(function(t){return e.triggerEvent(t)})),Object(hi.a)((function(t){if(Ho(t.guardsResult)){var n=Ni('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}})),Object(hi.a)((function(t){var n=new wi(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)})),Ve((function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new mi(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0})),wa((function(t){if(t.guards.canActivateChecks.length)return Object(ge.a)(t).pipe(Object(hi.a)((function(t){var n=new ki(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),(n=e.paramsInheritanceStrategy,r=e.ngModule.injector,function(t){return t.pipe(Object(ni.a)((function(t){var e=t.targetSnapshot,i=t.guards.canActivateChecks;return i.length?Object($e.a)(i).pipe(ui((function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(ge.a)({});if(1===i.length){var o=i[0];return ba(t[o],e,n,r).pipe(Object(ke.a)((function(t){return _defineProperty({},o,t)})))}var a={};return Object($e.a)(i).pipe(Object(ni.a)((function(i){return ba(t[i],e,n,r).pipe(Object(ke.a)((function(t){return a[i]=t,t})))}))).pipe(Zr(),Object(ke.a)((function(){return a})))}(t._resolve,t,e,r).pipe(Object(ke.a)((function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Co(t,n).resolve),null})))}(t.route,e,n,r)})),function(t,e){return arguments.length>=2?function(n){return Object(li.a)(oi(t,e),Ur(1),Kr(e))(n)}:function(e){return Object(li.a)(oi((function(e,n,r){return t(e,n,r+1)})),Ur(1))(e)}}((function(t,e){return t})),Object(ke.a)((function(e){return t}))):Object(ge.a)(t)})))}),Object(hi.a)((function(t){var n=new Ci(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})));var n,r})),wa((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(ke.a)((function(t){var n=function(t,e,n){var r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var o=function(e,n,r){return n.children.map((function(n){var i,o=_createForOfIteratorHelper(r.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(e.shouldReuseRoute(a.value.snapshot,n.value))return t(e,n,a)}}catch(s){o.e(s)}finally{o.f()}return t(e,n)}))}(e,n,r);return new go(i,o)}var a=e.retrieve(n.value);if(a){var s=a.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,s),s}var u,c=new ko(new Pr((u=n.value).url),new Pr(u.params),new Pr(u.queryParams),new Pr(u.fragment),new Pr(u.data),u.outlet,u.component,u),l=n.children.map((function(n){return t(e,n)}));return new go(c,l)}(t,e._root,n?n._root:void 0);return new bo(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:n})})),Object(hi.a)((function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),(i=e.rootContexts,o=e.routeReuseStrategy,a=function(t){return e.triggerEvent(t)},Object(ke.a)((function(t){return new qo(o,t.targetRouterState,t.currentRouterState,a).activate(i),t}))),Object(hi.a)({next:function(){s=!0},complete:function(){s=!0}}),(r=function(){if(!s&&!u){e.resetUrlToCurrentUrlTree();var r=new mi(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null},function(t){return t.lift(new fi(r))}),Jr((function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var i=Ho(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new mi(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),i?setTimeout((function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);return e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})}),0):t.resolve(!1)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new gi(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(dk){t.reject(dk)}}var s;return Qn.a})))})))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?e.state:null;setTimeout((function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){Mi(t),this.config=t.map(Ui),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,i=e.queryParams,o=e.fragment,a=e.preserveQueryParams,s=e.queryParamsHandling,u=e.preserveFragment;Object(r.W)()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o,h=null;if(s)switch(s){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=a?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Do(e.root,e.root,e,r,i);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Po(!0,0,t);var e=0,n=!1,r=t.reduce((function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return Gi(r.outlets,(function(t,e){o[e]="string"==typeof t?t.split("/"):t})),[].concat(_toConsumableArray(t),[{outlets:o}])}if(r.segmentPath)return[].concat(_toConsumableArray(t),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(t),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))})),t):[].concat(_toConsumableArray(t),[r])}),[]);return new Po(n,e,r)}(n);if(o.toRoot())return Do(e.root,new Yi([],{}),e,r,i);var a=function(t,e,n){if(t.isAbsolute)return new Ro(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Ro(n.snapshot._urlSegment,!0,0);var r=Ao(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Ro(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),s=a.processChildren?Fo(a.segmentGroup,a.index,o.commands):jo(a.segmentGroup,a.index,o.commands);return Do(a.segmentGroup,s,e,r,i)}(c,this.currentUrlTree,t,h,l)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Object(r.W)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Ho(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(zA){e=this.malformedUriErrorHandler(zA,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(Ho(t))return Ki(this.currentUrlTree,t,e);var n=this.parseUrl(t);return Ki(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return null!=r&&(e[n]=r),e}),{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe((function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new yi(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)}),(function(e){t.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(t,e,n,r,i){var o,a,s,u=this.getTransition();if(u&&"imperative"!==e&&"imperative"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(u&&"hashchange"==e&&"popstate"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(u&&"popstate"==e&&"hashchange"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);i?(o=i.resolve,a=i.reject,s=i.promise):s=new Promise((function(t,e){o=t,a=e}));var c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(t){return Promise.reject(t)}))}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),t}()).\u0275fac=function(t){r.ac()},Aa.\u0275dir=r.Jb({type:Aa}),Aa),Pa=((Ia=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this.router=e,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=e.events.subscribe((function(t){t instanceof yi&&i.updateTargetUrlAndHref()}))}return _createClass(t,[{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(r.W)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}},{key:"ngOnChanges",value:function(t){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:Ra(this.skipLocationChange),replaceUrl:Ra(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Ra(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Ra(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||Ia)(r.Ob(Da),r.Ob(ko),r.Ob(b))},Ia.\u0275dir=r.Jb({type:Ia,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.bc("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(r.Wb("href",e.href,r.rc),r.Db("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.Ab]}),Ia);function Ra(t){return""===t||!!t}var Na,ja,Fa,Ma=function t(){_classCallCheck(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new La,this.attachRef=null},La=function(){function t(){_classCallCheck(this,t),this.contexts=new Map}return _createClass(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new Ma,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),Va=((Na=function(){function t(e,n,i,o,a){_classCallCheck(this,t),this.parentContexts=e,this.location=n,this.resolver=i,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=o||"primary",e.onChildOutletCreated(this.name,this)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ua(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),t}()).\u0275fac=function(t){return new(t||Na)(r.Ob(La),r.Ob(r.P),r.Ob(r.j),r.Yb("name"),r.Ob(r.h))},Na.\u0275dir=r.Jb({type:Na,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Na),Ua=function(){function t(e,n,r){_classCallCheck(this,t),this.route=e,this.childContexts=n,this.parent=r}return _createClass(t,[{key:"get",value:function(t,e){return t===ko?this.route:t===La?this.childContexts:this.parent.get(t,e)}}]),t}(),qa=function t(){_classCallCheck(this,t)},Ba=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return Object(ge.a)(null)}}]),t}(),za=((Fa=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new Sa(n,r,(function(t){return e.triggerEvent(new Si(t))}),(function(t){return e.triggerEvent(new Ei(t))}))}return _createClass(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(Ve((function(t){return t instanceof yi})),ui((function(){return t.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var a=o._loadedConfig;r.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(t,o)):o.children&&r.push(this.processRoutes(t,o.children))}}catch(s){i.e(s)}finally{i.f()}return Object($e.a)(r).pipe(Object(Ge.a)(),Object(ke.a)((function(t){})))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,(function(){return n.loader.load(t.injector,e).pipe(Object(ni.a)((function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})))}))}}]),t}()).\u0275fac=function(t){return new(t||Fa)(r.Xb(Da),r.Xb(r.w),r.Xb(r.i),r.Xb(r.r),r.Xb(qa))},Fa.\u0275prov=r.Kb({token:Fa,factory:Fa.\u0275fac}),Fa),Ha=((ja=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof vi?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof yi&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof Ai&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new Ai(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){r.ac()},ja.\u0275dir=r.Jb({type:ja}),ja),Ga=new r.q("ROUTER_CONFIGURATION"),Wa=new r.q("ROUTER_FORROOT_GUARD"),Ka=[x,{provide:$i,useClass:to},{provide:Da,useFactory:function(t,e,n,r,i,o,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,h=new Da(null,t,e,n,r,i,o,zi(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=a();h.events.subscribe((function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()}))}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[$i,La,x,r.r,r.w,r.i,Ca,Ga,[function(){return function t(){_classCallCheck(this,t)}}(),new r.A],[function(){return function t(){_classCallCheck(this,t)}}(),new r.A]]},La,{provide:ko,useFactory:function(t){return t.routerState.root},deps:[Da]},{provide:r.w,useClass:r.K},za,Ba,function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return e().pipe(Jr((function(){return Object(ge.a)(null)})))}}]),t}(),{provide:Ga,useValue:{enableTracing:!1}}];function Qa(){return new r.y("Router",Da)}var Ya,Xa=((Ya=function(){function t(e,n){_classCallCheck(this,t)}return _createClass(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[Ka,ts(e),{provide:Wa,useFactory:$a,deps:[[Da,new r.A,new r.J]]},{provide:Ga,useValue:n||{}},{provide:b,useFactory:Ja,deps:[c,[new r.p(E),new r.A],Ga]},{provide:Ha,useFactory:Za,deps:[Da,Rt,Ga]},{provide:qa,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ba},{provide:r.y,multi:!0,useFactory:Qa},[ns,{provide:r.d,multi:!0,useFactory:rs,deps:[ns]},{provide:os,useFactory:is,deps:[ns]},{provide:r.b,multi:!0,useExisting:os}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[ts(e)]}}}]),t}()).\u0275mod=r.Mb({type:Ya}),Ya.\u0275inj=r.Lb({factory:function(t){return new(t||Ya)(r.Xb(Wa,8),r.Xb(Da,8))}}),Ya);function Za(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Ha(t,e,n)}function Ja(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new O(t,e):new T(t,e)}function $a(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ts(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Ca,multi:!0,useValue:t}]}var es,ns=((es=function(){function t(e){_classCallCheck(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new me.a}return _createClass(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(f,Promise.resolve(null)).then((function(){var e=null,n=new Promise((function(t){return e=t})),r=t.injector.get(Da),i=t.injector.get(Ga);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return t.initNavigation?Object(ge.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(Ga),n=this.injector.get(za),i=this.injector.get(Ha),o=this.injector.get(Da),a=this.injector.get(r.g);t===a.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}},{key:"isLegacyDisabled",value:function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}]),t}()).\u0275fac=function(t){return new(t||es)(r.Xb(r.r))},es.\u0275prov=r.Kb({token:es,factory:es.\u0275fac}),es);function rs(t){return t.appInitializer.bind(t)}function is(t){return t.bootstrapListener.bind(t)}var os=new r.q("Router Initializer");function as(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.a;return function(n){return n.lift(new ss(t,e))}}var ss=function(){function t(e,n){_classCallCheck(this,t),this.dueTime=e,this.scheduler=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new us(t,this.dueTime,this.scheduler))}}]),t}(),us=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).dueTime=r,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return _createClass(n,[{key:"_next",value:function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(cs,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}},{key:"clearDebounce",value:function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}]),n}(Te.a);function cs(t){t.debouncedNext()}var ls,hs,fs,ds,ps,vs=((ps=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"create",value:function(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}]),t}()).\u0275fac=function(t){return new(t||ps)},ps.\u0275prov=Object(r.Kb)({factory:function(){return new ps},token:ps,providedIn:"root"}),ps),ys=((ds=function(){function t(e){_classCallCheck(this,t),this._mutationObserverFactory=e,this._observedElements=new Map}return _createClass(t,[{key:"ngOnDestroy",value:function(){var t=this;this._observedElements.forEach((function(e,n){return t._cleanupObserver(n)}))}},{key:"observe",value:function(t){var e=this,n=ye(t);return new _e.a((function(t){var r=e._observeElement(n).subscribe(t);return function(){r.unsubscribe(),e._unobserveElement(n)}}))}},{key:"_observeElement",value:function(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{var e=new me.a,n=this._mutationObserverFactory.create((function(t){return e.next(t)}));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}},{key:"_unobserveElement",value:function(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}},{key:"_cleanupObserver",value:function(t){if(this._observedElements.has(t)){var e=this._observedElements.get(t),n=e.observer,r=e.stream;n&&n.disconnect(),r.complete(),this._observedElements.delete(t)}}}]),t}()).\u0275fac=function(t){return new(t||ds)(r.Xb(vs))},ds.\u0275prov=Object(r.Kb)({factory:function(){return new ds(Object(r.Xb)(vs))},token:ds,providedIn:"root"}),ds),ms=((fs=function(){function t(e,n,i){_classCallCheck(this,t),this._contentObserver=e,this._elementRef=n,this._ngZone=i,this.event=new r.n,this._disabled=!1,this._currentSubscription=null}return _createClass(t,[{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=de(t),this._disabled?this._unsubscribe():this._subscribe()}},{key:"debounce",get:function(){return this._debounce},set:function(t){this._debounce=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}(t),this._subscribe()}},{key:"ngAfterContentInit",value:function(){this._currentSubscription||this.disabled||this._subscribe()}},{key:"ngOnDestroy",value:function(){this._unsubscribe()}},{key:"_subscribe",value:function(){var t=this;this._unsubscribe();var e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular((function(){t._currentSubscription=(t.debounce?e.pipe(as(t.debounce)):e).subscribe(t.event)}))}},{key:"_unsubscribe",value:function(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||fs)(r.Ob(ys),r.Ob(r.l),r.Ob(r.z))},fs.\u0275dir=r.Jb({type:fs,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),fs),gs=((hs=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:hs}),hs.\u0275inj=r.Lb({factory:function(t){return new(t||hs)},providers:[vs]}),hs),_s=((ls=function(){function t(e){_classCallCheck(this,t),this._platform=e}return _createClass(t,[{key:"isDisabled",value:function(t){return t.hasAttribute("disabled")}},{key:"isVisible",value:function(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}},{key:"isTabbable",value:function(t){if(!this._platform.isBrowser)return!1;var e,n=function(t){try{return t.frameElement}catch(TI){return null}}((e=t).ownerDocument&&e.ownerDocument.defaultView||window);if(n){var r=n&&n.nodeName.toLowerCase();if(-1===ws(n))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===r)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(n))return!1}var i=t.nodeName.toLowerCase(),o=ws(t);if(t.hasAttribute("contenteditable"))return-1!==o;if("iframe"===i)return!1;if("audio"===i){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===i){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==i||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){var e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}},{key:"isFocusable",value:function(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){var e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||bs(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}]),t}()).\u0275fac=function(t){return new(t||ls)(r.Xb(mn))},ls.\u0275prov=Object(r.Kb)({factory:function(){return new ls(Object(r.Xb)(mn))},token:ls,providedIn:"root"}),ls);function bs(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;var e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function ws(t){if(!bs(t))return null;var e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}var ks,Cs,Ss=function(){function t(e,n,r,i){var o=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,t),this._element=e,this._checker=n,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=function(){return o.focusLastTabbableElement()},this.endAnchorListener=function(){return o.focusFirstTabbableElement()},this._enabled=!0,a||this.attachAnchors()}return _createClass(t,[{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}},{key:"destroy",value:function(){var t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}},{key:"attachAnchors",value:function(){var t=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular((function(){t._startAnchor||(t._startAnchor=t._createAnchor(),t._startAnchor.addEventListener("focus",t.startAnchorListener)),t._endAnchor||(t._endAnchor=t._createAnchor(),t._endAnchor.addEventListener("focus",t.endAnchorListener))})),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusInitialElement())}))}))}},{key:"focusFirstTabbableElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusFirstTabbableElement())}))}))}},{key:"focusLastTabbableElementWhenReady",value:function(){var t=this;return new Promise((function(e){t._executeOnStable((function(){return e(t.focusLastTabbableElement())}))}))}},{key:"_getRegionBoundary",value:function(t){for(var e=this._element.querySelectorAll("[cdk-focus-region-".concat(t,"], [cdkFocusRegion").concat(t,"], [cdk-focus-").concat(t,"]")),n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-"+t)?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(t,"', use 'cdkFocusRegion").concat(t,"' instead. The deprecated attribute will be removed in 8.0.0."),e[n]):e[n].hasAttribute("cdk-focus-region-"+t)&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(t,"', use 'cdkFocusRegion").concat(t,"' instead. The deprecated attribute will be removed in 8.0.0."),e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(){var t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Object(r.W)()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}},{key:"focusFirstTabbableElement",value:function(){var t=this._getRegionBoundary("start");return t&&t.focus(),!!t}},{key:"focusLastTabbableElement",value:function(){var t=this._getRegionBoundary("end");return t&&t.focus(),!!t}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}},{key:"_getLastTabbableElement",value:function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=e.length-1;n>=0;n--){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}},{key:"_createAnchor",value:function(){var t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}},{key:"_toggleAnchorTabIndex",value:function(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}},{key:"toggleAnchors",value:function(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}},{key:"_executeOnStable",value:function(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(Yn(1)).subscribe(t)}}]),t}(),Es=((Cs=function(){function t(e,n,r){_classCallCheck(this,t),this._checker=e,this._ngZone=n,this._document=r}return _createClass(t,[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Ss(t,this._checker,this._ngZone,this._document,e)}}]),t}()).\u0275fac=function(t){return new(t||Cs)(r.Xb(_s),r.Xb(r.z),r.Xb(u))},Cs.\u0275prov=Object(r.Kb)({factory:function(){return new Cs(Object(r.Xb)(_s),Object(r.Xb)(r.z),Object(r.Xb)(u))},token:Cs,providedIn:"root"}),Cs),Ts=((ks=function(){function t(e,n,r){_classCallCheck(this,t),this._elementRef=e,this._focusTrapFactory=n,this._previouslyFocusedElement=null,this._document=r,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}return _createClass(t,[{key:"enabled",get:function(){return this.focusTrap.enabled},set:function(t){this.focusTrap.enabled=de(t)}},{key:"autoCapture",get:function(){return this._autoCapture},set:function(t){this._autoCapture=de(t)}},{key:"ngOnDestroy",value:function(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}},{key:"ngAfterContentInit",value:function(){this.focusTrap.attachAnchors(),this.autoCapture&&(this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady())}},{key:"ngDoCheck",value:function(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}}]),t}()).\u0275fac=function(t){return new(t||ks)(r.Ob(r.l),r.Ob(Es),r.Ob(u))},ks.\u0275dir=r.Jb({type:ks,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"]}),ks);"undefined"!=typeof Element&&Element;var Os,xs,Is=new r.q("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),As=new r.q("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Ds=((xs=function(){function t(e,n,r,i){_classCallCheck(this,t),this._ngZone=n,this._defaultOptions=i,this._document=r,this._liveElement=e||this._createLiveElement()}return _createClass(t,[{key:"announce",value:function(t){for(var e,n,r,i=this,o=this._defaultOptions,a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return 1===s.length&&"number"==typeof s[0]?r=s[0]:(n=(e=_slicedToArray(s,2))[0],r=e[1]),this.clear(),clearTimeout(this._previousTimeout),n||(n=o&&o.politeness?o.politeness:"polite"),null==r&&o&&(r=o.duration),this._liveElement.setAttribute("aria-live",n),this._ngZone.runOutsideAngular((function(){return new Promise((function(e){clearTimeout(i._previousTimeout),i._previousTimeout=setTimeout((function(){i._liveElement.textContent=t,e(),"number"==typeof r&&(i._previousTimeout=setTimeout((function(){return i.clear()}),r))}),100)}))}))}},{key:"clear",value:function(){this._liveElement&&(this._liveElement.textContent="")}},{key:"ngOnDestroy",value:function(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}},{key:"_createLiveElement",value:function(){for(var t=this._document.getElementsByClassName("cdk-live-announcer-element"),e=this._document.createElement("div"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);return e.classList.add("cdk-live-announcer-element"),e.classList.add("cdk-visually-hidden"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),e}}]),t}()).\u0275fac=function(t){return new(t||xs)(r.Xb(Is,8),r.Xb(r.z),r.Xb(u),r.Xb(As,8))},xs.\u0275prov=Object(r.Kb)({factory:function(){return new xs(Object(r.Xb)(Is,8),Object(r.Xb)(r.z),Object(r.Xb)(u),Object(r.Xb)(As,8))},token:xs,providedIn:"root"}),xs),Ps=((Os=function(){function t(e,n,r,i){_classCallCheck(this,t),this._elementRef=e,this._liveAnnouncer=n,this._contentObserver=r,this._ngZone=i,this._politeness="off"}return _createClass(t,[{key:"politeness",get:function(){return this._politeness},set:function(t){var e=this;this._politeness="polite"===t||"assertive"===t?t:"off","off"===this._politeness?this._subscription&&(this._subscription.unsubscribe(),this._subscription=null):this._subscription||(this._subscription=this._ngZone.runOutsideAngular((function(){return e._contentObserver.observe(e._elementRef).subscribe((function(){var t=e._elementRef.nativeElement.textContent;t!==e._previousAnnouncedText&&(e._liveAnnouncer.announce(t,e._politeness),e._previousAnnouncedText=t)}))})))}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Os)(r.Ob(r.l),r.Ob(Ds),r.Ob(ys),r.Ob(r.z))},Os.\u0275dir=r.Jb({type:Os,selectors:[["","cdkAriaLive",""]],inputs:{politeness:["cdkAriaLive","politeness"]},exportAs:["cdkAriaLive"]}),Os);function Rs(t){return 0===t.buttons}var Ns,js=new r.q("cdk-focus-monitor-default-options"),Fs=wn({passive:!0,capture:!0}),Ms=((Ns=function(){function t(e,n,r,i){var o=this;_classCallCheck(this,t),this._ngZone=e,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=function(){o._lastTouchTarget=null,o._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(t){if(!o._lastTouchTarget){var e=Rs(t)?"keyboard":"mouse";o._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=function(t){null!=o._touchTimeoutId&&clearTimeout(o._touchTimeoutId),o._lastTouchTarget=Ls(t),o._touchTimeoutId=setTimeout((function(){return o._lastTouchTarget=null}),650)},this._windowFocusListener=function(){o._windowFocused=!0,o._windowFocusTimeoutId=setTimeout((function(){return o._windowFocused=!1}))},this._rootNodeFocusAndBlurListener=function(t){for(var e=Ls(t),n="focus"===t.type?o._onFocus:o._onBlur,r=e;r;r=r.parentElement)n.call(o,t,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}return _createClass(t,[{key:"monitor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._platform.isBrowser)return Object(ge.a)(null);var n=ye(t),r=function(t){if(function(){if(null==yn){var t="undefined"!=typeof document?document.head:null;yn=!(!t||!t.createShadowRoot&&!t.attachShadow)}return yn}()){var e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject.asObservable();var o={checkChildren:e,subject:new me.a,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject.asObservable()}},{key:"stopMonitoring",value:function(t){var e=ye(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}},{key:"focusVia",value:function(t,e,n){var r=ye(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)}},{key:"ngOnDestroy",value:function(){var t=this;this._elementInfo.forEach((function(e,n){return t.stopMonitoring(n)}))}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}},{key:"_getFocusOrigin",value:function(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}},{key:"_setClasses",value:function(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}},{key:"_setOriginForCurrentEventQueue",value:function(t){var e=this;this._ngZone.runOutsideAngular((function(){e._origin=t,0===e._detectionMode&&(e._originTimeoutId=setTimeout((function(){return e._origin=null}),1))}))}},{key:"_wasCausedByTouch",value:function(t){var e=Ls(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(t,e){var n=this._elementInfo.get(e);if(n&&(n.checkChildren||e===Ls(t))){var r=this._getFocusOrigin(t);this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}}},{key:"_onBlur",value:function(t,e){var n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(t,e){this._ngZone.run((function(){return t.next(e)}))}},{key:"_registerGlobalListeners",value:function(t){var e=this;if(this._platform.isBrowser){var n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular((function(){n.addEventListener("focus",e._rootNodeFocusAndBlurListener,Fs),n.addEventListener("blur",e._rootNodeFocusAndBlurListener,Fs)})),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular((function(){var t=e._getDocument(),n=e._getWindow();t.addEventListener("keydown",e._documentKeydownListener,Fs),t.addEventListener("mousedown",e._documentMousedownListener,Fs),t.addEventListener("touchstart",e._documentTouchstartListener,Fs),n.addEventListener("focus",e._windowFocusListener)}))}}},{key:"_removeGlobalListeners",value:function(t){var e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){var n=this._rootNodeFocusListenerCount.get(e);n>1?this._rootNodeFocusListenerCount.set(e,n-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Fs),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Fs),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){var r=this._getDocument(),i=this._getWindow();r.removeEventListener("keydown",this._documentKeydownListener,Fs),r.removeEventListener("mousedown",this._documentMousedownListener,Fs),r.removeEventListener("touchstart",this._documentTouchstartListener,Fs),i.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}]),t}()).\u0275fac=function(t){return new(t||Ns)(r.Xb(r.z),r.Xb(mn),r.Xb(u,8),r.Xb(js,8))},Ns.\u0275prov=Object(r.Kb)({factory:function(){return new Ns(Object(r.Xb)(r.z),Object(r.Xb)(mn),Object(r.Xb)(u,8),Object(r.Xb)(js,8))},token:Ns,providedIn:"root"}),Ns);function Ls(t){return t.composedPath?t.composedPath()[0]:t.target}var Vs,Us,qs,Bs=((qs=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._elementRef=e,this._focusMonitor=n,this.cdkFocusChange=new r.n,this._monitorSubscription=this._focusMonitor.monitor(this._elementRef,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe((function(t){return i.cdkFocusChange.emit(t)}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||qs)(r.Ob(r.l),r.Ob(Ms))},qs.\u0275dir=r.Jb({type:qs,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),qs),zs=((Us=function(){function t(e,n){_classCallCheck(this,t),this._platform=e,this._document=n}return _createClass(t,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);var e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(this._platform.isBrowser&&this._document.body){var t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");var e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}]),t}()).\u0275fac=function(t){return new(t||Us)(r.Xb(mn),r.Xb(u))},Us.\u0275prov=Object(r.Kb)({factory:function(){return new Us(Object(r.Xb)(mn),Object(r.Xb)(u))},token:Us,providedIn:"root"}),Us),Hs=((Vs=function t(e){_classCallCheck(this,t),e._applyBodyHighContrastModeCssClasses()}).\u0275mod=r.Mb({type:Vs}),Vs.\u0275inj=r.Lb({factory:function(t){return new(t||Vs)(r.Xb(zs))},imports:[[gn,gs]]}),Vs),Gs=new r.O("9.2.4"),Ws=function t(){_classCallCheck(this,t)};function Ks(t,e){return{type:7,name:t,definitions:e,options:{}}}function Qs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:e,timings:t}}function Ys(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:t,options:e}}function Xs(t){return{type:6,styles:t,offset:null}}function Zs(t,e,n){return{type:0,name:t,styles:e,options:n}}function Js(t){return{type:5,steps:t}}function $s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:t,animation:e,options:n}}function tu(t){Promise.resolve(null).then(t)}var eu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+n}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var t=this;tu((function(){return t._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(t){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}(),nu=function(){function t(e){var n=this;_classCallCheck(this,t),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var r=0,i=0,o=0,a=this.players.length;0==a?tu((function(){return n._onFinish()})):this.players.forEach((function(t){t.onDone((function(){++r==a&&n._onFinish()})),t.onDestroy((function(){++i==a&&n._onDestroy()})),t.onStart((function(){++o==a&&n._onStart()}))})),this.totalTime=this.players.reduce((function(t,e){return Math.max(t,e.totalTime)}),0)}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(t){return t.init()}))}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[])}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(t){return t.play()}))}},{key:"pause",value:function(){this.players.forEach((function(t){return t.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(t){return t.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(t){return t.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(t){return t.destroy()})),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(t){return t.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(t){var e=t*this.totalTime;this.players.forEach((function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)}))}},{key:"getPosition",value:function(){var t=0;return this.players.forEach((function(e){var n=e.getPosition();t=Math.min(n,t)})),t}},{key:"beforeDestroy",value:function(){this.players.forEach((function(t){t.beforeDestroy&&t.beforeDestroy()}))}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}();function ru(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function iu(t){switch(t.length){case 0:return new eu;case 1:return t[0];default:return new nu(t)}}function ou(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=[],s=[],u=-1,c=null;if(r.forEach((function(t){var n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach((function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case"!":s=i[n];break;case"*":s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}l[r]=s})),r||s.push(l),c=l,u=n})),a.length){var l="\n - ";throw new Error("Unable to animate due to the following errors:".concat(l).concat(a.join(l)))}return s}function au(t,e,n,r){switch(e){case"start":t.onStart((function(){return r(n&&su(n,"start",t))}));break;case"done":t.onDone((function(){return r(n&&su(n,"done",t))}));break;case"destroy":t.onDestroy((function(){return r(n&&su(n,"destroy",t))}))}}function su(t,e,n){var r=n.totalTime,i=uu(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function uu(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function cu(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function lu(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var hu=function(t,e){return!1},fu=function(t,e){return!1},du=function(t,e,n){return[]},pu=ru();(pu||"undefined"!=typeof Element)&&(hu=function(t,e){return t.contains(e)},fu=function(){if(pu||Element.prototype.matches)return function(t,e){return t.matches(e)};var t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?function(t,n){return e.apply(t,[n])}:fu}(),du=function(t,e,n){var r=[];if(n)r.push.apply(r,_toConsumableArray(t.querySelectorAll(e)));else{var i=t.querySelector(e);i&&r.push(i)}return r});var vu=null,yu=!1;function mu(t){vu||(vu=("undefined"!=typeof document?document.body:null)||{},yu=!!vu.style&&"WebkitAppearance"in vu.style);var e=!0;return vu.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(!(e=t in vu.style)&&yu)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in vu.style),e}var gu=fu,_u=hu,bu=du;function wu(t){var e={};return Object.keys(t).forEach((function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]})),e}var ku,Cu=((ku=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return mu(t)}},{key:"matchesElement",value:function(t,e){return gu(t,e)}},{key:"containsElement",value:function(t,e){return _u(t,e)}},{key:"query",value:function(t,e,n){return bu(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return n||""}},{key:"animate",value:function(t,e,n,r,i){return arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&arguments[6],new eu(n,r)}}]),t}()).\u0275fac=function(t){return new(t||ku)},ku.\u0275prov=r.Kb({token:ku,factory:ku.\u0275fac}),ku),Su=function(){var t=function t(){_classCallCheck(this,t)};return t.NOOP=new Cu,t}();function Eu(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Tu(parseFloat(e[1]),e[2])}function Tu(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Ou(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'.concat(t,'" is invalid.')),{duration:0,delay:0,easing:""};r=Tu(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=Tu(parseFloat(s),a[4]));var u=a[5];u&&(o=u)}else r=t;if(!n){var c=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&e.splice(l,0,'The provided timing value "'.concat(t,'" is invalid.'))}return{duration:r,delay:i,easing:o}}(t,e,n)}function xu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function Iu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r in t)n[r]=t[r];else xu(t,n);return n}function Au(t,e,n){return n?e+":"+n+";":""}function Du(t){for(var e="",n=0;n<t.style.length;n++){var r=t.style.item(n);e+=Au(0,r,t.style.getPropertyValue(r))}for(var i in t.style)t.style.hasOwnProperty(i)&&!i.startsWith("_")&&(e+=Au(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[i]));t.setAttribute("style",e)}function Pu(t,e,n){t.style&&(Object.keys(e).forEach((function(r){var i=Uu(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]})),ru()&&Du(t))}function Ru(t,e){t.style&&(Object.keys(e).forEach((function(e){var n=Uu(e);t.style[n]=""})),ru()&&Du(t))}function Nu(t){return Array.isArray(t)?1==t.length?t[0]:Ys(t):t}var ju=new RegExp("{{\\s*(.+?)\\s*}}","g");function Fu(t){var e=[];if("string"==typeof t){for(var n;n=ju.exec(t);)e.push(n[1]);ju.lastIndex=0}return e}function Mu(t,e,n){var r=t.toString(),i=r.replace(ju,(function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()}));return i==r?t:i}function Lu(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var Vu=/-+([a-z0-9])/g;function Uu(t){return t.replace(Vu,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[1].toUpperCase()}))}function qu(t,e){return 0===t||0===e}function Bu(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach((function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]})),o.length)for(var a=function(){var n=e[s];o.forEach((function(e){n[e]=Hu(t,e)}))},s=1;s<e.length;s++)a()}return e}function zu(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Hu(t,e){return window.getComputedStyle(t)[e]}var Gu=new Set(["true","1"]),Wu=new Set(["false","0"]);function Ku(t,e){var n=Gu.has(t)||Wu.has(t),r=Gu.has(e)||Wu.has(e);return function(i,o){var a="*"==t||t==i,s="*"==e||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?Gu.has(t):Wu.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?Gu.has(e):Wu.has(e)),a&&s}}var Qu=new RegExp("s*:selfs*,?","g");function Yu(t,e,n){return new Xu(t).build(e,n)}var Xu=function(){function t(e){_classCallCheck(this,t),this._driver=e}return _createClass(t,[{key:"build",value:function(t,e){var n=new Zu(e);return this._resetContextStyleTimingState(n),zu(this,Nu(t),n)}},{key:"_resetContextStyleTimingState",value:function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}},{key:"visitTrigger",value:function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach((function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.toString().split(/\s*,\s*/).forEach((function(t){s.name=t,o.push(n.visitState(s,e))})),s.name=u}else if(1==t.type){var c=n.visitTransition(t,e);r+=c.queryCount,i+=c.depCount,a.push(c)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach((function(t){if(Ju(t)){var e=t;Object.keys(e).forEach((function(t){Fu(e[t]).forEach((function(t){o.hasOwnProperty(t)||i.add(t)}))}))}})),i.size){var a=Lu(i.values());e.errors.push('state("'.concat(t.name,'", ...) must define default values for all the following style substitutions: ').concat(a.join(", ")))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=zu(this,Nu(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach((function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'.concat(t,'" is not supported')),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(t,'" is not supported')),e;var o=i[1],a=i[2],s=i[3];e.push(Ku(o,s)),"<"!=a[0]||"*"==o&&"*"==s||e.push(Ku(s,o))}(t,i,r)})):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:$u(t.options)}}},{key:"visitSequence",value:function(t,e){var n=this;return{type:2,steps:t.steps.map((function(t){return zu(n,t,e)})),options:$u(t.options)}}},{key:"visitGroup",value:function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map((function(t){e.currentTime=r;var o=zu(n,t,e);return i=Math.max(i,e.currentTime),o}));return e.currentTime=i,{type:3,steps:o,options:$u(t.options)}}},{key:"visitAnimate",value:function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return tc(Ou(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some((function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)}))){var i=tc(0,0,"");return i.dynamic=!0,i.strValue=r,i}return tc((n=n||Ou(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:Xs({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=Xs(s)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}},{key:"_makeStyleAst",value:function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach((function(t){"string"==typeof t?"*"==t?n.push(t):e.errors.push("The provided style string value ".concat(t," is not allowed.")):n.push(t)})):n.push(t.styles);var r=!1,i=null;return n.forEach((function(t){if(Ju(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}})),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach((function(t){"string"!=typeof t&&Object.keys(t).forEach((function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,c,l,h=e.collectedStyles[e.currentQuerySelector],f=h[r],d=!0;f&&(o!=i&&o>=f.startTime&&i<=f.endTime&&(e.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(f.startTime,'ms" and "').concat(f.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(i,'ms"')),d=!1),o=f.startTime),d&&(h[r]={startTime:o,endTime:i}),e.options&&(a=t[r],s=e.options,u=e.errors,c=s.params||{},(l=Fu(a)).length&&l.forEach((function(t){c.hasOwnProperty(t)||u.push("Unable to resolve the local animation param ".concat(t," in the given list of values"))})))}else e.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))}))}))}},{key:"visitKeyframes",value:function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,c=t.steps.map((function(t){var r=n._makeStyleAst(t,e),c=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach((function(t){if(Ju(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}}));else if(Ju(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),s=s||l<0||l>1,a=a||l<u,u=l,o.push(l),r}));s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var l=t.steps.length,h=0;i>0&&i<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,d=e.currentTime,p=e.currentAnimateTimings,v=p.duration;return c.forEach((function(t,i){var a=h>0?i==f?1:h*i:o[i],s=a*v;e.currentTime=d+p.delay+s,p.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)})),r}},{key:"visitReference",value:function(t,e){return{type:8,animation:zu(this,Nu(t.animation),e),options:$u(t.options)}}},{key:"visitAnimateChild",value:function(t,e){return e.depCount++,{type:9,options:$u(t.options)}}},{key:"visitAnimateRef",value:function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:$u(t.options)}}},{key:"visitQuery",value:function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;var i=_slicedToArray(function(t){var e=!!t.split(/\s*,\s*/).find((function(t){return":self"==t}));return e&&(t=t.replace(Qu,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(t){return".ng-trigger-"+t.substr(1)})).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),o=i[0],a=i[1];e.currentQuerySelector=n.length?n+" "+o:o,cu(e.collectedStyles,e.currentQuerySelector,{});var s=zu(this,Nu(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:t.selector,options:$u(t.options)}}},{key:"visitStagger",value:function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Ou(t.timings,e.errors,!0);return{type:12,animation:zu(this,Nu(t.animation),e),timings:n,options:null}}}]),t}(),Zu=function t(e){_classCallCheck(this,t),this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function Ju(t){return!Array.isArray(t)&&"object"==typeof t}function $u(t){var e;return t?(t=xu(t)).params&&(t.params=(e=t.params)?xu(e):null):t={},t}function tc(t,e,n){return{duration:t,delay:e,easing:n}}function ec(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var nc=function(){function t(){_classCallCheck(this,t),this._map=new Map}return _createClass(t,[{key:"consume",value:function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e}},{key:"append",value:function(t,e){var n,r=this._map.get(t);r||this._map.set(t,r=[]),(n=r).push.apply(n,_toConsumableArray(e))}},{key:"has",value:function(t){return this._map.has(t)}},{key:"clear",value:function(){this._map.clear()}}]),t}(),rc=new RegExp(":enter","g"),ic=new RegExp(":leave","g");function oc(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new ac).buildKeyframes(t,e,n,r,i,o,a,s,u,c)}var ac=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"buildKeyframes",value:function(t,e,n,r,i,o,a,s,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new nc;var l=new uc(t,e,u,r,i,c,[]);l.options=s,l.currentTimeline.setStyles([o],null,l.errors,s),zu(this,n,l);var h=l.timelines.filter((function(t){return t.containsAnimation()}));if(h.length&&Object.keys(a).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,l.errors,s)}return h.length?h.map((function(t){return t.buildKeyframes()})):[ec(e,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(t,e){}},{key:"visitState",value:function(t,e){}},{key:"visitTransition",value:function(t,e){}},{key:"visitAnimateChild",value:function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}},{key:"visitAnimateRef",value:function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}},{key:"_visitSubInstructions",value:function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?Eu(n.duration):null,o=null!=n.delay?Eu(n.delay):null;return 0!==i&&t.forEach((function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)})),r}},{key:"visitReference",value:function(t,e){e.updateOptions(t.options,!0),zu(this,t.animation,e),e.previousNode=t}},{key:"visitSequence",value:function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=sc);var a=Eu(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach((function(t){return zu(n,t,i)})),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}},{key:"visitGroup",value:function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Eu(t.options.delay):0;t.steps.forEach((function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),zu(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)})),r.forEach((function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)})),e.transformIntoNewTimeline(i),e.previousNode=t}},{key:"_visitTiming",value:function(t,e){if(t.dynamic){var n=t.strValue;return Ou(e.params?Mu(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}},{key:"visitAnimate",value:function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}},{key:"visitStyle",value:function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}},{key:"visitKeyframes",value:function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach((function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()})),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}},{key:"visitQuery",value:function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Eu(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=sc);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach((function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(u=s.currentTimeline),zu(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)})),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}},{key:"visitStagger",value:function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var c=u.currentTime;zu(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}]),t}(),sc={},uc=function(){function t(e,n,r,i,o,a,s,u){_classCallCheck(this,t),this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new cc(this._driver,n,0),s.push(this.currentTimeline)}return _createClass(t,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=Eu(r.duration)),null!=r.delay&&(i.delay=Eu(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach((function(t){e&&a.hasOwnProperty(t)||(a[t]=Mu(o[t],a,n.errors))}))}}}},{key:"_copyOptions",value:function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach((function(t){n[t]=e[t]}))}}return t}},{key:"createSubContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(t){return this.previousNode=sc,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new lc(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}},{key:"delayNextStep",value:function(t){t>0&&this.currentTimeline.delayNextStep(t)}},{key:"invokeQuery",value:function(t,e,n,r,i,o){var a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(rc,"."+this._enterClassName)).replace(ic,"."+this._leaveClassName);var s=this._driver.query(this.element,t,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,_toConsumableArray(s))}return i||0!=a.length||o.push('`query("'.concat(e,'")` returned zero elements. (Use `query("').concat(e,'", { optional: true })` if you wish to allow this.)')),a}}]),t}(),cc=function(){function t(e,n,r,i){_classCallCheck(this,t),this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _createClass(t,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}},{key:"fork",value:function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}},{key:"_updateStyle",value:function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach((function(t){e._backFill[t]=e._globalTimelineStyles[t]||"*",e._currentKeyframe[t]="*"})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach((function(t){"*"===t?(n=n||Object.keys(e)).forEach((function(t){r[t]="*"})):Iu(t,!1,r)})),r}(t,this._globalTimelineStyles);Object.keys(a).forEach((function(t){var e=Mu(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:"*"),i._updateStyle(t,e)}))}},{key:"applyStylesToKeyframe",value:function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach((function(n){t._currentKeyframe[n]=e[n]})),Object.keys(this._localTimelineStyles).forEach((function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])})))}},{key:"snapshotCurrentStyles",value:function(){var t=this;Object.keys(this._localTimelineStyles).forEach((function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t}},{key:"mergeTimelineCollectedStyles",value:function(t){var e=this;Object.keys(t._styleSummary).forEach((function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)}))}},{key:"buildKeyframes",value:function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach((function(o,a){var s=Iu(o,!0);Object.keys(s).forEach((function(t){var r=s[t];"!"==r?e.add(t):"*"==r&&n.add(t)})),r||(s.offset=a/t.duration),i.push(s)}));var o=e.size?Lu(e.values()):[],a=n.size?Lu(n.values()):[];if(r){var s=i[0],u=xu(s);s.offset=0,u.offset=1,i=[s,u]}return ec(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}}]),t}(),lc=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a,s){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return _classCallCheck(this,n),(u=e.call(this,t,r,s.delay)).element=r,u.keyframes=i,u.preStyleProps=o,u.postStyleProps=a,u._stretchStartingKeyframe=c,u.timings={duration:s.duration,delay:s.delay,easing:s.easing},u}return _createClass(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=Iu(t[0],!1);u.offset=0,o.push(u);var c=Iu(t[0],!1);c.offset=hc(s),o.push(c);for(var l=t.length-1,h=1;h<=l;h++){var f=Iu(t[h],!1);f.offset=hc((n+f.offset*r)/a),o.push(f)}r=a,n=0,i="",t=o}return ec(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(cc);function hc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,e-1);return Math.round(t*n)/n}var fc=function t(){_classCallCheck(this,t)},dc=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"normalizePropertyName",value:function(t,e){return Uu(t)}},{key:"normalizeStyleValue",value:function(t,e,n,r){var i="",o=n.toString().trim();if(pc[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for ".concat(t,":").concat(n))}return o+i}}]),n}(fc),pc=function(t){var e={};return t.forEach((function(t){return e[t]=!0})),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function vc(t,e,n,r,i,o,a,s,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var yc={},mc=function(){function t(e,n,r){_classCallCheck(this,t),this._triggerName=e,this.ast=n,this._stateStyles=r}return _createClass(t,[{key:"match",value:function(t,e,n,r){return function(t,e,n,r,i){return t.some((function(t){return t(e,n,r,i)}))}(this.ast.matchers,t,e,n,r)}},{key:"buildStyles",value:function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}},{key:"build",value:function(t,e,n,r,i,o,a,s,u,c){var l=[],h=this.ast.options&&this.ast.options.params||yc,f=this.buildStyles(n,a&&a.params||yc,l),d=s&&s.params||yc,p=this.buildStyles(r,d,l),v=new Set,y=new Map,m=new Map,g="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:oc(t,e,this.ast.animation,i,o,f,p,_,u,l),w=0;if(b.forEach((function(t){w=Math.max(t.duration+t.delay,w)})),l.length)return vc(e,this._triggerName,n,r,g,f,p,[],[],y,m,w,l);b.forEach((function(t){var n=t.element,r=cu(y,n,{});t.preStyleProps.forEach((function(t){return r[t]=!0}));var i=cu(m,n,{});t.postStyleProps.forEach((function(t){return i[t]=!0})),n!==e&&v.add(n)}));var k=Lu(v.values());return vc(e,this._triggerName,n,r,g,f,p,b,k,y,m,w)}}]),t}(),gc=function(){function t(e,n){_classCallCheck(this,t),this.styles=e,this.defaultParams=n}return _createClass(t,[{key:"buildStyles",value:function(t,e){var n={},r=xu(this.defaultParams);return Object.keys(t).forEach((function(e){var n=t[e];null!=n&&(r[e]=n)})),this.styles.styles.forEach((function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach((function(t){var o=i[t];o.length>1&&(o=Mu(o,r,e)),n[t]=o}))}})),n}}]),t}(),_c=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach((function(t){r.states[t.name]=new gc(t.style,t.options&&t.options.params||{})})),bc(this.states,"true","1"),bc(this.states,"false","0"),n.transitions.forEach((function(t){r.transitionFactories.push(new mc(e,t,r.states))})),this.fallbackTransition=new mc(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _createClass(t,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(t,e,n,r){return this.transitionFactories.find((function(i){return i.match(t,e,n,r)}))||null}},{key:"matchStyles",value:function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}]),t}();function bc(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var wc=new nc,kc=function(){function t(e,n,r){_classCallCheck(this,t),this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return _createClass(t,[{key:"register",value:function(t,e){var n=[],r=Yu(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}},{key:"_buildPlayer",value:function(t,e,n){var r=t.element,i=ou(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}},{key:"create",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],a=this._animations[t],s=new Map;if(a?(n=oc(this._driver,e,a,"ng-enter","ng-leave",{},{},i,wc,o)).forEach((function(t){var e=cu(s,t.element,{});t.postStyleProps.forEach((function(t){return e[t]=null}))})):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));s.forEach((function(t,e){Object.keys(t).forEach((function(n){t[n]=r._driver.computeStyle(e,n,"*")}))}));var u=iu(n.map((function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)})));return this._playersById[t]=u,u.onDestroy((function(){return r.destroy(t)})),this.players.push(u),u}},{key:"destroy",value:function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}},{key:"listen",value:function(t,e,n,r){var i=uu(e,"","","");return au(this._getPlayer(t),n,i,r),function(){}}},{key:"command",value:function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])}}]),t}(),Cc=[],Sc={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ec={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,t),this.namespaceId=n;var r,i=e&&e.hasOwnProperty("value");if(this.value=null!=(r=i?e.value:e)?r:null,i){var o=xu(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return _createClass(t,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach((function(t){null==n[t]&&(n[t]=e[t])}))}}}]),t}(),Oc=new Tc("void"),xc=function(){function t(e,n,r){_classCallCheck(this,t),this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,jc(n,this._hostClassName)}return _createClass(t,[{key:"listen",value:function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(e,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(e,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(e,'" is not supported!'));var a=cu(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var u=cu(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(jc(t,"ng-trigger"),jc(t,"ng-trigger-"+e),u[e]=Oc),function(){o._engine.afterFlush((function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]}))}}},{key:"register",value:function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}},{key:"_getTrigger",value:function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'.concat(t,'" has not been registered!'));return e}},{key:"trigger",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(e),a=new Ac(this.id,e,t),s=this._engine.statesByElement.get(t);s||(jc(t,"ng-trigger"),jc(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],c=new Tc(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),s[e]=c,u||(u=Oc),"void"===c.value||u.value!==c.value){var l=cu(this._engine.playersByElement,t,[]);l.forEach((function(t){t.namespaceId==r.id&&t.triggerName==e&&t.queued&&t.destroy()}));var h=o.matchTransition(u.value,c.value,t,c.params),f=!1;if(!h){if(!i)return;h=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:c,player:a,isFallbackTransition:f}),f||(jc(t,"ng-animate-queued"),a.onStart((function(){Fc(t,"ng-animate-queued")}))),a.onDone((function(){var e=r.players.indexOf(a);e>=0&&r.players.splice(e,1);var n=r._engine.playersByElement.get(t);if(n){var i=n.indexOf(a);i>=0&&n.splice(i,1)}})),this.players.push(a),l.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,c.params)){var d=[],p=o.matchStyles(u.value,u.params,d),v=o.matchStyles(c.value,c.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush((function(){Ru(t,p),Pu(t,v)}))}}},{key:"deregister",value:function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach((function(e,n){delete e[t]})),this._elementListeners.forEach((function(n,r){e._elementListeners.set(r,n.filter((function(e){return e.name!=t})))}))}},{key:"clearElementCache",value:function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach((function(t){return t.destroy()})),this._engine.playersByElement.delete(t))}},{key:"_signalRemovalForInnerTriggers",value:function(t,e){var n=this,r=this._engine.driver.query(t,".ng-trigger",!0);r.forEach((function(t){if(!t.__ng_removed){var r=n._engine.fetchNamespacesByElement(t);r.size?r.forEach((function(n){return n.triggerLeaveAnimation(t,e,!1,!0)})):n.clearElementCache(t)}})),this._engine.afterFlushAnimationsDone((function(){return r.forEach((function(t){return n.clearElementCache(t)}))}))}},{key:"triggerLeaveAnimation",value:function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach((function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}})),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&iu(a).onDone((function(){return i._engine.processLeaveNode(t)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(t){var e=this,n=this._elementListeners.get(t);if(n){var r=new Set;n.forEach((function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=e._triggers[i].fallbackTransition,a=e._engine.statesByElement.get(t)[i]||Oc,s=new Tc("void"),u=new Ac(e.id,i,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:i,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{var s=t.__ng_removed;s&&s!==Sc||(r.afterFlush((function(){return n.clearElementCache(t)})),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}}},{key:"insertNode",value:function(t,e){jc(t,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(t){var e=this,n=[];return this._queue.forEach((function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach((function(e){if(e.name==r.triggerName){var n=uu(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,au(r.player,e.phase,n,e.callback)}})),i.markedForDestroy?e._engine.afterFlush((function(){i.destroy()})):n.push(r)}})),this._queue=[],n.sort((function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1}))}},{key:"destroy",value:function(t){this.players.forEach((function(t){return t.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,t)}},{key:"elementContainsData",value:function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find((function(e){return e.element===t}))||e}}]),t}(),Ic=function(){function t(e,n,r){_classCallCheck(this,t),this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return _createClass(t,[{key:"_onRemovalComplete",value:function(t,e){this.onRemovalComplete(t,e)}},{key:"queuedPlayers",get:function(){var t=[];return this._namespaceList.forEach((function(e){e.players.forEach((function(e){e.queued&&t.push(e)}))})),t}},{key:"createNamespace",value:function(t,e){var n=new xc(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}},{key:"_balanceNamespaceList",value:function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}},{key:"register",value:function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}},{key:"registerTrigger",value:function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}},{key:"destroy",value:function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush((function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)})),this.afterFlushAnimationsDone((function(){return r.destroy(e)}))}}},{key:"_fetchNamespace",value:function(t){return this._namespaceLookup[t]}},{key:"fetchNamespacesByElement",value:function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e}},{key:"trigger",value:function(t,e,n,r){if(Dc(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}},{key:"insertNode",value:function(t,e,n,r){if(Dc(e)){var i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}}},{key:"collectEnterElement",value:function(t){this.collectedEnterElements.push(t)}},{key:"markElementAsDisabled",value:function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),jc(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Fc(t,"ng-animate-disabled"))}},{key:"removeNode",value:function(t,e,n,r){if(Dc(e)){var i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){var o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}},{key:"markElementAsRemoved",value:function(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(t,e,n,r,i){return Dc(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}}},{key:"_buildInstruction",value:function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}},{key:"destroyInnerAnimations",value:function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach((function(t){return e.destroyActiveAnimationsForElement(t)})),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach((function(t){return e.finishActiveQueriedAnimationOnElement(t)}))}},{key:"destroyActiveAnimationsForElement",value:function(t){var e=this.playersByElement.get(t);e&&e.forEach((function(t){t.queued?t.markedForDestroy=!0:t.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach((function(t){return t.finish()}))}},{key:"whenRenderingDone",value:function(){var t=this;return new Promise((function(e){if(t.players.length)return iu(t.players).onDone((function(){return e()}));e()}))}},{key:"processLeaveNode",value:function(t){var e=this,n=t.__ng_removed;if(n&&n.setForRemoval){if(t.__ng_removed=Sc,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach((function(t){e.markElementAsDisabled(t,!1)}))}},{key:"flush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(e,n){return t._balanceNamespaceList(e,n)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)jc(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,e)}finally{for(var o=0;o<i.length;o++)i[o]()}}else for(var a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(t){return t()})),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?iu(n).onDone((function(){s.forEach((function(t){return t()}))})):s.forEach((function(t){return t()}))}}},{key:"reportError",value:function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}},{key:"_flushAnimations",value:function(t,e){var n=this,r=new nc,i=[],o=new Map,a=[],s=new Map,u=new Map,c=new Map,l=new Set;this.disabledNodes.forEach((function(t){l.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)l.add(e[r])}));var h=this.bodyNode,f=Array.from(this.statesByElement.keys()),d=Nc(f,this.collectedEnterElements),p=new Map,v=0;d.forEach((function(t,e){var n="ng-enter"+v++;p.set(e,n),t.forEach((function(t){return jc(t,n)}))}));for(var y=[],m=new Set,g=new Set,_=0;_<this.collectedLeaveElements.length;_++){var b=this.collectedLeaveElements[_],w=b.__ng_removed;w&&w.setForRemoval&&(y.push(b),m.add(b),w.hasAnimation?this.driver.query(b,".ng-star-inserted",!0).forEach((function(t){return m.add(t)})):g.add(b))}var k=new Map,C=Nc(f,Array.from(m));C.forEach((function(t,e){var n="ng-leave"+v++;k.set(e,n),t.forEach((function(t){return jc(t,n)}))})),t.push((function(){d.forEach((function(t,e){var n=p.get(e);t.forEach((function(t){return Fc(t,n)}))})),C.forEach((function(t,e){var n=k.get(e);t.forEach((function(t){return Fc(t,n)}))})),y.forEach((function(t){n.processLeaveNode(t)}))}));for(var S=[],E=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach((function(t){var e=t.player,o=t.element;if(S.push(e),n.collectedEnterElements.length){var l=o.__ng_removed;if(l&&l.setForMove)return void e.destroy()}var f=!h||!n.driver.containsElement(h,o),d=k.get(o),v=p.get(o),y=n._buildInstruction(t,r,v,d,f);if(y.errors&&y.errors.length)E.push(y);else{if(f)return e.onStart((function(){return Ru(o,y.fromStyles)})),e.onDestroy((function(){return Pu(o,y.toStyles)})),void i.push(e);if(t.isFallbackTransition)return e.onStart((function(){return Ru(o,y.fromStyles)})),e.onDestroy((function(){return Pu(o,y.toStyles)})),void i.push(e);y.timelines.forEach((function(t){return t.stretchStartingKeyframe=!0})),r.append(o,y.timelines),a.push({instruction:y,player:e,element:o}),y.queriedElements.forEach((function(t){return cu(s,t,[]).push(e)})),y.preStyleProps.forEach((function(t,e){var n=Object.keys(t);if(n.length){var r=u.get(e);r||u.set(e,r=new Set),n.forEach((function(t){return r.add(t)}))}})),y.postStyleProps.forEach((function(t,e){var n=Object.keys(t),r=c.get(e);r||c.set(e,r=new Set),n.forEach((function(t){return r.add(t)}))}))}}));if(E.length){var O=[];E.forEach((function(t){O.push("@".concat(t.triggerName," has failed due to:\n")),t.errors.forEach((function(t){return O.push("- ".concat(t,"\n"))}))})),S.forEach((function(t){return t.destroy()})),this.reportError(O)}var x=new Map,I=new Map;a.forEach((function(t){var e=t.element;r.has(e)&&(I.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,x))})),i.forEach((function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach((function(t){cu(x,e,[]).push(t),t.destroy()}))}));var A=y.filter((function(t){return Lc(t,u,c)})),D=new Map;Rc(D,this.driver,g,c,"*").forEach((function(t){Lc(t,u,c)&&A.push(t)}));var P=new Map;d.forEach((function(t,e){Rc(P,n.driver,new Set(t),u,"!")})),A.forEach((function(t){var e=D.get(t),n=P.get(t);D.set(t,Object.assign(Object.assign({},e),n))}));var R=[],N=[],j={};a.forEach((function(t){var e=t.element,a=t.player,s=t.instruction;if(r.has(e)){if(l.has(e))return a.onDestroy((function(){return Pu(e,s.toStyles)})),a.disabled=!0,a.overrideTotalTime(s.totalTime),void i.push(a);var u=j;if(I.size>1){for(var c=e,h=[];c=c.parentNode;){var f=I.get(c);if(f){u=f;break}h.push(c)}h.forEach((function(t){return I.set(t,u)}))}var d=n._buildAnimation(a.namespaceId,s,x,o,P,D);if(a.setRealPlayer(d),u===j)R.push(a);else{var p=n.playersByElement.get(u);p&&p.length&&(a.parentPlayer=iu(p)),i.push(a)}}else Ru(e,s.fromStyles),a.onDestroy((function(){return Pu(e,s.toStyles)})),N.push(a),l.has(e)&&i.push(a)})),N.forEach((function(t){var e=o.get(t.element);if(e&&e.length){var n=iu(e);t.setRealPlayer(n)}})),i.forEach((function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()}));for(var F=0;F<y.length;F++){var M=y[F],L=M.__ng_removed;if(Fc(M,"ng-leave"),!L||!L.hasAnimation){var V=[];if(s.size){var U=s.get(M);U&&U.length&&V.push.apply(V,_toConsumableArray(U));for(var q=this.driver.query(M,".ng-animating",!0),B=0;B<q.length;B++){var z=s.get(q[B]);z&&z.length&&V.push.apply(V,_toConsumableArray(z))}}var H=V.filter((function(t){return!t.destroyed}));H.length?Mc(this,M,H):this.processLeaveNode(M)}}return y.length=0,R.forEach((function(t){n.players.push(t),t.onDone((function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)})),t.play()})),R}},{key:"elementContainsData",value:function(t,e){var n=!1,r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}},{key:"afterFlush",value:function(t){this._flushFns.push(t)}},{key:"afterFlushAnimationsDone",value:function(t){this._whenQuietFns.push(t)}},{key:"_getPreviousPlayers",value:function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!i||"void"==i;s.forEach((function(t){t.queued||(u||t.triggerName==r)&&o.push(t)}))}}return(n||r)&&(o=o.filter((function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)}))),o}},{key:"_beforeAnimationBuild",value:function(t,e,n){var r,i=this,o=e.element,a=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName,u=_createForOfIteratorHelper(e.timelines);try{var c=function(){var t=r.value.element,u=t!==o,c=cu(n,t,[]);i._getPreviousPlayers(t,u,a,s,e.toState).forEach((function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)}))};for(u.s();!(r=u.n()).done;)c()}catch(l){u.e(l)}finally{u.f()}Ru(o,e.fromStyles)}},{key:"_buildAnimation",value:function(t,e,n,r,i,o){var a=this,s=e.triggerName,u=e.element,c=[],l=new Set,h=new Set,f=e.timelines.map((function(e){var f=e.element;l.add(f);var d=f.__ng_removed;if(d&&d.removedBeforeQueried)return new eu(e.duration,e.delay);var p,v,y=f!==u,m=(p=(n.get(f)||Cc).map((function(t){return t.getRealPlayer()})),v=[],function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof nu?t(i.players,n):n.push(i)}}(p,v),v).filter((function(t){return!!t.element&&t.element===f})),g=i.get(f),_=o.get(f),b=ou(0,a._normalizer,0,e.keyframes,g,_),w=a._buildPlayer(e,b,m);if(e.subTimeline&&r&&h.add(f),y){var k=new Ac(t,s,f);k.setRealPlayer(w),c.push(k)}return w}));c.forEach((function(t){cu(a.playersByQueriedElement,t.element,[]).push(t),t.onDone((function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete t[e]}return r}(a.playersByQueriedElement,t.element,t)}))})),l.forEach((function(t){return jc(t,"ng-animating")}));var d=iu(f);return d.onDestroy((function(){l.forEach((function(t){return Fc(t,"ng-animating")})),Pu(u,e.toStyles)})),h.forEach((function(t){cu(r,t,[]).push(d)})),d}},{key:"_buildPlayer",value:function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new eu(t.duration,t.delay)}}]),t}(),Ac=function(){function t(e,n,r){_classCallCheck(this,t),this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new eu,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _createClass(t,[{key:"setRealPlayer",value:function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach((function(n){e._queuedCallbacks[n].forEach((function(e){return au(t,n,void 0,e)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(t){this.totalTime=t}},{key:"syncPlayerEvents",value:function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart((function(){return n.triggerCallback("start")})),t.onDone((function(){return e.finish()})),t.onDestroy((function(){return e.destroy()}))}},{key:"_queueEvent",value:function(t,e){cu(this._queuedCallbacks,t,[]).push(e)}},{key:"onDone",value:function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}},{key:"onStart",value:function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}},{key:"onDestroy",value:function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(t){this.queued||this._player.setPosition(t)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)}}]),t}();function Dc(t){return t&&1===t.nodeType}function Pc(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function Rc(t,e,n,r,i){var o=[];n.forEach((function(t){return o.push(Pc(t))}));var a=[];r.forEach((function(n,r){var o={};n.forEach((function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Ec,a.push(r))})),t.set(r,o)}));var s=0;return n.forEach((function(t){return Pc(t,o[s++])})),a}function Nc(t,e){var n=new Map;if(t.forEach((function(t){return n.set(t,[])})),0==e.length)return n;var r=new Set(e),i=new Map;return e.forEach((function(t){var e=function t(e){if(!e)return 1;var o=i.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:r.has(a)?1:t(a),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)})),n}function jc(t,e){if(t.classList)t.classList.add(e);else{var n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Fc(t,e){if(t.classList)t.classList.remove(e);else{var n=t.$$classes;n&&delete n[e]}}function Mc(t,e,n){iu(n).onDone((function(){return t.processLeaveNode(e)}))}function Lc(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach((function(t){return i.add(t)})):e.set(t,r),n.delete(t),!0}var Vc=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new Ic(e,n,r),this._timelineEngine=new kc(e,n,r),this._transitionEngine.onRemovalComplete=function(t,e){return i.onRemovalComplete(t,e)}}return _createClass(t,[{key:"registerTrigger",value:function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=Yu(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));a=function(t,e){return new _c(t,e)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}},{key:"register",value:function(t,e){this._transitionEngine.register(t,e)}},{key:"destroy",value:function(t,e){this._transitionEngine.destroy(t,e)}},{key:"onInsert",value:function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}},{key:"onRemove",value:function(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}},{key:"disableAnimations",value:function(t,e){this._transitionEngine.markElementAsDisabled(t,e)}},{key:"process",value:function(t,e,n,r){if("@"==n.charAt(0)){var i=_slicedToArray(lu(n),2),o=i[0],a=i[1];this._timelineEngine.command(o,e,a,r)}else this._transitionEngine.trigger(t,e,n,r)}},{key:"listen",value:function(t,e,n,r,i){if("@"==n.charAt(0)){var o=_slicedToArray(lu(n),2),a=o[0],s=o[1];return this._timelineEngine.listen(a,e,s,i)}return this._transitionEngine.listen(t,e,n,r,i)}},{key:"flush",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(t)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),t}();function Uc(t,e){var n=null,r=null;return Array.isArray(e)&&e.length?(n=Bc(e[0]),e.length>1&&(r=Bc(e[e.length-1]))):e&&(n=Bc(e)),n||r?new qc(t,n,r):null}var qc=function(){var t=function(){function t(e,n,r){_classCallCheck(this,t),this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;var i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}return _createClass(t,[{key:"start",value:function(){this._state<1&&(this._startStyles&&Pu(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(Pu(this._element,this._initialStyles),this._endStyles&&(Pu(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Ru(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ru(this._element,this._endStyles),this._endStyles=null),Pu(this._element,this._initialStyles),this._state=3)}}]),t}();return t.initialStylesByElement=new WeakMap,t}();function Bc(t){for(var e=null,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];zc(i)&&((e=e||{})[i]=t[i])}return e}function zc(t){return"display"===t||"position"===t}var Hc=function(){function t(e,n,r,i,o,a,s){var u=this;_classCallCheck(this,t),this._element=e,this._name=n,this._duration=r,this._delay=i,this._easing=o,this._fillMode=a,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return u._handleCallback(t)}}return _createClass(t,[{key:"apply",value:function(){var t,e,n;t=this._element,e="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=Xc(t,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)t.charAt(n)}(n),e="".concat(n,", ").concat(e)),Yc(t,"",e),Qc(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){Gc(this._element,this._name,"paused")}},{key:"resume",value:function(){Gc(this._element,this._name,"running")}},{key:"setPosition",value:function(t){var e=Wc(this._element,this._name);this._position=t*this._duration,Yc(this._element,"Delay","-".concat(this._position,"ms"),e)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),Qc(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var t,e,n,r;this._destroyed||(this._destroyed=!0,this.finish(),t=this._element,e=this._name,n=Xc(t,"").split(","),(r=Kc(n,e))>=0&&(n.splice(r,1),Yc(t,"",n.join(","))))}}]),t}();function Gc(t,e,n){Yc(t,"PlayState",n,Wc(t,e))}function Wc(t,e){var n=Xc(t,"");return n.indexOf(",")>0?Kc(n.split(","),e):Kc([n],e)}function Kc(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Qc(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function Yc(t,e,n,r){var i="animation"+e;if(null!=r){var o=t.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}t.style[i]=n}function Xc(t,e){return t.style["animation"+e]}var Zc=function(){function t(e,n,r,i,o,a,s,u){_classCallCheck(this,t),this.element=e,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=i+o,this._buildStyler()}return _createClass(t,[{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(t){this._styler.setPosition(t)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var t=this;this._styler=new Hc(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return t.finish()}))}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}},{key:"beforeDestroy",value:function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach((function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:Hu(t.element,r))}))}this.currentSnapshot=e}}]),t}(),Jc=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this)).element=t,i._startingStyles={},i.__initialized=!1,i._styles=wu(r),i}return _createClass(n,[{key:"init",value:function(){var t=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(e){t._startingStyles[e]=t.element.style[e]})),_get(_getPrototypeOf(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var t=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(e){return t.element.style.setProperty(e,t._styles[e])})),_get(_getPrototypeOf(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var t=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(e){var n=t._startingStyles[e];n?t.element.style.setProperty(e,n):t.element.style.removeProperty(e)})),this._startingStyles=null,_get(_getPrototypeOf(n.prototype),"destroy",this).call(this))}}]),n}(eu),$c=function(){function t(){_classCallCheck(this,t),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return mu(t)}},{key:"matchesElement",value:function(t,e){return gu(t,e)}},{key:"containsElement",value:function(t,e){return _u(t,e)}},{key:"query",value:function(t,e,n){return bu(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"buildKeyframeElement",value:function(t,e,n){n=n.map((function(t){return wu(t)}));var r="@keyframes ".concat(e," {\n"),i="";n.forEach((function(t){i=" ";var e=parseFloat(t.offset);r+="".concat(i).concat(100*e,"% {\n"),i+=" ",Object.keys(t).forEach((function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(e,": ").concat(n,";\n"))}})),r+=i+"}\n"})),r+="}\n";var o=document.createElement("style");return o.innerHTML=r,o}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;a&&this._notifyFaultyScrubber();var s=o.filter((function(t){return t instanceof Zc})),u={};qu(n,r)&&s.forEach((function(t){var e=t.currentSnapshot;Object.keys(e).forEach((function(t){return u[t]=e[t]}))}));var c=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach((function(t){Object.keys(t).forEach((function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])}))})),e}(e=Bu(t,e,u));if(0==n)return new Jc(t,c);var l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);var f=Uc(t,e),d=new Zc(t,e,l,n,r,i,c,f);return d.onDestroy((function(){var t;(t=h).parentNode.removeChild(t)})),d}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),t}(),tl=function(){function t(e,n,r,i){_classCallCheck(this,t),this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return _createClass(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(t){return t()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return t._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(t,e,n){return t.animate(e,n)}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(t){return t()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(t){return t()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(t){this.domPlayer.currentTime=t*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:Hu(t.element,n))})),this.currentSnapshot=e}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach((function(t){return t()})),e.length=0}}]),t}(),el=function(){function t(){_classCallCheck(this,t),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(nl().toString()),this._cssKeyframesDriver=new $c}return _createClass(t,[{key:"validateStyleProperty",value:function(t){return mu(t)}},{key:"matchesElement",value:function(t,e){return gu(t,e)}},{key:"containsElement",value:function(t,e){return _u(t,e)}},{key:"query",value:function(t,e,n){return bu(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"overrideWebAnimationsSupport",value:function(t){this._isNativeImpl=t}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},c=o.filter((function(t){return t instanceof tl}));qu(n,r)&&c.forEach((function(t){var e=t.currentSnapshot;Object.keys(e).forEach((function(t){return u[t]=e[t]}))}));var l=Uc(t,e=Bu(t,e=e.map((function(t){return Iu(t,!1)})),u));return new tl(t,e,s,l)}}]),t}();function nl(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var rl,il=((rl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var o;return _classCallCheck(this,n),(o=e.call(this))._nextAnimationId=0,o._renderer=t.createRenderer(i.body,{id:"0",encapsulation:r.Q.None,styles:[],data:{animation:[]}}),o}return _createClass(n,[{key:"build",value:function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?Ys(t):t;return sl(this._renderer,null,e,"register",[n]),new ol(e,this._renderer)}}]),n}(Ws)).\u0275fac=function(t){return new(t||rl)(r.Xb(r.F),r.Xb(u))},rl.\u0275prov=r.Kb({token:rl,factory:rl.\u0275fac}),rl),ol=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this))._id=t,i._renderer=r,i}return _createClass(n,[{key:"create",value:function(t,e){return new al(this._id,t,e||{},this._renderer)}}]),n}(function(){return function t(){_classCallCheck(this,t)}}()),al=function(){function t(e,n,r,i){_classCallCheck(this,t),this.id=e,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return _createClass(t,[{key:"_listen",value:function(t,e){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(t),e)}},{key:"_command",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return sl(this._renderer,this.element,this.id,t,n)}},{key:"onDone",value:function(t){this._listen("done",t)}},{key:"onStart",value:function(t){this._listen("start",t)}},{key:"onDestroy",value:function(t){this._listen("destroy",t)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(t){this._command("setPosition",t)}},{key:"getPosition",value:function(){return 0}}]),t}();function sl(t,e,n,r,i){return t.setProperty(e,"@@".concat(n,":").concat(r),i)}var ul,cl,ll,hl,fl=((ul=function(){function t(e,n,r){_classCallCheck(this,t),this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return _createClass(t,[{key:"createRenderer",value:function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new dl("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach((function e(r){Array.isArray(r)?r.forEach(e):n.engine.registerTrigger(o,a,t,r.name,r)})),new pl(this,a,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var t=this;this.promise.then((function(){t._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(t,e,n){var r=this;t>=0&&t<this._microtaskId?this._zone.run((function(){return e(n)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){r._zone.run((function(){r._animationCallbacksBuffer.forEach((function(t){var e=_slicedToArray(t,2);(0,e[0])(e[1])})),r._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([e,n]))}},{key:"end",value:function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),t}()).\u0275fac=function(t){return new(t||ul)(r.Xb(r.F),r.Xb(Vc),r.Xb(r.z))},ul.\u0275prov=r.Kb({token:ul,factory:ul.\u0275fac}),ul),dl=function(){function t(e,n,r){_classCallCheck(this,t),this.namespaceId=e,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(t){return n.destroyNode(t)}:null}return _createClass(t,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(t,e){return this.delegate.createElement(t,e)}},{key:"createComment",value:function(t){return this.delegate.createComment(t)}},{key:"createText",value:function(t){return this.delegate.createText(t)}},{key:"appendChild",value:function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}},{key:"insertBefore",value:function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}},{key:"removeChild",value:function(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}},{key:"selectRootElement",value:function(t,e){return this.delegate.selectRootElement(t,e)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setAttribute",value:function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}},{key:"setValue",value:function(t,e){this.delegate.setValue(t,e)}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"disableAnimations",value:function(t,e){this.engine.disableAnimations(t,e)}}]),t}(),pl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this,r,i,o)).factory=t,a.namespaceId=r,a}return _createClass(n,[{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){var r,i,o=this;if("@"==e.charAt(0)){var a,s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),u=e.substr(1),c="";return"@"!=u.charAt(0)&&(i=(r=u).indexOf("."),u=(a=_slicedToArray([r.substring(0,i),r.substr(i+1)],2))[0],c=a[1]),this.engine.listen(this.namespaceId,s,u,c,(function(t){o.factory.scheduleListenerCallback(t._data||-1,n,t)}))}return this.delegate.listen(t,e,n)}}]),n}(dl),vl=((cl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){return _classCallCheck(this,n),e.call(this,t.body,r,i)}return n}(Vc)).\u0275fac=function(t){return new(t||cl)(r.Xb(u),r.Xb(Su),r.Xb(fc))},cl.\u0275prov=r.Kb({token:cl,factory:cl.\u0275fac}),cl),yl=new r.q("AnimationModuleType"),ml=[{provide:Su,useFactory:function(){return"function"==typeof nl()?new el:new $c}},{provide:yl,useValue:"BrowserAnimations"},{provide:Ws,useClass:il},{provide:fc,useFactory:function(){return new dc}},{provide:Vc,useClass:vl},{provide:r.F,useFactory:function(t,e,n){return new fl(t,e,n)},deps:[$t,Vc,r.z]}],gl=((ll=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:ll}),ll.\u0275inj=r.Lb({factory:function(t){return new(t||ll)},providers:ml,imports:[fe]}),ll),_l=new r.O("9.2.4"),bl=new r.q("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),wl=((hl=function(){function t(e,n,r){_classCallCheck(this,t),this._hasDoneGlobalChecks=!1,this._document=r,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=n,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return _createClass(t,[{key:"_getDocument",value:function(){var t=this._document||document;return"object"==typeof t&&t?t:null}},{key:"_getWindow",value:function(){var t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}},{key:"_checksAreEnabled",value:function(){return Object(r.W)()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var t=this._getWindow();return t&&(t.__karma__||t.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){var t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){var t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(!t&&e&&e.body&&"function"==typeof getComputedStyle){var n=e.createElement("div");n.classList.add("mat-theme-loaded-marker"),e.body.appendChild(n);var r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(n)}}},{key:"_checkCdkVersionMatch",value:function(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&_l.full!==Gs.full&&console.warn("The Angular Material version ("+_l.full+") does not match the Angular CDK version ("+Gs.full+").\nPlease ensure the versions of these two packages exactly match.")}}]),t}()).\u0275mod=r.Mb({type:hl}),hl.\u0275inj=r.Lb({factory:function(t){return new(t||hl)(r.Xb(zs),r.Xb(bl,8),r.Xb(u,8))},imports:[[An],An]}),hl);function kl(t,e){return function(t){_inherits(r,t);var n=_createSuper(r);function r(){var t;_classCallCheck(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))).color=e,t}return _createClass(r,[{key:"color",get:function(){return this._color},set:function(t){var n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),n&&this._elementRef.nativeElement.classList.add("mat-"+n),this._color=n)}}]),r}(t)}var Cl,Sl=new r.q("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return Object(r.V)(r.u)}}),El=function(){function t(){_classCallCheck(this,t),this._localeChanges=new me.a}return _createClass(t,[{key:"localeChanges",get:function(){return this._localeChanges}},{key:"deserialize",value:function(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}},{key:"setLocale",value:function(t){this.locale=t,this._localeChanges.next()}},{key:"compareDate",value:function(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}},{key:"sameDate",value:function(t,e){if(t&&e){var n=this.isValid(t),r=this.isValid(e);return n&&r?!this.compareDate(t,e):n==r}return t==e}},{key:"clampDate",value:function(t,e,n){return e&&this.compareDate(t,e)<0?e:n&&this.compareDate(t,n)>0?n:t}}]),t}(),Tl=new r.q("mat-date-formats");try{Cl="undefined"!=typeof Intl}catch(TI){Cl=!1}var Ol={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},xl=Dl(31,(function(t){return String(t+1)})),Il={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},Al=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Dl(t,e){for(var n=Array(t),r=0;r<t;r++)n[r]=e(r);return n}var Pl,Rl,Nl,jl,Fl,Ml,Ll,Vl,Ul,ql,Bl=((Rl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i,o;return _classCallCheck(this,n),(o=e.call(this)).useUtcForDisplay=!0,_get((i=_assertThisInitialized(o),_getPrototypeOf(n.prototype)),"setLocale",i).call(i,t),o.useUtcForDisplay=!r.TRIDENT,o._clampDate=r.TRIDENT||r.EDGE,o}return _createClass(n,[{key:"getYear",value:function(t){return t.getFullYear()}},{key:"getMonth",value:function(t){return t.getMonth()}},{key:"getDate",value:function(t){return t.getDate()}},{key:"getDayOfWeek",value:function(t){return t.getDay()}},{key:"getMonthNames",value:function(t){var e=this;if(Cl){var n=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return Dl(12,(function(t){return e._stripDirectionalityCharacters(e._format(n,new Date(2017,t,1)))}))}return Ol[t]}},{key:"getDateNames",value:function(){var t=this;if(Cl){var e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Dl(31,(function(n){return t._stripDirectionalityCharacters(t._format(e,new Date(2017,0,n+1)))}))}return xl}},{key:"getDayOfWeekNames",value:function(t){var e=this;if(Cl){var n=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return Dl(7,(function(t){return e._stripDirectionalityCharacters(e._format(n,new Date(2017,0,t+1)))}))}return Il[t]}},{key:"getYearName",value:function(t){if(Cl){var e=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(e,t))}return String(this.getYear(t))}},{key:"getFirstDayOfWeek",value:function(){return 0}},{key:"getNumDaysInMonth",value:function(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}},{key:"clone",value:function(t){return new Date(t.getTime())}},{key:"createDate",value:function(t,e,n){if(e<0||e>11)throw Error('Invalid month index "'.concat(e,'". Month index has to be between 0 and 11.'));if(n<1)throw Error('Invalid date "'.concat(n,'". Date has to be greater than 0.'));var r=this._createDateWithOverflow(t,e,n);if(r.getMonth()!=e)throw Error('Invalid date "'.concat(n,'" for month with index "').concat(e,'".'));return r}},{key:"today",value:function(){return new Date}},{key:"parse",value:function(t){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}},{key:"format",value:function(t,e){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");if(Cl){this._clampDate&&(t.getFullYear()<1||t.getFullYear()>9999)&&(t=this.clone(t)).setFullYear(Math.max(1,Math.min(9999,t.getFullYear()))),e=Object.assign(Object.assign({},e),{timeZone:"utc"});var n=new Intl.DateTimeFormat(this.locale,e);return this._stripDirectionalityCharacters(this._format(n,t))}return this._stripDirectionalityCharacters(t.toDateString())}},{key:"addCalendarYears",value:function(t,e){return this.addCalendarMonths(t,12*e)}},{key:"addCalendarMonths",value:function(t,e){var n=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+e,this.getDate(t));return this.getMonth(n)!=((this.getMonth(t)+e)%12+12)%12&&(n=this._createDateWithOverflow(this.getYear(n),this.getMonth(n),0)),n}},{key:"addCalendarDays",value:function(t,e){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+e)}},{key:"toIso8601",value:function(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}},{key:"deserialize",value:function(t){if("string"==typeof t){if(!t)return null;if(Al.test(t)){var e=new Date(t);if(this.isValid(e))return e}}return _get(_getPrototypeOf(n.prototype),"deserialize",this).call(this,t)}},{key:"isDateInstance",value:function(t){return t instanceof Date}},{key:"isValid",value:function(t){return!isNaN(t.getTime())}},{key:"invalid",value:function(){return new Date(NaN)}},{key:"_createDateWithOverflow",value:function(t,e,n){var r=new Date(t,e,n);return t>=0&&t<100&&r.setFullYear(this.getYear(r)-1900),r}},{key:"_2digit",value:function(t){return("00"+t).slice(-2)}},{key:"_stripDirectionalityCharacters",value:function(t){return t.replace(/[\u200e\u200f]/g,"")}},{key:"_format",value:function(t,e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.format(n)}}]),n}(El)).\u0275fac=function(t){return new(t||Rl)(r.Xb(Sl,8),r.Xb(mn))},Rl.\u0275prov=r.Kb({token:Rl,factory:Rl.\u0275fac}),Rl),zl=((Pl=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Pl}),Pl.\u0275inj=r.Lb({factory:function(t){return new(t||Pl)},providers:[{provide:El,useClass:Bl}],imports:[[gn]]}),Pl),Hl={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}},Gl=((jl=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:jl}),jl.\u0275inj=r.Lb({factory:function(t){return new(t||jl)},providers:[{provide:Tl,useValue:Hl}],imports:[[zl]]}),jl),Wl=((Nl=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"isErrorState",value:function(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}]),t}()).\u0275fac=function(t){return new(t||Nl)},Nl.\u0275prov=Object(r.Kb)({factory:function(){return new Nl},token:Nl,providedIn:"root"}),Nl),Kl=function(){function t(e,n,r){_classCallCheck(this,t),this._renderer=e,this.element=n,this.config=r,this.state=3}return _createClass(t,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),t}(),Ql={enterDuration:450,exitDuration:400},Yl=wn({passive:!0}),Xl=["mousedown","touchstart"],Zl=["mouseup","mouseleave","touchend","touchcancel"],Jl=function(){function t(e,n,r,i){_classCallCheck(this,t),this._target=e,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ye(r))}return _createClass(t,[{key:"fadeInRipple",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign(Object.assign({},Ql),r.animation);r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);var a=r.radius||function(t,e,n){var r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),s=t-i.left,u=e-i.top,c=o.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=s-a+"px",l.style.top=u-a+"px",l.style.height=2*a+"px",l.style.width=2*a+"px",null!=r.color&&(l.style.backgroundColor=r.color),l.style.transitionDuration=c+"ms",this._containerElement.appendChild(l),window.getComputedStyle(l).getPropertyValue("opacity"),l.style.transform="scale(1)";var h=new Kl(this,l,r);return h.state=0,this._activeRipples.add(h),r.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone((function(){var t=h===n._mostRecentTransientRipple;h.state=1,r.persistent||t&&n._isPointerDown||h.fadeOut()}),c),h}},{key:"fadeOutRipple",value:function(t){var e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),e){var n=t.element,r=Object.assign(Object.assign({},Ql),t.config.animation);n.style.transitionDuration=r.exitDuration+"ms",n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone((function(){t.state=3,n.parentNode.removeChild(n)}),r.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach((function(t){return t.fadeOut()}))}},{key:"setupTriggerEvents",value:function(t){var e=ye(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Xl))}},{key:"handleEvent",value:function(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Zl),this._pointerUpEventsRegistered=!0)}},{key:"_onMousedown",value:function(t){var e=Rs(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}},{key:"_onTouchStart",value:function(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;for(var e=t.changedTouches,n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}},{key:"_onPointerUp",value:function(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach((function(t){!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()})))}},{key:"_runTimeoutOutsideZone",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular((function(){return setTimeout(t,e)}))}},{key:"_registerEvents",value:function(t){var e=this;this._ngZone.runOutsideAngular((function(){t.forEach((function(t){e._triggerElement.addEventListener(t,e,Yl)}))}))}},{key:"_removeTriggerEvents",value:function(){var t=this;this._triggerElement&&(Xl.forEach((function(e){t._triggerElement.removeEventListener(e,t,Yl)})),this._pointerUpEventsRegistered&&Zl.forEach((function(e){t._triggerElement.removeEventListener(e,t,Yl)})))}}]),t}(),$l=new r.q("mat-ripple-global-options"),th=((Ml=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new Jl(this,n,e,r)}return _createClass(t,[{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}},{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}]),t}()).\u0275fac=function(t){return new(t||Ml)(r.Ob(r.l),r.Ob(r.z),r.Ob(mn),r.Ob($l,8),r.Ob(yl,8))},Ml.\u0275dir=r.Jb({type:Ml,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&r.Fb("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),Ml),eh=((Fl=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Fl}),Fl.\u0275inj=r.Lb({factory:function(t){return new(t||Fl)},imports:[[wl,gn],wl]}),Fl),nh=new r.q("mat-label-global-options"),rh=["mat-button",""],ih=["*"],oh=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ah=kl(function(t){return function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._disabled=!1,t}return _createClass(n,[{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=de(t)}}]),n}(t)}(function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._disableRipple=!1,t}return _createClass(n,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(t){this._disableRipple=de(t)}}]),n}((function t(e){_classCallCheck(this,t),this._elementRef=e})))),sh=((Vl=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;_classCallCheck(this,n),(o=e.call(this,t))._focusMonitor=r,o._animationMode=i,o.isRoundButton=o._hasHostAttributes("mat-fab","mat-mini-fab"),o.isIconButton=o._hasHostAttributes("mat-icon-button");var a,s=_createForOfIteratorHelper(oh);try{for(s.s();!(a=s.n()).done;){var u=a.value;o._hasHostAttributes(u)&&o._getHostElement().classList.add(u)}}catch(c){s.e(c)}finally{s.f()}return t.nativeElement.classList.add("mat-button-base"),o._focusMonitor.monitor(o._elementRef,!0),o.isRoundButton&&(o.color="accent"),o}return _createClass(n,[{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._getHostElement(),t,e)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.some((function(e){return t._getHostElement().hasAttribute(e)}))}}]),n}(ah)).\u0275fac=function(t){return new(t||Vl)(r.Ob(r.l),r.Ob(Ms),r.Ob(yl,8))},Vl.\u0275cmp=r.Ib({type:Vl,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){var n;1&t&&r.Bc(th,!0),2&t&&r.nc(n=r.cc())&&(e.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:3,hostBindings:function(t,e){2&t&&(r.Db("disabled",e.disabled||null),r.Fb("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[r.zb],attrs:rh,ngContentSelectors:ih,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(r.ic(),r.Tb(0,"span",0),r.hc(1),r.Sb(),r.Pb(2,"div",1),r.Pb(3,"div",2)),2&t&&(r.Cb(2),r.Fb("mat-button-ripple-round",e.isRoundButton||e.isIconButton),r.jc("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[th],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled],.mat-flat-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),Vl),uh=((Ll=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Ll}),Ll.\u0275inj=r.Lb({factory:function(t){return new(t||Ll)},imports:[[eh,wl],wl]}),Ll),ch=function(){function t(e){_classCallCheck(this,t),this.total=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new lh(t,this.total))}}]),t}(),lh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return _createClass(n,[{key:"_next",value:function(t){++this.count>this.total&&this.destination.next(t)}}]),n}(Te.a),hh=new Set,fh=((ql=function(){function t(e){_classCallCheck(this,t),this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):dh}return _createClass(t,[{key:"matchMedia",value:function(t){return this._platform.WEBKIT&&function(t){if(!hh.has(t))try{Ul||((Ul=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(Ul)),Ul.sheet&&(Ul.sheet.insertRule("@media ".concat(t," {.fx-query-test{ }}"),0),hh.add(t))}catch(zA){console.error(zA)}}(t),this._matchMedia(t)}}]),t}()).\u0275fac=function(t){return new(t||ql)(r.Xb(mn))},ql.\u0275prov=Object(r.Kb)({factory:function(){return new ql(Object(r.Xb)(mn))},token:ql,providedIn:"root"}),ql);function dh(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}var ph,vh=((ph=function(){function t(e,n){_classCallCheck(this,t),this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new me.a}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(t){var e=this;return yh(pe(t)).some((function(t){return e._registerQuery(t).mql.matches}))}},{key:"observe",value:function(t){var e=this,n=Fr(yh(pe(t)).map((function(t){return e._registerQuery(t).observable})));return(n=Ke(n.pipe(Yn(1)),n.pipe((function(t){return t.lift(new ch(1))}),as(0)))).pipe(Object(ke.a)((function(t){var e={matches:!1,breakpoints:{}};return t.forEach((function(t){e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches})),e})))}},{key:"_registerQuery",value:function(t){var e=this;if(this._queries.has(t))return this._queries.get(t);var n=this._mediaMatcher.matchMedia(t),r={observable:new _e.a((function(t){var r=function(n){return e._zone.run((function(){return t.next(n)}))};return n.addListener(r),function(){n.removeListener(r)}})).pipe(Qe(n),Object(ke.a)((function(e){return{query:t,matches:e.matches}})),Be(this._destroySubject)),mql:n};return this._queries.set(t,r),r}}]),t}()).\u0275fac=function(t){return new(t||ph)(r.Xb(fh),r.Xb(r.z))},ph.\u0275prov=Object(r.Kb)({factory:function(){return new ph(Object(r.Xb)(fh),Object(r.Xb)(r.z))},token:ph,providedIn:"root"}),ph);function yh(t){return t.map((function(t){return t.split(",")})).reduce((function(t,e){return t.concat(e)})).map((function(t){return t.trim()}))}function mh(t,e){if(1&t){var n=r.Ub();r.Tb(0,"div",1),r.Tb(1,"button",2),r.bc("click",(function(){return r.pc(n),r.ec().action()})),r.xc(2),r.Sb(),r.Sb()}if(2&t){var i=r.ec();r.Cb(2),r.yc(i.data.action)}}function gh(t,e){}var _h,bh,wh,kh,Ch,Sh,Eh=Math.pow(2,31)-1,Th=function(){function t(e,n){var r=this;_classCallCheck(this,t),this._overlayRef=n,this._afterDismissed=new me.a,this._afterOpened=new me.a,this._onAction=new me.a,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe((function(){return r.dismiss()})),e._onExit.subscribe((function(){return r._finishDismiss()}))}return _createClass(t,[{key:"dismiss",value:function(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}},{key:"dismissWithAction",value:function(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}},{key:"closeWithAction",value:function(){this.dismissWithAction()}},{key:"_dismissAfter",value:function(t){var e=this;this._durationTimeoutId=setTimeout((function(){return e.dismiss()}),Math.min(t,Eh))}},{key:"_open",value:function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}},{key:"_finishDismiss",value:function(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}},{key:"afterDismissed",value:function(){return this._afterDismissed.asObservable()}},{key:"afterOpened",value:function(){return this.containerInstance._onEnter}},{key:"onAction",value:function(){return this._onAction.asObservable()}}]),t}(),Oh=new r.q("MatSnackBarData"),xh=function t(){_classCallCheck(this,t),this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"},Ih=((_h=function(){function t(e,n){_classCallCheck(this,t),this.snackBarRef=e,this.data=n}return _createClass(t,[{key:"action",value:function(){this.snackBarRef.dismissWithAction()}},{key:"hasAction",get:function(){return!!this.data.action}}]),t}()).\u0275fac=function(t){return new(t||_h)(r.Ob(Th),r.Ob(Oh))},_h.\u0275cmp=r.Ib({type:_h,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(r.Tb(0,"span"),r.xc(1),r.Sb(),r.wc(2,mh,3,1,"div",0)),2&t&&(r.Cb(1),r.yc(e.data.message),r.Cb(1),r.jc("ngIf",e.hasAction))},directives:[vt,sh],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),_h),Ah={snackBarState:Ks("state",[Zs("void, hidden",Xs({transform:"scale(0.8)",opacity:0})),Zs("visible",Xs({transform:"scale(1)",opacity:1})),$s("* => visible",Qs("150ms cubic-bezier(0, 0, 0.2, 1)")),$s("* => void, * => hidden",Qs("75ms cubic-bezier(0.4, 0.0, 1, 1)",Xs({opacity:0})))])},Dh=((wh=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o){var a;return _classCallCheck(this,n),(a=e.call(this))._ngZone=t,a._elementRef=r,a._changeDetectorRef=i,a.snackBarConfig=o,a._destroyed=!1,a._onExit=new me.a,a._onEnter=new me.a,a._animationState="void",a.attachDomPortal=function(t){return a._assertNotAttached(),a._applySnackBarClasses(),a._portalOutlet.attachDomPortal(t)},a._role="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?null:"status":"alert",a}return _createClass(n,[{key:"attachComponentPortal",value:function(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}},{key:"onAnimationEnd",value:function(t){var e=t.fromState,n=t.toState;if(("void"===n&&"void"!==e||"hidden"===n)&&this._completeExit(),"visible"===n){var r=this._onEnter;this._ngZone.run((function(){r.next(),r.complete()}))}}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),this._onExit}},{key:"ngOnDestroy",value:function(){this._destroyed=!0,this._completeExit()}},{key:"_completeExit",value:function(){var t=this;this._ngZone.onMicrotaskEmpty.asObservable().pipe(Yn(1)).subscribe((function(){t._onExit.next(),t._onExit.complete()}))}},{key:"_applySnackBarClasses",value:function(){var t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach((function(e){return t.classList.add(e)})):t.classList.add(e)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}},{key:"_assertNotAttached",value:function(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}]),n}(Bn)).\u0275fac=function(t){return new(t||wh)(r.Ob(r.z),r.Ob(r.l),r.Ob(r.h),r.Ob(xh))},wh.\u0275cmp=r.Ib({type:wh,selectors:[["snack-bar-container"]],viewQuery:function(t,e){var n;1&t&&r.uc(Hn,!0),2&t&&r.nc(n=r.cc())&&(e._portalOutlet=n.first)},hostAttrs:[1,"mat-snack-bar-container"],hostVars:2,hostBindings:function(t,e){1&t&&r.Gb("@state.done",(function(t){return e.onAnimationEnd(t)})),2&t&&(r.Db("role",e._role),r.Ac("@state",e._animationState))},features:[r.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&r.wc(0,gh,0,0,"ng-template",0)},directives:[Hn],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Ah.snackBarState]}}),wh),Ph=((bh=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:bh}),bh.\u0275inj=r.Lb({factory:function(t){return new(t||bh)},imports:[[Dr,Gn,Tt,uh,wl],wl]}),bh),Rh=new r.q("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new xh}}),Nh=((kh=function(){function t(e,n,r,i,o,a){_classCallCheck(this,t),this._overlay=e,this._live=n,this._injector=r,this._breakpointObserver=i,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}return _createClass(t,[{key:"_openedSnackBarRef",get:function(){var t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel},set:function(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}},{key:"openFromComponent",value:function(t,e){return this._attach(t,e)}},{key:"openFromTemplate",value:function(t,e){return this._attach(t,e)}},{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=Object.assign(Object.assign({},this._defaultConfig),n);return r.data={message:t,action:e},r.announcementMessage||(r.announcementMessage=t),this.openFromComponent(Ih,r)}},{key:"dismiss",value:function(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}},{key:"ngOnDestroy",value:function(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}},{key:"_attachSnackBarContainer",value:function(t,e){var n=new Wn(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[xh,e]])),r=new Vn(Dh,e.viewContainerRef,n),i=t.attach(r);return i.instance.snackBarConfig=e,i.instance}},{key:"_attach",value:function(t,e){var n=Object.assign(Object.assign(Object.assign({},new xh),this._defaultConfig),e),i=this._createOverlay(n),o=this._attachSnackBarContainer(i,n),a=new Th(o,i);if(t instanceof r.L){var s=new Un(t,null,{$implicit:n.data,snackBarRef:a});a.instance=o.attachTemplatePortal(s)}else{var u=this._createInjector(n,a),c=new Vn(t,void 0,u),l=o.attachComponentPortal(c);a.instance=l.instance}return this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait)").pipe(Be(i.detachments())).subscribe((function(t){var e=i.overlayElement.classList;t.matches?e.add("mat-snack-bar-handset"):e.remove("mat-snack-bar-handset")})),this._animateSnackBar(a,n),this._openedSnackBarRef=a,this._openedSnackBarRef}},{key:"_animateSnackBar",value:function(t,e){var n=this;t.afterDismissed().subscribe((function(){n._openedSnackBarRef==t&&(n._openedSnackBarRef=null),e.announcementMessage&&n._live.clear()})),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe((function(){t.containerInstance.enter()})),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),e.duration&&e.duration>0&&t.afterOpened().subscribe((function(){return t._dismissAfter(e.duration)})),e.announcementMessage&&this._live.announce(e.announcementMessage,e.politeness)}},{key:"_createOverlay",value:function(t){var e=new sr;e.direction=t.direction;var n=this._overlay.position().global(),r="rtl"===t.direction,i="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!r||"end"===t.horizontalPosition&&r,o=!i&&"center"!==t.horizontalPosition;return i?n.left("0"):o?n.right("0"):n.centerHorizontally(),"top"===t.verticalPosition?n.top("0"):n.bottom("0"),e.positionStrategy=n,this._overlay.create(e)}},{key:"_createInjector",value:function(t,e){return new Wn(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[Th,e],[Oh,t.data]]))}}]),t}()).\u0275fac=function(t){return new(t||kh)(r.Xb(Ir),r.Xb(Ds),r.Xb(r.r),r.Xb(vh),r.Xb(kh,12),r.Xb(Rh))},kh.\u0275prov=Object(r.Kb)({factory:function(){return new kh(Object(r.Xb)(Ir),Object(r.Xb)(Ds),Object(r.Xb)(r.o),Object(r.Xb)(vh),Object(r.Xb)(kh,12),Object(r.Xb)(Rh))},token:kh,providedIn:Ph}),kh),jh=["*",[["mat-card-footer"]]],Fh=["*","mat-card-footer"],Mh=((Sh=function t(e){_classCallCheck(this,t),this._animationMode=e}).\u0275fac=function(t){return new(t||Sh)(r.Ob(yl,8))},Sh.\u0275cmp=r.Ib({type:Sh,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&r.Fb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:Fh,decls:2,vars:0,template:function(t,e){1&t&&(r.ic(jh),r.hc(0),r.hc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),Sh),Lh=((Ch=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Ch}),Ch.\u0275inj=r.Lb({factory:function(t){return new(t||Ch)},imports:[[wl],wl]}),Ch),Vh=["underline"],Uh=["connectionContainer"],qh=["inputContainer"],Bh=["label"];function zh(t,e){1&t&&(r.Rb(0),r.Tb(1,"div",14),r.Pb(2,"div",15),r.Pb(3,"div",16),r.Pb(4,"div",17),r.Sb(),r.Tb(5,"div",18),r.Pb(6,"div",15),r.Pb(7,"div",16),r.Pb(8,"div",17),r.Sb(),r.Qb())}function Hh(t,e){1&t&&(r.Tb(0,"div",19),r.hc(1,1),r.Sb())}function Gh(t,e){if(1&t&&(r.Rb(0),r.hc(1,2),r.Tb(2,"span"),r.xc(3),r.Sb(),r.Qb()),2&t){var n=r.ec(2);r.Cb(3),r.yc(n._control.placeholder)}}function Wh(t,e){1&t&&r.hc(0,3,["*ngSwitchCase","true"])}function Kh(t,e){1&t&&(r.Tb(0,"span",23),r.xc(1," *"),r.Sb())}function Qh(t,e){if(1&t){var n=r.Ub();r.Tb(0,"label",20,21),r.bc("cdkObserveContent",(function(){return r.pc(n),r.ec().updateOutlineGap()})),r.wc(2,Gh,4,1,"ng-container",12),r.wc(3,Wh,1,0,void 0,12),r.wc(4,Kh,2,0,"span",22),r.Sb()}if(2&t){var i=r.ec();r.Fb("mat-empty",i._control.empty&&!i._shouldAlwaysFloat)("mat-form-field-empty",i._control.empty&&!i._shouldAlwaysFloat)("mat-accent","accent"==i.color)("mat-warn","warn"==i.color),r.jc("cdkObserveContentDisabled","outline"!=i.appearance)("id",i._labelId)("ngSwitch",i._hasLabel()),r.Db("for",i._control.id)("aria-owns",i._control.id),r.Cb(2),r.jc("ngSwitchCase",!1),r.Cb(1),r.jc("ngSwitchCase",!0),r.Cb(1),r.jc("ngIf",!i.hideRequiredMarker&&i._control.required&&!i._control.disabled)}}function Yh(t,e){1&t&&(r.Tb(0,"div",24),r.hc(1,4),r.Sb())}function Xh(t,e){if(1&t&&(r.Tb(0,"div",25,26),r.Pb(2,"span",27),r.Sb()),2&t){var n=r.ec();r.Cb(2),r.Fb("mat-accent","accent"==n.color)("mat-warn","warn"==n.color)}}function Zh(t,e){if(1&t&&(r.Tb(0,"div"),r.hc(1,5),r.Sb()),2&t){var n=r.ec();r.jc("@transitionMessages",n._subscriptAnimationState)}}function Jh(t,e){if(1&t&&(r.Tb(0,"div",31),r.xc(1),r.Sb()),2&t){var n=r.ec(2);r.jc("id",n._hintLabelId),r.Cb(1),r.yc(n.hintLabel)}}function $h(t,e){if(1&t&&(r.Tb(0,"div",28),r.wc(1,Jh,2,2,"div",29),r.hc(2,6),r.Pb(3,"div",30),r.hc(4,7),r.Sb()),2&t){var n=r.ec();r.jc("@transitionMessages",n._subscriptAnimationState),r.Cb(1),r.jc("ngIf",n.hintLabel)}}var tf,ef,nf=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],rf=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],of=0,af=((tf=function t(){_classCallCheck(this,t),this.id="mat-error-"+of++}).\u0275fac=function(t){return new(t||tf)},tf.\u0275dir=r.Jb({type:tf,selectors:[["mat-error"]],hostAttrs:["role","alert",1,"mat-error"],hostVars:1,hostBindings:function(t,e){2&t&&r.Db("id",e.id)},inputs:{id:"id"}}),tf),sf={transitionMessages:Ks("transitionMessages",[Zs("enter",Xs({opacity:1,transform:"translateY(0%)"})),$s("void => enter",[Xs({opacity:0,transform:"translateY(-100%)"}),Qs("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},uf=((ef=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||ef)},ef.\u0275dir=r.Jb({type:ef}),ef);function cf(t){return Error("A hint was already declared for 'align=\"".concat(t,"\"'."))}var lf,hf,ff,df,pf,vf,yf,mf,gf,_f=0,bf=((pf=function t(){_classCallCheck(this,t),this.align="start",this.id="mat-hint-"+_f++}).\u0275fac=function(t){return new(t||pf)},pf.\u0275dir=r.Jb({type:pf,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(t,e){2&t&&(r.Db("id",e.id)("align",null),r.Fb("mat-right","end"==e.align))},inputs:{align:"align",id:"id"}}),pf),wf=((df=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||df)},df.\u0275dir=r.Jb({type:df,selectors:[["mat-label"]]}),df),kf=((ff=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||ff)},ff.\u0275dir=r.Jb({type:ff,selectors:[["mat-placeholder"]]}),ff),Cf=((hf=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||hf)},hf.\u0275dir=r.Jb({type:hf,selectors:[["","matPrefix",""]]}),hf),Sf=((lf=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||lf)},lf.\u0275dir=r.Jb({type:lf,selectors:[["","matSuffix",""]]}),lf),Ef=0,Tf=kl((function t(e){_classCallCheck(this,t),this._elementRef=e}),"primary"),Of=new r.q("MAT_FORM_FIELD_DEFAULT_OPTIONS"),xf=new r.q("MatFormField"),If=((yf=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a,s,u,c){var l;return _classCallCheck(this,n),(l=e.call(this,t))._elementRef=t,l._changeDetectorRef=r,l._dir=o,l._defaults=a,l._platform=s,l._ngZone=u,l._outlineGapCalculationNeededImmediately=!1,l._outlineGapCalculationNeededOnStable=!1,l._destroyed=new me.a,l._showAlwaysAnimate=!1,l._subscriptAnimationState="",l._hintLabel="",l._hintLabelId="mat-hint-"+Ef++,l._labelId="mat-form-field-label-"+Ef++,l._labelOptions=i||{},l.floatLabel=l._getDefaultFloatLabelState(),l._animationsEnabled="NoopAnimations"!==c,l.appearance=a&&a.appearance?a.appearance:"legacy",l._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker,l}return _createClass(n,[{key:"appearance",get:function(){return this._appearance},set:function(t){var e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}},{key:"hideRequiredMarker",get:function(){return this._hideRequiredMarker},set:function(t){this._hideRequiredMarker=de(t)}},{key:"_shouldAlwaysFloat",get:function(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}},{key:"_canLabelFloat",get:function(){return"never"!==this.floatLabel}},{key:"hintLabel",get:function(){return this._hintLabel},set:function(t){this._hintLabel=t,this._processHints()}},{key:"floatLabel",get:function(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel},set:function(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}},{key:"_control",get:function(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic},set:function(t){this._explicitFormFieldControl=t}},{key:"_labelChild",get:function(){return this._labelChildNonStatic||this._labelChildStatic}},{key:"getConnectedOverlayOrigin",value:function(){return this._connectionContainerRef||this._elementRef}},{key:"ngAfterContentInit",value:function(){var t=this;this._validateControlChild();var e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+e.controlType),e.stateChanges.pipe(Qe(null)).subscribe((function(){t._validatePlaceholders(),t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Be(this._destroyed)).subscribe((function(){return t._changeDetectorRef.markForCheck()})),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.asObservable().pipe(Be(t._destroyed)).subscribe((function(){t._outlineGapCalculationNeededOnStable&&t.updateOutlineGap()}))})),Object(Se.a)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe((function(){t._outlineGapCalculationNeededOnStable=!0,t._changeDetectorRef.markForCheck()})),this._hintChildren.changes.pipe(Qe(null)).subscribe((function(){t._processHints(),t._changeDetectorRef.markForCheck()})),this._errorChildren.changes.pipe(Qe(null)).subscribe((function(){t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})),this._dir&&this._dir.change.pipe(Be(this._destroyed)).subscribe((function(){"function"==typeof requestAnimationFrame?t._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){return t.updateOutlineGap()}))})):t.updateOutlineGap()}))}},{key:"ngAfterContentChecked",value:function(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}},{key:"ngAfterViewInit",value:function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_shouldForward",value:function(t){var e=this._control?this._control.ngControl:null;return e&&e[t]}},{key:"_hasPlaceholder",value:function(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}},{key:"_hasLabel",value:function(){return!!this._labelChild}},{key:"_shouldLabelFloat",value:function(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}},{key:"_hideControlPlaceholder",value:function(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}},{key:"_hasFloatingLabel",value:function(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}},{key:"_getDisplayedMessages",value:function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}},{key:"_animateAndLockLabel",value:function(){var t=this;this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Ce(this._label.nativeElement,"transitionend").pipe(Yn(1)).subscribe((function(){t._showAlwaysAnimate=!1}))),this.floatLabel="always",this._changeDetectorRef.markForCheck())}},{key:"_validatePlaceholders",value:function(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}},{key:"_processHints",value:function(){this._validateHints(),this._syncDescribedByIds()}},{key:"_validateHints",value:function(){var t,e,n=this;this._hintChildren&&this._hintChildren.forEach((function(r){if("start"===r.align){if(t||n.hintLabel)throw cf("start");t=r}else if("end"===r.align){if(e)throw cf("end");e=r}}))}},{key:"_getDefaultFloatLabelState",value:function(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}},{key:"_syncDescribedByIds",value:function(){if(this._control){var t=[];if("hint"===this._getDisplayedMessages()){var e=this._hintChildren?this._hintChildren.find((function(t){return"start"===t.align})):null,n=this._hintChildren?this._hintChildren.find((function(t){return"end"===t.align})):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map((function(t){return t.id})));this._control.setDescribedByIds(t)}}},{key:"_validateControlChild",value:function(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}},{key:"updateOutlineGap",value:function(){var t=this._label?this._label.nativeElement:null;if("outline"===this.appearance&&t&&t.children.length&&t.textContent.trim()&&this._platform.isBrowser)if(this._isAttachedToDOM()){var e=0,n=0,r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),o=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){var a=r.getBoundingClientRect();if(0===a.width&&0===a.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);var s,u=this._getStartEnd(a),c=this._getStartEnd(t.children[0].getBoundingClientRect()),l=0,h=_createForOfIteratorHelper(t.children);try{for(h.s();!(s=h.n()).done;)l+=s.value.offsetWidth}catch(p){h.e(p)}finally{h.f()}e=Math.abs(c-u)-5,n=l>0?.75*l+10:0}for(var f=0;f<i.length;f++)i[f].style.width=e+"px";for(var d=0;d<o.length;d++)o[d].style.width=n+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}else this._outlineGapCalculationNeededImmediately=!0}},{key:"_getStartEnd",value:function(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}},{key:"_isAttachedToDOM",value:function(){var t=this._elementRef.nativeElement;if(t.getRootNode){var e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}]),n}(Tf)).\u0275fac=function(t){return new(t||yf)(r.Ob(r.l),r.Ob(r.h),r.Ob(nh,8),r.Ob(In,8),r.Ob(Of,8),r.Ob(mn),r.Ob(r.z),r.Ob(yl,8))},yf.\u0275cmp=r.Ib({type:yf,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){var i;1&t&&(r.Hb(n,uf,!0),r.tc(n,uf,!0),r.Hb(n,wf,!0),r.tc(n,wf,!0),r.Hb(n,kf,!0),r.Hb(n,af,!0),r.Hb(n,bf,!0),r.Hb(n,Cf,!0),r.Hb(n,Sf,!0)),2&t&&(r.nc(i=r.cc())&&(e._controlNonStatic=i.first),r.nc(i=r.cc())&&(e._controlStatic=i.first),r.nc(i=r.cc())&&(e._labelChildNonStatic=i.first),r.nc(i=r.cc())&&(e._labelChildStatic=i.first),r.nc(i=r.cc())&&(e._placeholderChild=i.first),r.nc(i=r.cc())&&(e._errorChildren=i),r.nc(i=r.cc())&&(e._hintChildren=i),r.nc(i=r.cc())&&(e._prefixChildren=i),r.nc(i=r.cc())&&(e._suffixChildren=i))},viewQuery:function(t,e){var n;1&t&&(r.Bc(Vh,!0),r.uc(Uh,!0),r.Bc(qh,!0),r.Bc(Bh,!0)),2&t&&(r.nc(n=r.cc())&&(e.underlineRef=n.first),r.nc(n=r.cc())&&(e._connectionContainerRef=n.first),r.nc(n=r.cc())&&(e._inputContainerRef=n.first),r.nc(n=r.cc())&&(e._label=n.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(t,e){2&t&&r.Fb("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat)("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[r.Bb([{provide:xf,useExisting:yf}]),r.zb],ngContentSelectors:rf,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(r.ic(nf),r.Tb(0,"div",0),r.Tb(1,"div",1,2),r.bc("click",(function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)})),r.wc(3,zh,9,0,"ng-container",3),r.wc(4,Hh,2,0,"div",4),r.Tb(5,"div",5,6),r.hc(7),r.Tb(8,"span",7),r.wc(9,Qh,5,16,"label",8),r.Sb(),r.Sb(),r.wc(10,Yh,2,0,"div",9),r.Sb(),r.wc(11,Xh,3,4,"div",10),r.Tb(12,"div",11),r.wc(13,Zh,2,1,"div",12),r.wc(14,$h,5,2,"div",13),r.Sb(),r.Sb()),2&t&&(r.Cb(3),r.jc("ngIf","outline"==e.appearance),r.Cb(1),r.jc("ngIf",e._prefixChildren.length),r.Cb(5),r.jc("ngIf",e._hasFloatingLabel()),r.Cb(1),r.jc("ngIf",e._suffixChildren.length),r.Cb(1),r.jc("ngIf","outline"!=e.appearance),r.Cb(1),r.jc("ngSwitch",e._getDisplayedMessages()),r.Cb(1),r.jc("ngSwitchCase","error"),r.Cb(1),r.jc("ngSwitchCase","hint"))},directives:[vt,Ct,St,ms],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[sf.transitionMessages]},changeDetection:0}),yf),Af=((vf=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:vf}),vf.\u0275inj=r.Lb({factory:function(t){return new(t||vf)},imports:[[Tt,wl,gs],wl]}),vf),Df=wn({passive:!0}),Pf=((gf=function(){function t(e,n){_classCallCheck(this,t),this._platform=e,this._ngZone=n,this._monitoredElements=new Map}return _createClass(t,[{key:"monitor",value:function(t){var e=this;if(!this._platform.isBrowser)return Qn.a;var n=ye(t),r=this._monitoredElements.get(n);if(r)return r.subject.asObservable();var i=new me.a,o="cdk-text-field-autofilled",a=function(t){"cdk-text-field-autofill-start"!==t.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===t.animationName&&n.classList.contains(o)&&(n.classList.remove(o),e._ngZone.run((function(){return i.next({target:t.target,isAutofilled:!1})}))):(n.classList.add(o),e._ngZone.run((function(){return i.next({target:t.target,isAutofilled:!0})})))};return this._ngZone.runOutsideAngular((function(){n.addEventListener("animationstart",a,Df),n.classList.add("cdk-text-field-autofill-monitored")})),this._monitoredElements.set(n,{subject:i,unlisten:function(){n.removeEventListener("animationstart",a,Df)}}),i.asObservable()}},{key:"stopMonitoring",value:function(t){var e=ye(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}},{key:"ngOnDestroy",value:function(){var t=this;this._monitoredElements.forEach((function(e,n){return t.stopMonitoring(n)}))}}]),t}()).\u0275fac=function(t){return new(t||gf)(r.Xb(mn),r.Xb(r.z))},gf.\u0275prov=Object(r.Kb)({factory:function(){return new gf(Object(r.Xb)(mn),Object(r.Xb)(r.z))},token:gf,providedIn:"root"}),gf),Rf=((mf=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:mf}),mf.\u0275inj=r.Lb({factory:function(t){return new(t||mf)},imports:[[gn]]}),mf),Nf=n("XoHu");function jf(t,e){return new _e.a((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,a=0,s=function(s){var u=Object($e.a)(t[s]),c=!1;n.add(u.subscribe({next:function(t){c||(c=!0,a++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(a===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}var Ff,Mf,Lf,Vf,Uf=new r.q("NgValueAccessor"),qf={provide:Uf,useExisting:Object(r.U)((function(){return Bf})),multi:!0},Bf=((Ff=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||Ff)(r.Ob(r.E),r.Ob(r.l))},Ff.\u0275dir=r.Jb({type:Ff,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[r.Bb([qf])]}),Ff),zf={provide:Uf,useExisting:Object(r.U)((function(){return Gf})),multi:!0},Hf=new r.q("CompositionEventMode"),Gf=((Vf=function(){function t(e,n,r){var i;_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=a()?a().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}()).\u0275fac=function(t){return new(t||Vf)(r.Ob(r.E),r.Ob(r.l),r.Ob(Hf,8))},Vf.\u0275dir=r.Jb({type:Vf,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.bc("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[r.Bb([zf])]}),Vf),Wf=((Lf=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}}]),t}()).\u0275fac=function(t){return new(t||Lf)},Lf.\u0275dir=r.Jb({type:Lf}),Lf),Kf=((Mf=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Wf)).\u0275fac=function(t){return Qf(t||Mf)},Mf.\u0275dir=r.Jb({type:Mf,features:[r.zb]}),Mf),Qf=r.Vb(Kf);function Yf(){throw new Error("unimplemented")}var Xf,Zf,Jf=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return _createClass(n,[{key:"validator",get:function(){return Yf()}},{key:"asyncValidator",get:function(){return Yf()}}]),n}(Wf),$f=function(){function t(e){_classCallCheck(this,t),this._cd=e}return _createClass(t,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),t}(),td=((Zf=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return n}($f)).\u0275fac=function(t){return new(t||Zf)(r.Ob(Jf,2))},Zf.\u0275dir=r.Jb({type:Zf,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Fb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.zb]}),Zf),ed=((Xf=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return n}($f)).\u0275fac=function(t){return new(t||Xf)(r.Ob(Kf,2))},Xf.\u0275dir=r.Jb({type:Xf,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Fb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.zb]}),Xf);function nd(t){return null==t||0===t.length}var rd=new r.q("NgValidators"),id=new r.q("NgAsyncValidators"),od=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ad=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"min",value:function(t){return function(e){if(nd(e.value)||nd(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(nd(e.value)||nd(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return nd(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return nd(t.value)||od.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){if(nd(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}},{key:"maxLength",value:function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(nd(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(sd);return 0==e.length?null:function(t){return cd(function(t,e){return e.map((function(e){return e(t)}))}(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(sd);return 0==e.length?null:function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var r=e[0];if(Object(be.a)(r))return jf(r,null);if(Object(Nf.a)(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return jf(i.map((function(t){return r[t]})),i)}}if("function"==typeof e[e.length-1]){var o=e.pop();return jf(e=1===e.length&&Object(be.a)(e[0])?e[0]:e,null).pipe(Object(ke.a)((function(t){return o.apply(void 0,_toConsumableArray(t))})))}return jf(e,null)}(function(t,e){return e.map((function(e){return e(t)}))}(t,e).map(ud)).pipe(Object(ke.a)(cd))}}}]),t}();function sd(t){return null!=t}function ud(t){var e=Object(r.tb)(t)?Object($e.a)(t):t;if(!Object(r.sb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function cd(t){var e={};return t.forEach((function(t){e=null!=t?Object.assign(Object.assign({},e),t):e})),0===Object.keys(e).length?null:e}function ld(t){return t.validate?function(e){return t.validate(e)}:t}function hd(t){return t.validate?function(e){return t.validate(e)}:t}var fd,dd,pd,vd,yd,md,gd={provide:Uf,useExisting:Object(r.U)((function(){return _d})),multi:!0},_d=((fd=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||fd)(r.Ob(r.E),r.Ob(r.l))},fd.\u0275dir=r.Jb({type:fd,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.Bb([gd])]}),fd),bd={provide:Uf,useExisting:Object(r.U)((function(){return kd})),multi:!0},wd=((pd=function(){function t(){_classCallCheck(this,t),this._accessors=[]}return _createClass(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach((function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}()).\u0275fac=function(t){return new(t||pd)},pd.\u0275prov=r.Kb({token:pd,factory:pd.\u0275fac}),pd),kd=((dd=function(){function t(e,n,r,i){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Jf),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),t}()).\u0275fac=function(t){return new(t||dd)(r.Ob(r.E),r.Ob(r.l),r.Ob(wd),r.Ob(r.r))},dd.\u0275dir=r.Jb({type:dd,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.Bb([bd])]}),dd),Cd={provide:Uf,useExisting:Object(r.U)((function(){return Sd})),multi:!0},Sd=((vd=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}()).\u0275fac=function(t){return new(t||vd)(r.Ob(r.E),r.Ob(r.l))},vd.\u0275dir=r.Jb({type:vd,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.Bb([Cd])]}),vd),Ed='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Td='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Od=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ed)}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(Td,'\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>'))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Ed)}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Td)}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(t){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(t,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===t?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),t}(),xd={provide:Uf,useExisting:Object(r.U)((function(){return Id})),multi:!0},Id=((yd=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r.ub}return _createClass(t,[{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}},{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}]),t}()).\u0275fac=function(t){return new(t||yd)(r.Ob(r.E),r.Ob(r.l))},yd.\u0275dir=r.Jb({type:yd,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.Bb([xd])]}),yd),Ad={provide:Uf,useExisting:Object(r.U)((function(){return Dd})),multi:!0},Dd=((md=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r.ub}return _createClass(t,[{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}},{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map((function(t){return n._getOptionId(t)}));e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=e._getOptionValue(l.value);r.push(h)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}]),t}()).\u0275fac=function(t){return new(t||md)(r.Ob(r.E),r.Ob(r.l))},md.\u0275dir=r.Jb({type:md,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.Bb([Ad])]}),md);function Pd(t,e){return[].concat(_toConsumableArray(e.path),[t])}function Rd(t,e){t||Md(e,"Cannot find control with"),e.valueAccessor||Md(e,"No value accessor for form control with"),t.validator=ad.compose([t.validator,e.validator]),t.asyncValidator=ad.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange((function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Nd(t,e)}))}(t,e),function(t,e){t.registerOnChange((function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)}))}(t,e),function(t,e){e.valueAccessor.registerOnTouched((function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Nd(t,e),"submit"!==t.updateOn&&t.markAsTouched()}))}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange((function(t){e.valueAccessor.setDisabledState(t)})),e._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))})),e._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))}))}function Nd(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function jd(t,e){null==t&&Md(e,"Cannot find control with"),t.validator=ad.compose([t.validator,e.validator]),t.asyncValidator=ad.composeAsync([t.asyncValidator,e.asyncValidator])}function Fd(t){return Md(t,"There is no FormControl instance attached to form control element with")}function Md(t,e){var n;throw n=t.path.length>1?"path: '".concat(t.path.join(" -> "),"'"):t.path[0]?"name: '".concat(t.path,"'"):"unspecified name attribute",new Error("".concat(e," ").concat(n))}function Ld(t){return null!=t?ad.compose(t.map(ld)):null}function Vd(t){return null!=t?ad.composeAsync(t.map(hd)):null}var Ud=[Bf,Sd,_d,Id,Dd,kd];function qd(t,e){t._syncPendingControls(),e.forEach((function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}))}function Bd(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function zd(t){var e=Gd(t)?t.validators:t;return Array.isArray(e)?Ld(e):e||null}function Hd(t,e){var n=Gd(e)?e.asyncValidators:t;return Array.isArray(n)?Vd(n):n||null}function Gd(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var Wd,Kd,Qd,Yd,Xd,Zd=function(){function t(e,n){_classCallCheck(this,t),this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(t,[{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(t){this.validator=zd(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=Hd(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(e){e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(e){e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(e){return e._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=ud(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return e.setErrors(n,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;var r=t;return e.forEach((function(t){r=r instanceof $d?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof tp&&r.at(t)||null})),r}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new r.n,this.statusChanges=new r.n}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(e){return e.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){Gd(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}]),t}(),Jd=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(t=e.call(this,zd(i),Hd(o,i)))._onChange=[],t._applyFormState(r),t._setUpdateStrategy(i),t.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),t._initObservables(),t}return _createClass(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(t){return t(e.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(Zd),$d=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,zd(r),Hd(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return _createClass(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,e,n){return t[n]=e instanceof Jd?e.value:e.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,e){return!!e._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){var e=this,n=!1;return this._forEachChild((function(r,i){n=n||e.contains(i)&&t(r)})),n}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e}))}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild((function(t,r){n=e(n,t,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(Zd),tp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this,zd(r),Hd(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return _createClass(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof Jd?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,e){return!!e._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(e,n){t(e,n)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(e){return e.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(e){return e.enabled&&t(e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){return t._registerControl(e)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var t,e=_createForOfIteratorHelper(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}]),n}(Zd),ep={provide:Kf,useExisting:Object(r.U)((function(){return rp}))},np=Promise.resolve(null),rp=((Kd=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var o;return _classCallCheck(this,n),(o=e.call(this)).submitted=!1,o._directives=[],o.ngSubmit=new r.n,o.form=new $d({},Ld(t),Vd(i)),o}return _createClass(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(t){var e=this;np.then((function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Rd(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)}))}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){var e=this;np.then((function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),Bd(e._directives,t)}))}},{key:"addFormGroup",value:function(t){var e=this;np.then((function(){var n=e._findContainer(t.path),r=new $d({});jd(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(t){var e=this;np.then((function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)}))}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){var n=this;np.then((function(){n.form.get(t.path).setValue(e)}))}},{key:"setValue",value:function(t){this.control.setValue(t)}},{key:"onSubmit",value:function(t){return this.submitted=!0,qd(this.form,this._directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(t){return t.pop(),t.length?this.form.get(t):this.form}}]),n}(Kf)).\u0275fac=function(t){return new(t||Kd)(r.Ob(rd,10),r.Ob(id,10))},Kd.\u0275dir=r.Jb({type:Kd,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.bc("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.Bb([ep]),r.zb]}),Kd),ip=((Wd=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return Pd(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Ld(this._validators)}},{key:"asyncValidator",get:function(){return Vd(this._asyncValidators)}},{key:"_checkParentType",value:function(){}}]),n}(Kf)).\u0275fac=function(t){return op(t||Wd)},Wd.\u0275dir=r.Jb({type:Wd,features:[r.zb]}),Wd),op=r.Vb(ip),ap=new r.q("NgModelWithFormControlWarning"),sp={provide:Kf,useExisting:Object(r.U)((function(){return up}))},up=((Qd=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var o;return _classCallCheck(this,n),(o=e.call(this))._validators=t,o._asyncValidators=i,o.submitted=!1,o.directives=[],o.form=null,o.ngSubmit=new r.n,o}return _createClass(n,[{key:"ngOnChanges",value:function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"addControl",value:function(t){var e=this.form.get(t.path);return Rd(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){Bd(this.directives,t)}},{key:"addFormGroup",value:function(t){var e=this.form.get(t.path);jd(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(t){}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"addFormArray",value:function(t){var e=this.form.get(t.path);jd(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(t){}},{key:"getFormArray",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){this.form.get(t.path).setValue(e)}},{key:"onSubmit",value:function(t){return this.submitted=!0,qd(this.form,this.directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_updateDomValue",value:function(){var t=this;this.directives.forEach((function(e){var n=t.form.get(e.path);e.control!==n&&(function(t,e){e.valueAccessor.registerOnChange((function(){return Fd(e)})),e.valueAccessor.registerOnTouched((function(){return Fd(e)})),e._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),e._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),t&&t._clearChangeFns()}(e.control,e),n&&Rd(n,e),e.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var t=this;this.form._registerOnCollectionChange((function(){return t._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var t=Ld(this._validators);this.form.validator=ad.compose([this.form.validator,t]);var e=Vd(this._asyncValidators);this.form.asyncValidator=ad.composeAsync([this.form.asyncValidator,e])}},{key:"_checkFormPresent",value:function(){this.form||Od.missingFormException()}}]),n}(Kf)).\u0275fac=function(t){return new(t||Qd)(r.Ob(rd,10),r.Ob(id,10))},Qd.\u0275dir=r.Jb({type:Qd,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.bc("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.Bb([sp]),r.zb,r.Ab]}),Qd),cp={provide:Kf,useExisting:Object(r.U)((function(){return lp}))},lp=((Yd=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._parent=t,o._validators=r,o._asyncValidators=i,o}return _createClass(n,[{key:"_checkParentType",value:function(){dp(this._parent)&&Od.groupParentException()}}]),n}(ip)).\u0275fac=function(t){return new(t||Yd)(r.Ob(Kf,13),r.Ob(rd,10),r.Ob(id,10))},Yd.\u0275dir=r.Jb({type:Yd,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r.Bb([cp]),r.zb]}),Yd),hp={provide:Kf,useExisting:Object(r.U)((function(){return fp}))},fp=((Xd=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;return _classCallCheck(this,n),(o=e.call(this))._parent=t,o._validators=r,o._asyncValidators=i,o}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormArray(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormArray(this)}},{key:"control",get:function(){return this.formDirective.getFormArray(this)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"path",get:function(){return Pd(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"validator",get:function(){return Ld(this._validators)}},{key:"asyncValidator",get:function(){return Vd(this._asyncValidators)}},{key:"_checkParentType",value:function(){dp(this._parent)&&Od.arrayParentException()}}]),n}(Kf)).\u0275fac=function(t){return new(t||Xd)(r.Ob(Kf,13),r.Ob(rd,10),r.Ob(id,10))},Xd.\u0275dir=r.Jb({type:Xd,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r.Bb([hp]),r.zb]}),Xd);function dp(t){return!(t instanceof lp||t instanceof up||t instanceof fp)}var pp,vp,yp,mp,gp,_p,bp,wp={provide:Jf,useExisting:Object(r.U)((function(){return kp}))},kp=((gp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a,s){var u;return _classCallCheck(this,n),(u=e.call(this))._ngModelWarningConfig=s,u._added=!1,u.update=new r.n,u._ngModelWarningSent=!1,u._parent=t,u._rawValidators=i||[],u._rawAsyncValidators=o||[],u.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||Md(t,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return e.forEach((function(e){var o;e.constructor===Gf?n=e:(o=e,Ud.some((function(t){return o.constructor===t}))?(r&&Md(t,"More than one built-in value accessor matches form control with"),r=e):(i&&Md(t,"More than one custom value accessor matches form control with"),i=e))})),i||r||n||(Md(t,"No valid value accessor for form control with"),null)}(_assertThisInitialized(u),a),u}return _createClass(n,[{key:"isDisabled",set:function(t){Od.disabledAttrWarning()}},{key:"ngOnChanges",value:function(t){var e,i;this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object(r.ub)(e,n.currentValue)}(t,this.viewModel)&&(e=n,i=this._ngModelWarningConfig,Object(r.W)()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(Od.ngModelWarning("formControlName"),e._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"path",get:function(){return Pd(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Ld(this._rawValidators)}},{key:"asyncValidator",get:function(){return Vd(this._rawAsyncValidators)}},{key:"_checkParentType",value:function(){!(this._parent instanceof lp)&&this._parent instanceof ip?Od.ngModelGroupException():this._parent instanceof lp||this._parent instanceof up||this._parent instanceof fp||Od.controlParentException()}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}]),n}(Jf)).\u0275fac=function(t){return new(t||gp)(r.Ob(Kf,13),r.Ob(rd,10),r.Ob(id,10),r.Ob(Uf,10),r.Ob(ap,8))},gp.\u0275dir=r.Jb({type:gp,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.Bb([wp]),r.zb,r.Ab]}),gp._ngModelWarningSentOnce=!1,gp),Cp=((mp=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:mp}),mp.\u0275inj=r.Lb({factory:function(t){return new(t||mp)}}),mp),Sp=((yp=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"group",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(t),r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new $d(n,{asyncValidators:i,updateOn:o,validators:r})}},{key:"control",value:function(t,e,n){return new Jd(t,e,n)}},{key:"array",value:function(t,e,n){var r=this,i=t.map((function(t){return r._createControl(t)}));return new tp(i,e,n)}},{key:"_reduceControls",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(r){n[r]=e._createControl(t[r])})),n}},{key:"_createControl",value:function(t){return t instanceof Jd||t instanceof $d||t instanceof tp?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}()).\u0275fac=function(t){return new(t||yp)},yp.\u0275prov=r.Kb({token:yp,factory:yp.\u0275fac}),yp),Ep=((vp=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:vp}),vp.\u0275inj=r.Lb({factory:function(t){return new(t||vp)},providers:[wd],imports:[Cp]}),vp),Tp=((pp=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:ap,useValue:e.warnOnNgModelWithFormControl}]}}}]),t}()).\u0275mod=r.Mb({type:pp}),pp.\u0275inj=r.Lb({factory:function(t){return new(t||pp)},providers:[Sp,wd],imports:[Cp]}),pp),Op=new r.q("MAT_INPUT_VALUE_ACCESSOR"),xp=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Ip=0,Ap=function(t){return function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;_classCallCheck(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).errorState=!1,t.stateChanges=new me.a,t}return _createClass(n,[{key:"updateErrorState",value:function(){var t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}]),n}(t)}((function t(e,n,r,i){_classCallCheck(this,t),this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=r,this.ngControl=i})),Dp=((bp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,o,a,s,u,c,l){var h;_classCallCheck(this,n),(h=e.call(this,s,o,a,i))._elementRef=t,h._platform=r,h.ngControl=i,h._autofillMonitor=c,h._uid="mat-input-"+Ip++,h.focused=!1,h.stateChanges=new me.a,h.controlType="mat-input",h.autofilled=!1,h._disabled=!1,h._required=!1,h._type="text",h._readonly=!1,h._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter((function(t){return bn().has(t)}));var f=h._elementRef.nativeElement,d=f.nodeName.toLowerCase();return h._inputValueAccessor=u||f,h._previousNativeValue=h.value,h.id=h.id,r.IOS&&l.runOutsideAngular((function(){t.nativeElement.addEventListener("keyup",(function(t){var e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))}))})),h._isServer=!h._platform.isBrowser,h._isNativeSelect="select"===d,h._isTextarea="textarea"===d,h._isNativeSelect&&(h.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select"),h}return _createClass(n,[{key:"disabled",get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=de(t),this.focused&&(this.focused=!1,this.stateChanges.next())}},{key:"id",get:function(){return this._id},set:function(t){this._id=t||this._uid}},{key:"required",get:function(){return this._required},set:function(t){this._required=de(t)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t||"text",this._validateType(),!this._isTextarea&&bn().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}},{key:"value",get:function(){return this._inputValueAccessor.value},set:function(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}},{key:"readonly",get:function(){return this._readonly},set:function(t){this._readonly=de(t)}},{key:"ngOnInit",value:function(){var t=this;this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe((function(e){t.autofilled=e.isAutofilled,t.stateChanges.next()}))}},{key:"ngOnChanges",value:function(){this.stateChanges.next()}},{key:"ngOnDestroy",value:function(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}},{key:"focus",value:function(t){this._elementRef.nativeElement.focus(t)}},{key:"_focusChanged",value:function(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}},{key:"_onInput",value:function(){}},{key:"_dirtyCheckNativeValue",value:function(){var t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}},{key:"_validateType",value:function(){if(xp.indexOf(this._type)>-1)throw Error('Input type "'.concat(this._type,"\" isn't supported by matInput."))}},{key:"_isNeverEmpty",value:function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}},{key:"_isBadInput",value:function(){var t=this._elementRef.nativeElement.validity;return t&&t.badInput}},{key:"empty",get:function(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}},{key:"shouldLabelFloat",get:function(){if(this._isNativeSelect){var t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}},{key:"setDescribedByIds",value:function(t){this._ariaDescribedby=t.join(" ")}},{key:"onContainerClick",value:function(){this.focused||this.focus()}}]),n}(Ap)).\u0275fac=function(t){return new(t||bp)(r.Ob(r.l),r.Ob(mn),r.Ob(Jf,10),r.Ob(rp,8),r.Ob(up,8),r.Ob(Wl),r.Ob(Op,10),r.Ob(Pf),r.Ob(r.z))},bp.\u0275dir=r.Jb({type:bp,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:10,hostBindings:function(t,e){1&t&&r.bc("focus",(function(){return e._focusChanged(!0)}))("blur",(function(){return e._focusChanged(!1)}))("input",(function(){return e._onInput()})),2&t&&(r.Wb("disabled",e.disabled)("required",e.required),r.Db("id",e.id)("placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-describedby",e._ariaDescribedby||null)("aria-invalid",e.errorState)("aria-required",e.required.toString()),r.Fb("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher"},exportAs:["matInput"],features:[r.Bb([{provide:uf,useExisting:bp}]),r.zb,r.Ab]}),bp),Pp=((_p=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:_p}),_p.\u0275inj=r.Lb({factory:function(t){return new(t||_p)},providers:[Wl],imports:[[Rf,Af],Rf,Af]}),_p);function Rp(t,e){}var Np=function t(){_classCallCheck(this,t),this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0},jp={dialogContainer:Ks("dialogContainer",[Zs("void, exit",Xs({opacity:0,transform:"scale(0.7)"})),Zs("enter",Xs({transform:"none"})),$s("* => enter",Qs("150ms cubic-bezier(0, 0, 0.2, 1)",Xs({transform:"none",opacity:1}))),$s("* => void, * => exit",Qs("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Xs({opacity:0})))])};function Fp(){throw Error("Attempting to attach dialog content after content is already attached")}var Mp,Lp,Vp,Up=((Mp=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a,s){var u;return _classCallCheck(this,n),(u=e.call(this))._elementRef=t,u._focusTrapFactory=i,u._changeDetectorRef=o,u._config=s,u._elementFocusedBeforeDialogWasOpened=null,u._state="enter",u._animationStateChanged=new r.n,u.attachDomPortal=function(t){return u._portalOutlet.hasAttached()&&Fp(),u._setupFocusTrap(),u._portalOutlet.attachDomPortal(t)},u._ariaLabelledBy=s.ariaLabelledBy||null,u._document=a,u}return _createClass(n,[{key:"attachComponentPortal",value:function(t){return this._portalOutlet.hasAttached()&&Fp(),this._setupFocusTrap(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._portalOutlet.hasAttached()&&Fp(),this._setupFocusTrap(),this._portalOutlet.attachTemplatePortal(t)}},{key:"_recaptureFocus",value:function(){this._containsFocus()||this._focusTrap.focusInitialElement()||this._elementRef.nativeElement.focus()}},{key:"_trapFocus",value:function(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}},{key:"_restoreFocus",value:function(){var t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){var e=this._document.activeElement,n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||t.focus()}this._focusTrap&&this._focusTrap.destroy()}},{key:"_setupFocusTrap",value:function(){var t=this;this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then((function(){return t._elementRef.nativeElement.focus()})))}},{key:"_containsFocus",value:function(){var t=this._elementRef.nativeElement,e=this._document.activeElement;return t===e||t.contains(e)}},{key:"_onAnimationDone",value:function(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)}},{key:"_onAnimationStart",value:function(t){this._animationStateChanged.emit(t)}},{key:"_startExitAnimation",value:function(){this._state="exit",this._changeDetectorRef.markForCheck()}}]),n}(Bn)).\u0275fac=function(t){return new(t||Mp)(r.Ob(r.l),r.Ob(Es),r.Ob(r.h),r.Ob(u,8),r.Ob(Np))},Mp.\u0275cmp=r.Ib({type:Mp,selectors:[["mat-dialog-container"]],viewQuery:function(t,e){var n;1&t&&r.uc(Hn,!0),2&t&&r.nc(n=r.cc())&&(e._portalOutlet=n.first)},hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&r.Gb("@dialogContainer.start",(function(t){return e._onAnimationStart(t)}))("@dialogContainer.done",(function(t){return e._onAnimationDone(t)})),2&t&&(r.Db("id",e._id)("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),r.Ac("@dialogContainer",e._state))},features:[r.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&r.wc(0,Rp,0,0,"ng-template",0)},directives:[Hn],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[jp.dialogContainer]}}),Mp),qp=0,Bp=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mat-dialog-"+qp++;_classCallCheck(this,t),this._overlayRef=e,this._containerInstance=n,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new me.a,this._afterClosed=new me.a,this._beforeClosed=new me.a,this._state=0,n._id=i,n._animationStateChanged.pipe(Ve((function(t){return"done"===t.phaseName&&"enter"===t.toState})),Yn(1)).subscribe((function(){r._afterOpened.next(),r._afterOpened.complete()})),n._animationStateChanged.pipe(Ve((function(t){return"done"===t.phaseName&&"exit"===t.toState})),Yn(1)).subscribe((function(){clearTimeout(r._closeFallbackTimeout),r._finishDialogClose()})),e.detachments().subscribe((function(){r._beforeClosed.next(r._result),r._beforeClosed.complete(),r._afterClosed.next(r._result),r._afterClosed.complete(),r.componentInstance=null,r._overlayRef.dispose()})),e.keydownEvents().pipe(Ve((function(t){return 27===t.keyCode&&!r.disableClose&&!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.length?n.some((function(e){return t[e]})):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t)}))).subscribe((function(t){t.preventDefault(),r.close()})),e.backdropClick().subscribe((function(){r.disableClose?r._containerInstance._recaptureFocus():r.close()}))}return _createClass(t,[{key:"close",value:function(t){var e=this;this._result=t,this._containerInstance._animationStateChanged.pipe(Ve((function(t){return"start"===t.phaseName})),Yn(1)).subscribe((function(n){e._beforeClosed.next(t),e._beforeClosed.complete(),e._overlayRef.detachBackdrop(),e._closeFallbackTimeout=setTimeout((function(){return e._finishDialogClose()}),n.totalTime+100)})),this._containerInstance._startExitAnimation(),this._state=1}},{key:"afterOpened",value:function(){return this._afterOpened.asObservable()}},{key:"afterClosed",value:function(){return this._afterClosed.asObservable()}},{key:"beforeClosed",value:function(){return this._beforeClosed.asObservable()}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}},{key:"updatePosition",value:function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}},{key:"updateSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this}},{key:"addPanelClass",value:function(t){return this._overlayRef.addPanelClass(t),this}},{key:"removePanelClass",value:function(t){return this._overlayRef.removePanelClass(t),this}},{key:"getState",value:function(){return this._state}},{key:"_finishDialogClose",value:function(){this._state=2,this._overlayRef.dispose()}},{key:"_getPositionStrategy",value:function(){return this._overlayRef.getConfig().positionStrategy}}]),t}(),zp=new r.q("MatDialogData"),Hp=new r.q("mat-dialog-default-options"),Gp=new r.q("mat-dialog-scroll-strategy"),Wp={provide:Gp,deps:[Ir],useFactory:function(t){return function(){return t.scrollStrategies.block()}}},Kp=((Vp=function(){function t(e,n,r,i,o,a,s){var u=this;_classCallCheck(this,t),this._overlay=e,this._injector=n,this._defaultOptions=i,this._parentDialog=a,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new me.a,this._afterOpenedAtThisLevel=new me.a,this._ariaHiddenElements=new Map,this.afterAllClosed=Vr((function(){return u.openDialogs.length?u._afterAllClosed:u._afterAllClosed.pipe(Qe(void 0))})),this._scrollStrategy=o}return _createClass(t,[{key:"openDialogs",get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}},{key:"afterOpened",get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}},{key:"_afterAllClosed",get:function(){var t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel}},{key:"open",value:function(t,e){var n=this;if((e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new Np)).id&&this.getDialogById(e.id))throw Error('Dialog with id "'.concat(e.id,'" exists already. The dialog id must be unique.'));var r=this._createOverlay(e),i=this._attachDialogContainer(r,e),o=this._attachDialogContent(t,i,r,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe((function(){return n._removeOpenDialog(o)})),this.afterOpened.next(o),o}},{key:"closeAll",value:function(){this._closeDialogs(this.openDialogs)}},{key:"getDialogById",value:function(t){return this.openDialogs.find((function(e){return e.id===t}))}},{key:"ngOnDestroy",value:function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}},{key:"_createOverlay",value:function(t){var e=this._getOverlayConfig(t);return this._overlay.create(e)}},{key:"_getOverlayConfig",value:function(t){var e=new sr({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}},{key:"_attachDialogContainer",value:function(t,e){var n=r.r.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Np,useValue:e}]}),i=new Vn(Up,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(i).instance}},{key:"_attachDialogContent",value:function(t,e,n,i){var o=new Bp(n,e,i.id);if(t instanceof r.L)e.attachTemplatePortal(new Un(t,null,{$implicit:i.data,dialogRef:o}));else{var a=this._createInjector(i,o,e),s=e.attachComponentPortal(new Vn(t,i.viewContainerRef,a));o.componentInstance=s.instance}return o.updateSize(i.width,i.height).updatePosition(i.position),o}},{key:"_createInjector",value:function(t,e,n){var i=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:Up,useValue:n},{provide:zp,useValue:t.data},{provide:Bp,useValue:e}];return!t.direction||i&&i.get(In,null)||o.push({provide:In,useValue:{value:t.direction,change:Object(ge.a)()}}),r.r.create({parent:i||this._injector,providers:o})}},{key:"_removeOpenDialog",value:function(t){var e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")})),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}},{key:"_hideNonDialogContentFromAssistiveTechnology",value:function(){var t=this._overlayContainer.getContainerElement();if(t.parentElement)for(var e=t.parentElement.children,n=e.length-1;n>-1;n--){var r=e[n];r===t||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}},{key:"_closeDialogs",value:function(t){for(var e=t.length;e--;)t[e].close()}}]),t}()).\u0275fac=function(t){return new(t||Vp)(r.Xb(Ir),r.Xb(r.r),r.Xb(x,8),r.Xb(Hp,8),r.Xb(Gp),r.Xb(Vp,12),r.Xb(yr))},Vp.\u0275prov=r.Kb({token:Vp,factory:Vp.\u0275fac}),Vp),Qp=((Lp=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Lp}),Lp.\u0275inj=r.Lb({factory:function(t){return new(t||Lp)},providers:[Kp,Wp],imports:[[Dr,Gn,wl],wl]}),Lp),Yp=["mat-calendar-body",""];function Xp(t,e){if(1&t&&(r.Tb(0,"tr",2),r.Tb(1,"td",3),r.xc(2),r.Sb(),r.Sb()),2&t){var n=r.ec();r.Cb(1),r.vc("padding-top",n._cellPadding)("padding-bottom",n._cellPadding),r.Db("colspan",n.numCols),r.Cb(1),r.zc(" ",n.label," ")}}function Zp(t,e){if(1&t&&(r.Tb(0,"td",7),r.xc(1),r.Sb()),2&t){var n=r.ec(2);r.vc("padding-top",n._cellPadding)("padding-bottom",n._cellPadding),r.Db("colspan",n._firstRowOffset),r.Cb(1),r.zc(" ",n._firstRowOffset>=n.labelMinRequiredCells?n.label:""," ")}}function Jp(t,e){if(1&t){var n=r.Ub();r.Tb(0,"td",8),r.bc("click",(function(){r.pc(n);var t=e.$implicit;return r.ec(2)._cellClicked(t)})),r.Tb(1,"div",9),r.xc(2),r.Sb(),r.Sb()}if(2&t){var i=e.$implicit,o=e.index,a=r.ec().index,s=r.ec();r.vc("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),r.Fb("mat-calendar-body-disabled",!i.enabled)("mat-calendar-body-active",s._isActiveCell(a,o)),r.jc("ngClass",i.cssClasses)("tabindex",s._isActiveCell(a,o)?0:-1),r.Db("aria-label",i.ariaLabel)("aria-disabled",!i.enabled||null)("aria-selected",s.selectedValue===i.value),r.Cb(1),r.Fb("mat-calendar-body-selected",s.selectedValue===i.value)("mat-calendar-body-today",s.todayValue===i.value),r.Cb(1),r.zc(" ",i.displayValue," ")}}function $p(t,e){if(1&t&&(r.Tb(0,"tr",4),r.wc(1,Zp,2,6,"td",5),r.wc(2,Jp,3,20,"td",6),r.Sb()),2&t){var n=e.$implicit,i=e.index,o=r.ec();r.Cb(1),r.jc("ngIf",0===i&&o._firstRowOffset),r.Cb(1),r.jc("ngForOf",n)}}function tv(t,e){if(1&t&&(r.Tb(0,"th",5),r.xc(1),r.Sb()),2&t){var n=e.$implicit;r.Db("aria-label",n.long),r.Cb(1),r.yc(n.narrow)}}var ev=["*"];function nv(t,e){}function rv(t,e){if(1&t){var n=r.Ub();r.Tb(0,"mat-month-view",5),r.bc("activeDateChange",(function(t){return r.pc(n),r.ec().activeDate=t}))("selectedChange",(function(t){return r.pc(n),r.ec()._dateSelected(t)}))("_userSelection",(function(){return r.pc(n),r.ec()._userSelected()})),r.Sb()}if(2&t){var i=r.ec();r.jc("activeDate",i.activeDate)("selected",i.selected)("dateFilter",i.dateFilter)("maxDate",i.maxDate)("minDate",i.minDate)("dateClass",i.dateClass)}}function iv(t,e){if(1&t){var n=r.Ub();r.Tb(0,"mat-year-view",6),r.bc("activeDateChange",(function(t){return r.pc(n),r.ec().activeDate=t}))("monthSelected",(function(t){return r.pc(n),r.ec()._monthSelectedInYearView(t)}))("selectedChange",(function(t){return r.pc(n),r.ec()._goToDateInView(t,"month")})),r.Sb()}if(2&t){var i=r.ec();r.jc("activeDate",i.activeDate)("selected",i.selected)("dateFilter",i.dateFilter)("maxDate",i.maxDate)("minDate",i.minDate)}}function ov(t,e){if(1&t){var n=r.Ub();r.Tb(0,"mat-multi-year-view",7),r.bc("activeDateChange",(function(t){return r.pc(n),r.ec().activeDate=t}))("yearSelected",(function(t){return r.pc(n),r.ec()._yearSelectedInMultiYearView(t)}))("selectedChange",(function(t){return r.pc(n),r.ec()._goToDateInView(t,"year")})),r.Sb()}if(2&t){var i=r.ec();r.jc("activeDate",i.activeDate)("selected",i.selected)("dateFilter",i.dateFilter)("maxDate",i.maxDate)("minDate",i.minDate)}}var av=["button"];function sv(t,e){1&t&&(r.dc(),r.Tb(0,"svg",3),r.Pb(1,"path",4),r.Sb())}var uv=[[["","matDatepickerToggleIcon",""]]],cv=["[matDatepickerToggleIcon]"];function lv(t){return Error("MatDatepicker: No provider found for ".concat(t,". You must import one of the following modules at your application root: MatNativeDateModule, MatMomentDateModule, or provide a custom implementation."))}var hv,fv,dv,pv,vv=((hv=function(){function t(){_classCallCheck(this,t),this.changes=new me.a,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}return _createClass(t,[{key:"formatYearRange",value:function(t,e){return"".concat(t," \u2013 ").concat(e)}}]),t}()).\u0275fac=function(t){return new(t||hv)},hv.\u0275prov=Object(r.Kb)({factory:function(){return new hv},token:hv,providedIn:"root"}),hv),yv=function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};_classCallCheck(this,t),this.value=e,this.displayValue=n,this.ariaLabel=r,this.enabled=i,this.cssClasses=o},mv=((pv=function(){function t(e,n){_classCallCheck(this,t),this._elementRef=e,this._ngZone=n,this.numCols=7,this.activeCell=0,this.cellAspectRatio=1,this.selectedValueChange=new r.n}return _createClass(t,[{key:"_cellClicked",value:function(t){t.enabled&&this.selectedValueChange.emit(t.value)}},{key:"ngOnChanges",value:function(t){var e=t.numCols,n=this.rows,r=this.numCols;(t.rows||e)&&(this._firstRowOffset=n&&n.length&&n[0].length?r-n[0].length:0),(t.cellAspectRatio||e||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/r+"%"),!e&&this._cellWidth||(this._cellWidth=100/r+"%")}},{key:"_isActiveCell",value:function(t,e){var n=t*this.numCols+e;return t&&(n-=this._firstRowOffset),n==this.activeCell}},{key:"_focusActiveCell",value:function(){var t=this;this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.asObservable().pipe(Yn(1)).subscribe((function(){var e=t._elementRef.nativeElement.querySelector(".mat-calendar-body-active");e&&e.focus()}))}))}}]),t}()).\u0275fac=function(t){return new(t||pv)(r.Ob(r.l),r.Ob(r.z))},pv.\u0275cmp=r.Ib({type:pv,selectors:[["","mat-calendar-body",""]],hostAttrs:["role","grid","aria-readonly","true",1,"mat-calendar-body"],inputs:{numCols:"numCols",activeCell:"activeCell",cellAspectRatio:"cellAspectRatio",label:"label",rows:"rows",todayValue:"todayValue",selectedValue:"selectedValue",labelMinRequiredCells:"labelMinRequiredCells"},outputs:{selectedValueChange:"selectedValueChange"},exportAs:["matCalendarBody"],features:[r.Ab],attrs:Yp,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["aria-hidden","true","class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell mat-focus-indicator",3,"ngClass","tabindex","mat-calendar-body-disabled","mat-calendar-body-active","width","paddingTop","paddingBottom","click",4,"ngFor","ngForOf"],["aria-hidden","true",1,"mat-calendar-body-label"],["role","gridcell",1,"mat-calendar-body-cell","mat-focus-indicator",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content"]],template:function(t,e){1&t&&(r.wc(0,Xp,3,6,"tr",0),r.wc(1,$p,3,2,"tr",1)),2&t&&(r.jc("ngIf",e._firstRowOffset<e.labelMinRequiredCells),r.Cb(1),r.jc("ngForOf",e.rows))},directives:[vt,dt,ht],styles:[".mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:none;cursor:pointer}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-cell-content{position:absolute;top:5%;left:5%;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected),.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){outline:dotted 2px}[dir=rtl] .mat-calendar-body-label{text-align:right}@media(hover: none){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){background-color:transparent}}\n"],encapsulation:2,changeDetection:0}),pv),gv=((dv=function(){function t(e,n,i,o){if(_classCallCheck(this,t),this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=i,this._dir=o,this._rerenderSubscription=Ee.a.EMPTY,this.selectedChange=new r.n,this._userSelection=new r.n,this.activeDateChange=new r.n,!this._dateAdapter)throw lv("DateAdapter");if(!this._dateFormats)throw lv("MAT_DATE_FORMATS");this._activeDate=this._dateAdapter.today()}return _createClass(t,[{key:"activeDate",get:function(){return this._activeDate},set:function(t){var e=this._activeDate,n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._hasSameMonthAndYear(e,this._activeDate)||this._init()}},{key:"selected",get:function(){return this._selected},set:function(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedDate=this._getDateInCurrentMonth(this._selected)}},{key:"minDate",get:function(){return this._minDate},set:function(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"maxDate",get:function(){return this._maxDate},set:function(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"ngAfterContentInit",value:function(){var t=this;this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Qe(null)).subscribe((function(){return t._init()}))}},{key:"ngOnDestroy",value:function(){this._rerenderSubscription.unsubscribe()}},{key:"_dateSelected",value:function(t){if(this._selectedDate!=t){var e=this._dateAdapter.getYear(this.activeDate),n=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.createDate(e,n,t);this.selectedChange.emit(r)}this._userSelection.emit()}},{key:"_handleCalendarBodyKeydown",value:function(t){var e=this._activeDate,n=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return void(this.dateFilter&&!this.dateFilter(this._activeDate)||(this._dateSelected(this._dateAdapter.getDate(this._activeDate)),this._userSelection.emit(),t.preventDefault()));default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}},{key:"_init",value:function(){this._selectedDate=this._getDateInCurrentMonth(this.selected),this._todayDate=this._getDateInCurrentMonth(this._dateAdapter.today()),this._monthLabel=this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();var t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(t)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}},{key:"_focusActiveCell",value:function(){this._matCalendarBody._focusActiveCell()}},{key:"_initWeekdays",value:function(){var t=this._dateAdapter.getFirstDayOfWeek(),e=this._dateAdapter.getDayOfWeekNames("narrow"),n=this._dateAdapter.getDayOfWeekNames("long").map((function(t,n){return{long:t,narrow:e[n]}}));this._weekdays=n.slice(t).concat(n.slice(0,t))}},{key:"_createWeekCells",value:function(){var t=this._dateAdapter.getNumDaysInMonth(this.activeDate),e=this._dateAdapter.getDateNames();this._weeks=[[]];for(var n=0,r=this._firstWeekOffset;n<t;n++,r++){7==r&&(this._weeks.push([]),r=0);var i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),n+1),o=this._shouldEnableDate(i),a=this._dateAdapter.format(i,this._dateFormats.display.dateA11yLabel),s=this.dateClass?this.dateClass(i):void 0;this._weeks[this._weeks.length-1].push(new yv(n+1,e[n],a,o,s))}}},{key:"_shouldEnableDate",value:function(t){return!!t&&(!this.minDate||this._dateAdapter.compareDate(t,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(t,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(t))}},{key:"_getDateInCurrentMonth",value:function(t){return t&&this._hasSameMonthAndYear(t,this.activeDate)?this._dateAdapter.getDate(t):null}},{key:"_hasSameMonthAndYear",value:function(t,e){return!(!t||!e||this._dateAdapter.getMonth(t)!=this._dateAdapter.getMonth(e)||this._dateAdapter.getYear(t)!=this._dateAdapter.getYear(e))}},{key:"_getValidDateOrNull",value:function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}},{key:"_isRtl",value:function(){return this._dir&&"rtl"===this._dir.value}}]),t}()).\u0275fac=function(t){return new(t||dv)(r.Ob(r.h),r.Ob(Tl,8),r.Ob(El,8),r.Ob(In,8))},dv.\u0275cmp=r.Ib({type:dv,selectors:[["mat-month-view"]],viewQuery:function(t,e){var n;1&t&&r.Bc(mv,!0),2&t&&r.nc(n=r.cc())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],decls:7,vars:7,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["colspan","7","aria-hidden","true",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","selectedValue","labelMinRequiredCells","activeCell","selectedValueChange","keydown"],["scope","col"]],template:function(t,e){1&t&&(r.Tb(0,"table",0),r.Tb(1,"thead",1),r.Tb(2,"tr"),r.wc(3,tv,2,2,"th",2),r.Sb(),r.Tb(4,"tr"),r.Pb(5,"th",3),r.Sb(),r.Sb(),r.Tb(6,"tbody",4),r.bc("selectedValueChange",(function(t){return e._dateSelected(t)}))("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),r.Sb(),r.Sb()),2&t&&(r.Cb(3),r.jc("ngForOf",e._weekdays),r.Cb(3),r.jc("label",e._monthLabel)("rows",e._weeks)("todayValue",e._todayDate)("selectedValue",e._selectedDate)("labelMinRequiredCells",3)("activeCell",e._dateAdapter.getDate(e.activeDate)-1))},directives:[dt,mv],encapsulation:2,changeDetection:0}),dv),_v=((fv=function(){function t(e,n,i){if(_classCallCheck(this,t),this._changeDetectorRef=e,this._dateAdapter=n,this._dir=i,this._rerenderSubscription=Ee.a.EMPTY,this.selectedChange=new r.n,this.yearSelected=new r.n,this.activeDateChange=new r.n,!this._dateAdapter)throw lv("DateAdapter");this._activeDate=this._dateAdapter.today()}return _createClass(t,[{key:"activeDate",get:function(){return this._activeDate},set:function(t){var e=this._activeDate,n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),bv(this._dateAdapter,e,this._activeDate,this.minDate,this.maxDate)||this._init()}},{key:"selected",get:function(){return this._selected},set:function(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedYear=this._selected&&this._dateAdapter.getYear(this._selected)}},{key:"minDate",get:function(){return this._minDate},set:function(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"maxDate",get:function(){return this._maxDate},set:function(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"ngAfterContentInit",value:function(){var t=this;this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Qe(null)).subscribe((function(){return t._init()}))}},{key:"ngOnDestroy",value:function(){this._rerenderSubscription.unsubscribe()}},{key:"_init",value:function(){var t=this;this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());var e=this._dateAdapter.getYear(this._activeDate)-wv(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(var n=0,r=[];n<24;n++)r.push(e+n),4==r.length&&(this._years.push(r.map((function(e){return t._createCellForYear(e)}))),r=[]);this._changeDetectorRef.markForCheck()}},{key:"_yearSelected",value:function(t){this.yearSelected.emit(this._dateAdapter.createDate(t,0,1));var e=this._dateAdapter.getMonth(this.activeDate),n=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(t,e,1));this.selectedChange.emit(this._dateAdapter.createDate(t,e,Math.min(this._dateAdapter.getDate(this.activeDate),n)))}},{key:"_handleCalendarBodyKeydown",value:function(t){var e=this._activeDate,n=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-wv(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-wv(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?240:24);break;case 13:case 32:this._yearSelected(this._dateAdapter.getYear(this._activeDate));break;default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}},{key:"_getActiveCell",value:function(){return wv(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}},{key:"_focusActiveCell",value:function(){this._matCalendarBody._focusActiveCell()}},{key:"_createCellForYear",value:function(t){var e=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1));return new yv(t,e,e,this._shouldEnableYear(t))}},{key:"_shouldEnableYear",value:function(t){if(null==t||this.maxDate&&t>this._dateAdapter.getYear(this.maxDate)||this.minDate&&t<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(var e=this._dateAdapter.createDate(t,0,1);this._dateAdapter.getYear(e)==t;e=this._dateAdapter.addCalendarDays(e,1))if(this.dateFilter(e))return!0;return!1}},{key:"_getValidDateOrNull",value:function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}},{key:"_isRtl",value:function(){return this._dir&&"rtl"===this._dir.value}}]),t}()).\u0275fac=function(t){return new(t||fv)(r.Ob(r.h),r.Ob(El,8),r.Ob(In,8))},fv.\u0275cmp=r.Ib({type:fv,selectors:[["mat-multi-year-view"]],viewQuery:function(t,e){var n;1&t&&r.Bc(mv,!0),2&t&&r.nc(n=r.cc())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:6,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","selectedValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keydown"]],template:function(t,e){1&t&&(r.Tb(0,"table",0),r.Tb(1,"thead",1),r.Tb(2,"tr"),r.Pb(3,"th",2),r.Sb(),r.Sb(),r.Tb(4,"tbody",3),r.bc("selectedValueChange",(function(t){return e._yearSelected(t)}))("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),r.Sb(),r.Sb()),2&t&&(r.Cb(4),r.jc("rows",e._years)("todayValue",e._todayYear)("selectedValue",e._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",e._getActiveCell()))},directives:[mv],encapsulation:2,changeDetection:0}),fv);function bv(t,e,n,r,i){var o=t.getYear(e),a=t.getYear(n),s=kv(t,r,i);return Math.floor((o-s)/24)===Math.floor((a-s)/24)}function wv(t,e,n,r){return((t.getYear(e)-kv(t,n,r))%24+24)%24}function kv(t,e,n){var r=0;return n?r=t.getYear(n)-24+1:e&&(r=t.getYear(e)),r}var Cv,Sv,Ev,Tv,Ov,xv,Iv,Av,Dv,Pv=((Ev=function(){function t(e,n,i,o){if(_classCallCheck(this,t),this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=i,this._dir=o,this._rerenderSubscription=Ee.a.EMPTY,this.selectedChange=new r.n,this.monthSelected=new r.n,this.activeDateChange=new r.n,!this._dateAdapter)throw lv("DateAdapter");if(!this._dateFormats)throw lv("MAT_DATE_FORMATS");this._activeDate=this._dateAdapter.today()}return _createClass(t,[{key:"activeDate",get:function(){return this._activeDate},set:function(t){var e=this._activeDate,n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._dateAdapter.getYear(e)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}},{key:"selected",get:function(){return this._selected},set:function(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedMonth=this._getMonthInCurrentYear(this._selected)}},{key:"minDate",get:function(){return this._minDate},set:function(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"maxDate",get:function(){return this._maxDate},set:function(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"ngAfterContentInit",value:function(){var t=this;this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Qe(null)).subscribe((function(){return t._init()}))}},{key:"ngOnDestroy",value:function(){this._rerenderSubscription.unsubscribe()}},{key:"_monthSelected",value:function(t){var e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1);this.monthSelected.emit(e);var n=this._dateAdapter.getNumDaysInMonth(e);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,Math.min(this._dateAdapter.getDate(this.activeDate),n)))}},{key:"_handleCalendarBodyKeydown",value:function(t){var e=this._activeDate,n=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10:1);break;case 13:case 32:this._monthSelected(this._dateAdapter.getMonth(this._activeDate));break;default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}},{key:"_init",value:function(){var t=this;this._selectedMonth=this._getMonthInCurrentYear(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);var e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map((function(n){return n.map((function(n){return t._createCellForMonth(n,e[n])}))})),this._changeDetectorRef.markForCheck()}},{key:"_focusActiveCell",value:function(){this._matCalendarBody._focusActiveCell()}},{key:"_getMonthInCurrentYear",value:function(t){return t&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(t):null}},{key:"_createCellForMonth",value:function(t,e){var n=this._dateAdapter.format(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),this._dateFormats.display.monthYearA11yLabel);return new yv(t,e.toLocaleUpperCase(),n,this._shouldEnableMonth(t))}},{key:"_shouldEnableMonth",value:function(t){var e=this._dateAdapter.getYear(this.activeDate);if(null==t||this._isYearAndMonthAfterMaxDate(e,t)||this._isYearAndMonthBeforeMinDate(e,t))return!1;if(!this.dateFilter)return!0;for(var n=this._dateAdapter.createDate(e,t,1);this._dateAdapter.getMonth(n)==t;n=this._dateAdapter.addCalendarDays(n,1))if(this.dateFilter(n))return!0;return!1}},{key:"_isYearAndMonthAfterMaxDate",value:function(t,e){if(this.maxDate){var n=this._dateAdapter.getYear(this.maxDate),r=this._dateAdapter.getMonth(this.maxDate);return t>n||t===n&&e>r}return!1}},{key:"_isYearAndMonthBeforeMinDate",value:function(t,e){if(this.minDate){var n=this._dateAdapter.getYear(this.minDate),r=this._dateAdapter.getMonth(this.minDate);return t<n||t===n&&e<r}return!1}},{key:"_getValidDateOrNull",value:function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}},{key:"_isRtl",value:function(){return this._dir&&"rtl"===this._dir.value}}]),t}()).\u0275fac=function(t){return new(t||Ev)(r.Ob(r.h),r.Ob(Tl,8),r.Ob(El,8),r.Ob(In,8))},Ev.\u0275cmp=r.Ib({type:Ev,selectors:[["mat-year-view"]],viewQuery:function(t,e){var n;1&t&&r.Bc(mv,!0),2&t&&r.nc(n=r.cc())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:8,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","selectedValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keydown"]],template:function(t,e){1&t&&(r.Tb(0,"table",0),r.Tb(1,"thead",1),r.Tb(2,"tr"),r.Pb(3,"th",2),r.Sb(),r.Sb(),r.Tb(4,"tbody",3),r.bc("selectedValueChange",(function(t){return e._monthSelected(t)}))("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),r.Sb(),r.Sb()),2&t&&(r.Cb(4),r.jc("label",e._yearLabel)("rows",e._months)("todayValue",e._todayMonth)("selectedValue",e._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",e._dateAdapter.getMonth(e.activeDate)))},directives:[mv],encapsulation:2,changeDetection:0}),Ev),Rv=((Sv=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this._intl=e,this.calendar=n,this._dateAdapter=r,this._dateFormats=i,this.calendar.stateChanges.subscribe((function(){return o.markForCheck()}))}return _createClass(t,[{key:"periodButtonText",get:function(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);var t=this._dateAdapter.getYear(this.calendar.activeDate)-wv(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),e=t+24-1,n=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1)),r=this._dateAdapter.getYearName(this._dateAdapter.createDate(e,0,1));return this._intl.formatYearRange(n,r)}},{key:"periodButtonLabel",get:function(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}},{key:"prevButtonLabel",get:function(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}},{key:"nextButtonLabel",get:function(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}},{key:"currentPeriodClicked",value:function(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}},{key:"previousClicked",value:function(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}},{key:"nextClicked",value:function(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}},{key:"previousEnabled",value:function(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}},{key:"nextEnabled",value:function(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}},{key:"_isSameView",value:function(t,e){return"month"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(e)&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(e):"year"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(e):bv(this._dateAdapter,t,e,this.calendar.minDate,this.calendar.maxDate)}}]),t}()).\u0275fac=function(t){return new(t||Sv)(r.Ob(vv),r.Ob(Object(r.U)((function(){return Nv}))),r.Ob(El,8),r.Ob(Tl,8),r.Ob(r.h))},Sv.\u0275cmp=r.Ib({type:Sv,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:ev,decls:9,vars:8,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","cdkAriaLive","polite",1,"mat-calendar-period-button",3,"click"],[1,"mat-calendar-arrow"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(t,e){1&t&&(r.ic(),r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"button",2),r.bc("click",(function(){return e.currentPeriodClicked()})),r.xc(3),r.Pb(4,"div",3),r.Sb(),r.Pb(5,"div",4),r.hc(6),r.Tb(7,"button",5),r.bc("click",(function(){return e.previousClicked()})),r.Sb(),r.Tb(8,"button",6),r.bc("click",(function(){return e.nextClicked()})),r.Sb(),r.Sb(),r.Sb()),2&t&&(r.Cb(2),r.Db("aria-label",e.periodButtonLabel),r.Cb(1),r.zc(" ",e.periodButtonText," "),r.Cb(1),r.Fb("mat-calendar-invert","month"!=e.calendar.currentView),r.Cb(3),r.jc("disabled",!e.previousEnabled()),r.Db("aria-label",e.prevButtonLabel),r.Cb(1),r.jc("disabled",!e.nextEnabled()),r.Db("aria-label",e.nextButtonLabel))},directives:[sh,Ps],encapsulation:2,changeDetection:0}),Sv),Nv=((Cv=function(){function t(e,n,i,o){var a=this;if(_classCallCheck(this,t),this._dateAdapter=n,this._dateFormats=i,this._changeDetectorRef=o,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new r.n,this.yearSelected=new r.n,this.monthSelected=new r.n,this._userSelection=new r.n,this.stateChanges=new me.a,!this._dateAdapter)throw lv("DateAdapter");if(!this._dateFormats)throw lv("MAT_DATE_FORMATS");this._intlChanges=e.changes.subscribe((function(){o.markForCheck(),a.stateChanges.next()}))}return _createClass(t,[{key:"startAt",get:function(){return this._startAt},set:function(t){this._startAt=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"selected",get:function(){return this._selected},set:function(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"minDate",get:function(){return this._minDate},set:function(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"maxDate",get:function(){return this._maxDate},set:function(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"activeDate",get:function(){return this._clampedActiveDate},set:function(t){this._clampedActiveDate=this._dateAdapter.clampDate(t,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}},{key:"currentView",get:function(){return this._currentView},set:function(t){this._currentView=t,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck()}},{key:"ngAfterContentInit",value:function(){this._calendarHeaderPortal=new Vn(this.headerComponent||Rv),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}},{key:"ngAfterViewChecked",value:function(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}},{key:"ngOnDestroy",value:function(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}},{key:"ngOnChanges",value:function(t){var e=t.minDate||t.maxDate||t.dateFilter;if(e&&!e.firstChange){var n=this._getCurrentViewComponent();n&&(this._changeDetectorRef.detectChanges(),n._init())}this.stateChanges.next()}},{key:"focusActiveCell",value:function(){this._getCurrentViewComponent()._focusActiveCell()}},{key:"updateTodaysDate",value:function(){var t=this.currentView;("month"===t?this.monthView:"year"===t?this.yearView:this.multiYearView)._init()}},{key:"_dateSelected",value:function(t){t&&!this._dateAdapter.sameDate(t,this.selected)&&this.selectedChange.emit(t)}},{key:"_yearSelectedInMultiYearView",value:function(t){this.yearSelected.emit(t)}},{key:"_monthSelectedInYearView",value:function(t){this.monthSelected.emit(t)}},{key:"_userSelected",value:function(){this._userSelection.emit()}},{key:"_goToDateInView",value:function(t,e){this.activeDate=t,this.currentView=e}},{key:"_getValidDateOrNull",value:function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}},{key:"_getCurrentViewComponent",value:function(){return this.monthView||this.yearView||this.multiYearView}}]),t}()).\u0275fac=function(t){return new(t||Cv)(r.Ob(vv),r.Ob(El,8),r.Ob(Tl,8),r.Ob(r.h))},Cv.\u0275cmp=r.Ib({type:Cv,selectors:[["mat-calendar"]],viewQuery:function(t,e){var n;1&t&&(r.Bc(gv,!0),r.Bc(Pv,!0),r.Bc(_v,!0)),2&t&&(r.nc(n=r.cc())&&(e.monthView=n.first),r.nc(n=r.cc())&&(e.yearView=n.first),r.nc(n=r.cc())&&(e.multiYearView=n.first))},hostAttrs:[1,"mat-calendar"],inputs:{startView:"startView",startAt:"startAt",selected:"selected",minDate:"minDate",maxDate:"maxDate",headerComponent:"headerComponent",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[r.Ab],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","selectedChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","selectedChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","yearSelected","selectedChange"]],template:function(t,e){1&t&&(r.wc(0,nv,0,0,"ng-template",0),r.Tb(1,"div",1),r.wc(2,rv,1,6,"mat-month-view",2),r.wc(3,iv,1,5,"mat-year-view",3),r.wc(4,ov,1,5,"mat-multi-year-view",4),r.Sb()),2&t&&(r.jc("cdkPortalOutlet",e._calendarHeaderPortal),r.Cb(1),r.jc("ngSwitch",e.currentView),r.Cb(1),r.jc("ngSwitchCase","month"),r.Cb(1),r.jc("ngSwitchCase","year"),r.Cb(1),r.jc("ngSwitchCase","multi-year"))},directives:[Hn,Bs,Ct,St,gv,Pv,_v],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),Cv),jv={transformPanel:Ks("transformPanel",[Zs("void",Xs({opacity:0,transform:"scale(1, 0.8)"})),$s("void => enter",Qs("120ms cubic-bezier(0, 0, 0.2, 1)",Xs({opacity:1,transform:"scale(1, 1)"}))),$s("* => void",Qs("100ms linear",Xs({opacity:0})))]),fadeInCalendar:Ks("fadeInCalendar",[Zs("void",Xs({opacity:0})),Zs("enter",Xs({opacity:1})),$s("void => *",Qs("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},Fv=0,Mv=new r.q("mat-datepicker-scroll-strategy"),Lv={provide:Mv,deps:[Ir],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},Vv=kl((function t(e){_classCallCheck(this,t),this._elementRef=e})),Uv=((Ov=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t))._changeDetectorRef=r,i._animationState="enter",i._animationDone=new me.a,i}return _createClass(n,[{key:"ngAfterViewInit",value:function(){this._calendar.focusActiveCell()}},{key:"ngOnDestroy",value:function(){this._animationDone.complete()}},{key:"_startExitAnimation",value:function(){this._animationState="void",this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}}]),n}(Vv)).\u0275fac=function(t){return new(t||Ov)(r.Ob(r.l),r.Ob(r.h))},Ov.\u0275cmp=r.Ib({type:Ov,selectors:[["mat-datepicker-content"]],viewQuery:function(t,e){var n;1&t&&r.Bc(Nv,!0),2&t&&r.nc(n=r.cc())&&(e._calendar=n.first)},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(t,e){1&t&&r.Gb("@transformPanel.done",(function(){return e._animationDone.next()})),2&t&&(r.Ac("@transformPanel",e._animationState),r.Fb("mat-datepicker-content-touch",e.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[r.zb],decls:1,vars:11,consts:[["cdkTrapFocus","",3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","selectedChange","yearSelected","monthSelected","_userSelection"]],template:function(t,e){1&t&&(r.Tb(0,"mat-calendar",0),r.bc("selectedChange",(function(t){return e.datepicker.select(t)}))("yearSelected",(function(t){return e.datepicker._selectYear(t)}))("monthSelected",(function(t){return e.datepicker._selectMonth(t)}))("_userSelection",(function(){return e.datepicker.close()})),r.Sb()),2&t&&r.jc("id",e.datepicker.id)("ngClass",e.datepicker.panelClass)("startAt",e.datepicker.startAt)("startView",e.datepicker.startView)("minDate",e.datepicker._minDate)("maxDate",e.datepicker._maxDate)("dateFilter",e.datepicker._dateFilter)("headerComponent",e.datepicker.calendarHeaderComponent)("selected",e.datepicker._selected)("dateClass",e.datepicker.dateClass)("@fadeInCalendar","enter")},directives:[Nv,Ts,ht],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content-touch{display:block;max-height:80vh;overflow:auto;margin:-24px}.mat-datepicker-content-touch .mat-calendar{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-calendar{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-calendar{width:80vw;height:100vw}}\n"],encapsulation:2,data:{animation:[jv.transformPanel,jv.fadeInCalendar]},changeDetection:0}),Ov),qv=((Tv=function(){function t(e,n,i,o,a,s,u,c){if(_classCallCheck(this,t),this._dialog=e,this._overlay=n,this._ngZone=i,this._viewContainerRef=o,this._dateAdapter=s,this._dir=u,this._document=c,this.startView="month",this._touchUi=!1,this.yearSelected=new r.n,this.monthSelected=new r.n,this.openedStream=new r.n,this.closedStream=new r.n,this._opened=!1,this.id="mat-datepicker-"+Fv++,this._validSelected=null,this._focusedElementBeforeOpen=null,this._inputSubscription=Ee.a.EMPTY,this._disabledChange=new me.a,this._selectedChanged=new me.a,!this._dateAdapter)throw lv("DateAdapter");this._scrollStrategy=a}return _createClass(t,[{key:"startAt",get:function(){return this._startAt||(this._datepickerInput?this._datepickerInput.value:null)},set:function(t){this._startAt=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}},{key:"color",get:function(){return this._color||(this._datepickerInput?this._datepickerInput._getThemePalette():void 0)},set:function(t){this._color=t}},{key:"touchUi",get:function(){return this._touchUi},set:function(t){this._touchUi=de(t)}},{key:"disabled",get:function(){return void 0===this._disabled&&this._datepickerInput?this._datepickerInput.disabled:!!this._disabled},set:function(t){var e=de(t);e!==this._disabled&&(this._disabled=e,this._disabledChange.next(e))}},{key:"opened",get:function(){return this._opened},set:function(t){t?this.open():this.close()}},{key:"_selected",get:function(){return this._validSelected},set:function(t){this._validSelected=t}},{key:"_minDate",get:function(){return this._datepickerInput&&this._datepickerInput.min}},{key:"_maxDate",get:function(){return this._datepickerInput&&this._datepickerInput.max}},{key:"_dateFilter",get:function(){return this._datepickerInput&&this._datepickerInput._dateFilter}},{key:"ngOnDestroy",value:function(){this._destroyPopup(),this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete()}},{key:"select",value:function(t){var e=this._selected;this._selected=t,this._dateAdapter.sameDate(e,this._selected)||this._selectedChanged.next(t)}},{key:"_selectYear",value:function(t){this.yearSelected.emit(t)}},{key:"_selectMonth",value:function(t){this.monthSelected.emit(t)}},{key:"_registerInput",value:function(t){var e=this;if(this._datepickerInput)throw Error("A MatDatepicker can only be associated with a single input.");this._datepickerInput=t,this._inputSubscription=this._datepickerInput._valueChange.subscribe((function(t){return e._selected=t}))}},{key:"open",value:function(){if(!this._opened&&!this.disabled){if(!this._datepickerInput)throw Error("Attempted to open an MatDatepicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}},{key:"close",value:function(){var t=this;if(this._opened){if(this._popupComponentRef&&this._popupRef){var e=this._popupComponentRef.instance;e._startExitAnimation(),e._animationDone.pipe(Yn(1)).subscribe((function(){return t._destroyPopup()}))}this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null);var n=function(){t._opened&&(t._opened=!1,t.closedStream.emit(),t._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(n)):n()}}},{key:"_openAsDialog",value:function(){var t=this;this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(Uv,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"mat-datepicker-dialog",hasBackdrop:!0,disableClose:!1,width:"",height:"",minWidth:"",minHeight:"",maxWidth:"80vw",maxHeight:"",position:{},autoFocus:!0,restoreFocus:!1}),this._dialogRef.afterClosed().subscribe((function(){return t.close()})),this._dialogRef.componentInstance.datepicker=this,this._dialogRef.componentInstance.color=this.color}},{key:"_openAsPopup",value:function(){var t=this,e=new Vn(Uv,this._viewContainerRef);this._destroyPopup(),this._createPopup();var n=this._popupComponentRef=this._popupRef.attach(e);n.instance.datepicker=this,n.instance.color=this.color,this._ngZone.onStable.asObservable().pipe(Yn(1)).subscribe((function(){t._popupRef.updatePosition()}))}},{key:"_createPopup",value:function(){var t=this,e=new sr({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-datepicker-popup"});this._popupRef=this._overlay.create(e),this._popupRef.overlayElement.setAttribute("role","dialog"),Object(Se.a)(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Ve((function(e){return 27===e.keyCode||t._datepickerInput&&e.altKey&&38===e.keyCode})))).subscribe((function(e){e&&e.preventDefault(),t.close()}))}},{key:"_destroyPopup",value:function(){this._popupRef&&(this._popupRef.dispose(),this._popupRef=this._popupComponentRef=null)}},{key:"_createPopupPositionStrategy",value:function(){return this._overlay.position().flexibleConnectedTo(this._datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}},{key:"_getValidDateOrNull",value:function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}}]),t}()).\u0275fac=function(t){return new(t||Tv)(r.Ob(Kp),r.Ob(Ir),r.Ob(r.z),r.Ob(r.P),r.Ob(Mv),r.Ob(El,8),r.Ob(In,8),r.Ob(u,8))},Tv.\u0275cmp=r.Ib({type:Tv,selectors:[["mat-datepicker"]],inputs:{startView:"startView",startAt:"startAt",color:"color",touchUi:"touchUi",disabled:"disabled",opened:"opened",calendarHeaderComponent:"calendarHeaderComponent",panelClass:"panelClass",dateClass:"dateClass"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",openedStream:"opened",closedStream:"closed"},exportAs:["matDatepicker"],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),Tv),Bv={provide:Uf,useExisting:Object(r.U)((function(){return Gv})),multi:!0},zv={provide:rd,useExisting:Object(r.U)((function(){return Gv})),multi:!0},Hv=function t(e,n){_classCallCheck(this,t),this.target=e,this.targetElement=n,this.value=this.target.value},Gv=((Dv=function(){function t(e,n,i,o){var a=this;if(_classCallCheck(this,t),this._elementRef=e,this._dateAdapter=n,this._dateFormats=i,this._formField=o,this.dateChange=new r.n,this.dateInput=new r.n,this._valueChange=new r.n,this._disabledChange=new r.n,this._onTouched=function(){},this._cvaOnChange=function(){},this._validatorOnChange=function(){},this._datepickerSubscription=Ee.a.EMPTY,this._localeSubscription=Ee.a.EMPTY,this._parseValidator=function(){return a._lastValueValid?null:{matDatepickerParse:{text:a._elementRef.nativeElement.value}}},this._minValidator=function(t){var e=a._getValidDateOrNull(a._dateAdapter.deserialize(t.value));return!a.min||!e||a._dateAdapter.compareDate(a.min,e)<=0?null:{matDatepickerMin:{min:a.min,actual:e}}},this._maxValidator=function(t){var e=a._getValidDateOrNull(a._dateAdapter.deserialize(t.value));return!a.max||!e||a._dateAdapter.compareDate(a.max,e)>=0?null:{matDatepickerMax:{max:a.max,actual:e}}},this._filterValidator=function(t){var e=a._getValidDateOrNull(a._dateAdapter.deserialize(t.value));return a._dateFilter&&e&&!a._dateFilter(e)?{matDatepickerFilter:!0}:null},this._validator=ad.compose([this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]),this._lastValueValid=!1,!this._dateAdapter)throw lv("DateAdapter");if(!this._dateFormats)throw lv("MAT_DATE_FORMATS");this._localeSubscription=n.localeChanges.subscribe((function(){a.value=a.value}))}return _createClass(t,[{key:"matDatepicker",set:function(t){var e=this;t&&(this._datepicker=t,this._datepicker._registerInput(this),this._datepickerSubscription.unsubscribe(),this._datepickerSubscription=this._datepicker._selectedChanged.subscribe((function(t){e.value=t,e._cvaOnChange(t),e._onTouched(),e.dateInput.emit(new Hv(e,e._elementRef.nativeElement)),e.dateChange.emit(new Hv(e,e._elementRef.nativeElement))})))}},{key:"matDatepickerFilter",set:function(t){this._dateFilter=t,this._validatorOnChange()}},{key:"value",get:function(){return this._value},set:function(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=!t||this._dateAdapter.isValid(t),t=this._getValidDateOrNull(t);var e=this.value;this._value=t,this._formatValue(t),this._dateAdapter.sameDate(e,t)||this._valueChange.emit(t)}},{key:"min",get:function(){return this._min},set:function(t){this._min=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()}},{key:"max",get:function(){return this._max},set:function(t){this._max=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()}},{key:"disabled",get:function(){return!!this._disabled},set:function(t){var e=de(t),n=this._elementRef.nativeElement;this._disabled!==e&&(this._disabled=e,this._disabledChange.emit(e)),e&&this._isInitialized&&n.blur&&n.blur()}},{key:"ngAfterViewInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){this._datepickerSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}},{key:"registerOnValidatorChange",value:function(t){this._validatorOnChange=t}},{key:"validate",value:function(t){return this._validator?this._validator(t):null}},{key:"getPopupConnectionElementRef",value:function(){return this.getConnectedOverlayOrigin()}},{key:"getConnectedOverlayOrigin",value:function(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}},{key:"writeValue",value:function(t){this.value=t}},{key:"registerOnChange",value:function(t){this._cvaOnChange=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"_onKeydown",value:function(t){this._datepicker&&t.altKey&&40===t.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._datepicker.open(),t.preventDefault())}},{key:"_onInput",value:function(t){var e=this._lastValueValid,n=this._dateAdapter.parse(t,this._dateFormats.parse.dateInput);this._lastValueValid=!n||this._dateAdapter.isValid(n),n=this._getValidDateOrNull(n),this._dateAdapter.sameDate(n,this._value)?e!==this._lastValueValid&&this._validatorOnChange():(this._value=n,this._cvaOnChange(n),this._valueChange.emit(n),this.dateInput.emit(new Hv(this,this._elementRef.nativeElement)))}},{key:"_onChange",value:function(){this.dateChange.emit(new Hv(this,this._elementRef.nativeElement))}},{key:"_getThemePalette",value:function(){return this._formField?this._formField.color:void 0}},{key:"_onBlur",value:function(){this.value&&this._formatValue(this.value),this._onTouched()}},{key:"_formatValue",value:function(t){this._elementRef.nativeElement.value=t?this._dateAdapter.format(t,this._dateFormats.display.dateInput):""}},{key:"_getValidDateOrNull",value:function(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}}]),t}()).\u0275fac=function(t){return new(t||Dv)(r.Ob(r.l),r.Ob(El,8),r.Ob(Tl,8),r.Ob(xf,8))},Dv.\u0275dir=r.Jb({type:Dv,selectors:[["input","matDatepicker",""]],hostVars:5,hostBindings:function(t,e){1&t&&r.bc("input",(function(t){return e._onInput(t.target.value)}))("change",(function(){return e._onChange()}))("blur",(function(){return e._onBlur()}))("keydown",(function(t){return e._onKeydown(t)})),2&t&&(r.Wb("disabled",e.disabled),r.Db("aria-haspopup",e._datepicker?"dialog":null)("aria-owns",(null==e._datepicker?null:e._datepicker.opened)&&e._datepicker.id||null)("min",e.min?e._dateAdapter.toIso8601(e.min):null)("max",e.max?e._dateAdapter.toIso8601(e.max):null))},inputs:{value:"value",matDatepicker:"matDatepicker",matDatepickerFilter:"matDatepickerFilter",min:"min",max:"max",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},exportAs:["matDatepickerInput"],features:[r.Bb([Bv,zv,{provide:Op,useExisting:Dv}])]}),Dv),Wv=((Av=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||Av)},Av.\u0275dir=r.Jb({type:Av,selectors:[["","matDatepickerToggleIcon",""]]}),Av),Kv=((Iv=function(){function t(e,n,r){_classCallCheck(this,t),this._intl=e,this._changeDetectorRef=n,this._stateChanges=Ee.a.EMPTY;var i=Number(r);this.tabIndex=i||0===i?i:null}return _createClass(t,[{key:"disabled",get:function(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled},set:function(t){this._disabled=de(t)}},{key:"ngOnChanges",value:function(t){t.datepicker&&this._watchStateChanges()}},{key:"ngOnDestroy",value:function(){this._stateChanges.unsubscribe()}},{key:"ngAfterContentInit",value:function(){this._watchStateChanges()}},{key:"_open",value:function(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())}},{key:"_watchStateChanges",value:function(){var t=this,e=this.datepicker?this.datepicker._disabledChange:Object(ge.a)(),n=this.datepicker&&this.datepicker._datepickerInput?this.datepicker._datepickerInput._disabledChange:Object(ge.a)(),r=this.datepicker?Object(Se.a)(this.datepicker.openedStream,this.datepicker.closedStream):Object(ge.a)();this._stateChanges.unsubscribe(),this._stateChanges=Object(Se.a)(this._intl.changes,e,n,r).subscribe((function(){return t._changeDetectorRef.markForCheck()}))}}]),t}()).\u0275fac=function(t){return new(t||Iv)(r.Ob(vv),r.Ob(r.h),r.Yb("tabindex"))},Iv.\u0275cmp=r.Ib({type:Iv,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,e,n){var i;1&t&&r.Hb(n,Wv,!0),2&t&&r.nc(i=r.cc())&&(e._customIcon=i.first)},viewQuery:function(t,e){var n;1&t&&r.Bc(av,!0),2&t&&r.nc(n=r.cc())&&(e._button=n.first)},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:7,hostBindings:function(t,e){1&t&&r.bc("focus",(function(){return e._button.focus()})),2&t&&(r.Db("tabindex",e.disabled?null:-1),r.Fb("mat-datepicker-toggle-active",e.datepicker&&e.datepicker.opened)("mat-accent",e.datepicker&&"accent"===e.datepicker.color)("mat-warn",e.datepicker&&"warn"===e.datepicker.color))},inputs:{tabIndex:"tabIndex",disabled:"disabled",datepicker:["for","datepicker"],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[r.Ab],ngContentSelectors:cv,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple","click"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(t,e){1&t&&(r.ic(uv),r.Tb(0,"button",0,1),r.bc("click",(function(t){return e._open(t)})),r.wc(2,sv,2,0,"svg",2),r.hc(3),r.Sb()),2&t&&(r.jc("disabled",e.disabled)("disableRipple",e.disableRipple),r.Db("aria-haspopup",e.datepicker?"dialog":null)("aria-label",e._intl.openCalendarLabel)("tabindex",e.disabled?-1:e.tabIndex),r.Cb(2),r.jc("ngIf",!e._customIcon))},directives:[sh,vt],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Iv),Qv=((xv=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:xv}),xv.\u0275inj=r.Lb({factory:function(t){return new(t||xv)},providers:[vv,Lv],imports:[[Tt,uh,Qp,Dr,Hs,Gn],Rn]}),xv);n("z6cu");var Yv,Xv=n("w1tV"),Zv=((Yv=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:Yv}),Yv.\u0275inj=r.Lb({factory:function(t){return new(t||Yv)},imports:[[wl],wl]}),Yv),Jv=function(){function t(e){_classCallCheck(this,t),this.restrictAutoClose=!1,this.message=null==e?void 0:e.message,this.type=null==e?void 0:e.type,this.restrictAutoClose=null==e?void 0:e.restrictAutoClose,this.duration=null==e?void 0:e.duration,this.toolTip=null==e?void 0:e.toolTip,this.hideTooltip=null==e?void 0:e.hideTooltip,this.componentType=null==e?void 0:e.componentType}return _createClass(t,[{key:"animations",get:function(){return new $v(this.restrictAutoClose?{fadeIn:0,fadeOut:0}:{fadeIn:1e3,fadeOut:1e3})}},{key:"iconClass",get:function(){return"success"===this.type?"fa-check-circle":"warning"===this.type?"fa-exclamation-triangle":"error"===this.type?"fa-times-circle":"fa-info-circle"}},{key:"color",get:function(){return"success"===this.type?"rgb(0, 135, 90)":"warning"===this.type?"rgb(255, 153, 31)":"error"===this.type?"rgb(222, 53, 11)":"rgb(0, 82, 204)"}},{key:"labelText",get:function(){var t;return(null===(t=this.label)||void 0===t?void 0:t.length)?this.label:"success"===this.type?"Success":"error"===this.type?"Error":"warning"===this.type?"Warning":"Info"}}]),t}(),$v=function t(e){_classCallCheck(this,t),this.fadeIn=null==e?void 0:e.fadeIn,this.fadeOut=null==e?void 0:e.fadeOut},ty=function(){function t(e){_classCallCheck(this,t),this.overlay=e}return _createClass(t,[{key:"close",value:function(){this.overlay.dispose()}}]),t}();Ks("fadeAnimation",[Zs("default",Xs({opacity:1})),$s("void => *",Qs("{{fadeIn}}ms",Js([Xs({opacity:0,bottom:"-15px"}),Xs({opacity:.8,bottom:"-3px"}),Xs({opacity:1,bottom:"0"})]))),$s("default => closing",Qs("{{fadeOut}}ms",Js([Xs({opacity:.6,bottom:0}),Xs({opacity:.1,bottom:"-3px"}),Xs({opacity:0,bottom:"-15px"})])))]);var ey=function(t,e){return{value:t,params:e}};function ny(t,e){if(1&t){var n=r.Ub();r.Tb(0,"div",1),r.bc("@fadeAnimation.done",(function(t){return r.pc(n),r.ec().onFadeFinished(t)})),r.Tb(1,"div",2),r.Pb(2,"i",3),r.Sb(),r.Tb(3,"div",4),r.Tb(4,"p"),r.xc(5),r.Sb(),r.Pb(6,"div",5),r.Sb(),r.Tb(7,"div",6),r.Tb(8,"i",7),r.bc("click",(function(){return r.pc(n),r.ec().close()})),r.Sb(),r.Sb(),r.Sb()}if(2&t){var i=r.ec();r.jc("@fadeAnimation",r.mc(10,ey,i.animationState,i.toastData.animations)),r.Cb(1),r.vc("background-color",i.toastData.color),r.Cb(1),r.Eb(i.toastData.iconClass),r.Cb(2),r.vc("color",i.toastData.color),r.Cb(1),r.yc(i.toastData.labelText),r.Cb(1),r.jc("title",i.toastData.hideTooltip?"":i.toastData.toolTip||i.toastData.message)("innerHTML",i.toastData.message,r.qc)}}var ry,iy,oy,ay,sy,uy=((sy=function(){function t(e,n){_classCallCheck(this,t),this.data=e,this.ref=n,this.toastData=new Jv(e),this.animationState=this.toastData.restrictAutoClose?"none":"default"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.intervalId=setTimeout((function(){return t.animationState="closing"}),this.toastData.duration||1e4)}},{key:"ngOnDestroy",value:function(){clearTimeout(this.intervalId)}},{key:"close",value:function(){this.ref.close()}},{key:"onFadeFinished",value:function(t){"closing"===this.animationState&&"closing"===(null==t?void 0:t.toState)&&!this.toastData.restrictAutoClose&&this.close()}}]),t}()).\u0275fac=function(t){return new(t||sy)(r.Ob(Jv),r.Ob(ty))},sy.\u0275cmp=r.Ib({type:sy,selectors:[["app-toast"]],decls:1,vars:1,consts:[["class","toast-container",4,"ngIf"],[1,"toast-container"],[1,"toast-icon"],["aria-hidden","true",1,"fa","icon"],[1,"toast-body-container"],[3,"title","innerHTML"],[1,"toast-action-container"],[1,"fal","fa-times","close-icon",3,"click"]],template:function(t,e){1&t&&r.wc(0,ny,9,13,"div",0),2&t&&r.jc("ngIf",e.toastData&&e.animationState)},directives:[vt],styles:[""]}),sy),cy=((ay=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:ay}),ay.\u0275inj=r.Lb({factory:function(t){return new(t||ay)},imports:[[Tt,Dr],Dr,Ph,Lh,Af,Pp,Qv,Gl,Zv,Xa]}),ay),ly=((oy=function(){function t(){_classCallCheck(this,t),this.changes$=new me.a,this.localStorage=window.localStorage}return _createClass(t,[{key:"get",value:function(t){if(this.isLocalStorageSupported)return Object(ge.a)(JSON.parse(this.localStorage.getItem(t)))}},{key:"set",value:function(t,e){return this.isLocalStorageSupported?(this.localStorage.setItem(t,JSON.stringify(e)),this.changes$.next({type:"set",key:t,value:e}),Object(ge.a)(!0)):Object(ge.a)(!1)}},{key:"remove",value:function(t){return this.isLocalStorageSupported?(this.localStorage.removeItem(t),this.changes$.next({type:"remove",key:t}),Object(ge.a)(!0)):Object(ge.a)(!1)}},{key:"isLocalStorageSupported",get:function(){return!!this.localStorage}}]),t}()).\u0275fac=function(t){return new(t||oy)},oy.\u0275prov=r.Kb({token:oy,factory:oy.\u0275fac,providedIn:"root"}),oy),hy=((iy=function(){function t(e,n){_classCallCheck(this,t),this._overlayService=e,this.parentInjector=n,this.toastsList=[]}return _createClass(t,[{key:"show",value:function(t){var e=this.getPositionStrategy(),n=this._overlayService.create({positionStrategy:e,disposeOnNavigation:!0});t=new Jv(t);var r=new ty(n),i=this.getInjector(t,r,this.parentInjector),o=new Vn(uy,null,i);return n.attach(o),r}},{key:"getInjector",value:function(t,e,n){var r=new WeakMap;return r.set(Jv,t),r.set(ty,e),new Wn(n,r)}},{key:"getPositionStrategy",value:function(t){return this._overlayService.position().global().top(t).right("20px")}}]),t}()).\u0275fac=function(t){return new(t||iy)(r.Xb(Ir),r.Xb(r.r))},iy.\u0275prov=r.Kb({token:iy,factory:iy.\u0275fac,providedIn:"root"}),iy),fy=((ry=function(){function t(e){_classCallCheck(this,t),this.snackBar=e}return _createClass(t,[{key:"show",value:function(t,e,n){this.snackBar.open(t,e,{duration:n})}}]),t}()).\u0275fac=function(t){return new(t||ry)(r.Xb(Nh))},ry.\u0275prov=r.Kb({token:ry,factory:ry.\u0275fac,providedIn:"root"}),ry);function dy(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(zA){o(zA)}}function s(t){try{u(r.throw(t))}catch(zA){o(zA)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function py(t,e){return e?tn((function(){return t}),e):tn((function(){return t}))}var vy,yy,my=n("tf+s"),gy=n("jmUF"),_y=new r.q("angularfire2.auth.use-emulator"),by=new r.q("angularfire2.auth.settings"),wy=new r.q("angularfire2.auth.tenant-id"),ky=new r.q("angularfire2.auth.langugage-code"),Cy=new r.q("angularfire2.auth.use-device-language"),Sy=new r.q("angularfire.auth.persistence"),Ey=((yy=function t(e,r,i,o,a,s,u,c,l,h){_classCallCheck(this,t);var f=new gy.d(o),d=Object(gy.h)(f),p=new me.a,v=Object(ge.a)(void 0).pipe(Object(an.b)(f.outsideAngular),tn((function(){return o.runOutsideAngular((function(){return n.e(5).then(n.bind(null,"6nsN"))}))})),Object(ke.a)((function(){return Object(gy.g)(e,o,r)})),Object(ke.a)((function(t){return o.runOutsideAngular((function(){var e=a,n=s;return Object(gy.f)(t.name+".auth","AngularFireAuth",t,(function(){var r=o.runOutsideAngular((function(){return t.auth()}));return e&&r.useEmulator("http://"+e.join(":")),u&&(r.tenantId=u),r.languageCode=c,l&&r.useDeviceLanguage(),n&&(r.settings=n),h&&r.setPersistence(h),r}),[e,u,c,l,n,h])}))})),hn({bufferSize:1,refCount:!1}));if(Ot(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(ge.a)(null);else{v.pipe(ei()).subscribe();var y=v.pipe(tn((function(t){return t.getRedirectResult().then((function(t){return t}),(function(){return null}))})),d,hn({bufferSize:1,refCount:!1})),m=function(t){return new _e.a((function(e){return{unsubscribe:o.runOutsideAngular((function(){return t(e)}))}}))},g=v.pipe(tn((function(t){return m(t.onAuthStateChanged.bind(t))}))),_=v.pipe(tn((function(t){return m(t.onIdTokenChanged.bind(t))})));this.authState=y.pipe(py(g),Object(my.a)(f.outsideAngular),Object(an.b)(f.insideAngular)),this.user=y.pipe(py(_),Object(my.a)(f.outsideAngular),Object(an.b)(f.insideAngular)),this.idToken=this.user.pipe(tn((function(t){return t?Object($e.a)(t.getIdToken()):Object(ge.a)(null)}))),this.idTokenResult=this.user.pipe(tn((function(t){return t?Object($e.a)(t.getIdTokenResult()):Object(ge.a)(null)}))),this.credential=Object(Se.a)(y,p,this.authState.pipe(Ve((function(t){return!t})))).pipe(Object(ke.a)((function(t){return(null==t?void 0:t.user)?t:null})),Object(my.a)(f.outsideAngular),Object(an.b)(f.insideAngular))}return Object(gy.i)(this,v,o,{spy:{apply:function(t,e,n){(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then((function(t){return p.next(t)}))}}})}).\u0275fac=function(t){return new(t||yy)(r.Xb(gy.c),r.Xb(gy.b,8),r.Xb(r.B),r.Xb(r.z),r.Xb(_y,8),r.Xb(by,8),r.Xb(wy,8),r.Xb(ky,8),r.Xb(Cy,8),r.Xb(Sy,8))},yy.\u0275prov=Object(r.Kb)({factory:function(){return new yy(Object(r.Xb)(gy.c),Object(r.Xb)(gy.b,8),Object(r.Xb)(r.B),Object(r.Xb)(r.z),Object(r.Xb)(_y,8),Object(r.Xb)(by,8),Object(r.Xb)(wy,8),Object(r.Xb)(ky,8),Object(r.Xb)(Cy,8),Object(r.Xb)(Sy,8))},token:yy,providedIn:"any"}),yy),Ty=((vy=function(){function t(e,n,r){_classCallCheck(this,t),this.firebaseAuth=e,this.localStorageService=n,this.router=r}return _createClass(t,[{key:"signIn",value:function(t,e){return dy(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.firebaseAuth.signInWithEmailAndPassword(t,e).then((function(t){r.isLoggedIn=!0,r.localStorageService.set("user",t.user)}));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"signUp",value:function(t,e){return dy(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.firebaseAuth.createUserWithEmailAndPassword(t,e).then((function(t){r.isLoggedIn=!0,r.localStorageService.set("user",t.user)}));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"logOut",value:function(){this.firebaseAuth.signOut(),this.localStorageService.remove("user"),this.isLoggedIn=!1,this.router.navigate(["/login"])}}]),t}()).\u0275fac=function(t){return new(t||vy)(r.Xb(Ey),r.Xb(ly),r.Xb(Da))},vy.\u0275prov=r.Kb({token:vy,factory:vy.\u0275fac,providedIn:"root"}),vy),Oy=n("Jgta"),xy=n("zIRd"),Iy=n("q/0M"),Ay=n("qOnz"),Dy=function(t,e){return(Dy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Py(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ry,Ny="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},jy=jy||{},Fy=Ny||self;function My(){}function Ly(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Vy(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Uy="closure_uid_"+(1e9*Math.random()>>>0),qy=0;function By(t,e,n){return t.call.apply(t.bind,arguments)}function zy(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Hy(t,e,n){return(Hy=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?By:zy).apply(null,arguments)}function Gy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Wy(){return Date.now()}function Ky(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Qy(){this.j=this.j,this.i=this.i}Qy.prototype.j=!1,Qy.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Uy)&&t[Uy]||(t[Uy]=++qy)}(this)},Qy.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Yy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Xy=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Zy(t){return Array.prototype.concat.apply([],arguments)}function Jy(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function $y(t){return/^[\s\xa0]*$/.test(t)}var tm,em=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function nm(t,e){return-1!=t.indexOf(e)}function rm(t,e){return t<e?-1:t>e?1:0}t:{var im=Fy.navigator;if(im){var om=im.userAgent;if(om){tm=om;break t}}tm=""}function am(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function sm(t){var e={};for(var n in t)e[n]=t[n];return e}var um="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cm(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<um.length;o++)n=um[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lm(t){return lm[" "](t),t}lm[" "]=My;var hm,fm,dm=nm(tm,"Opera"),pm=nm(tm,"Trident")||nm(tm,"MSIE"),vm=nm(tm,"Edge"),ym=vm||pm,mm=nm(tm,"Gecko")&&!(nm(tm.toLowerCase(),"webkit")&&!nm(tm,"Edge"))&&!(nm(tm,"Trident")||nm(tm,"MSIE"))&&!nm(tm,"Edge"),gm=nm(tm.toLowerCase(),"webkit")&&!nm(tm,"Edge");function _m(){var t=Fy.document;return t?t.documentMode:void 0}t:{var bm="",wm=(fm=tm,mm?/rv:([^\);]+)(\)|;)/.exec(fm):vm?/Edge\/([\d\.]+)/.exec(fm):pm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fm):gm?/WebKit\/(\S+)/.exec(fm):dm?/(?:Version)[ \/]?(\S+)/.exec(fm):void 0);if(wm&&(bm=wm?wm[1]:""),pm){var km=_m();if(null!=km&&km>parseFloat(bm)){hm=String(km);break t}}hm=bm}var Cm={};function Sm(t){return function(t,e){var n=Cm;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=em(String(hm)).split("."),r=em(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=rm(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||rm(0==a[2].length,0==s[2].length)||rm(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var Em=Fy.document&&pm&&(_m()||parseInt(hm,10))||void 0,Tm=!pm||9<=Number(Em),Om=pm&&!Sm("9"),xm=function(){if(!Fy.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Fy.addEventListener("test",My,e),Fy.removeEventListener("test",My,e)}catch(n){}return t}();function Im(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Am(t,e){if(Im.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(mm){t:{try{lm(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Dm[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Im.prototype.b=function(){this.defaultPrevented=!0},Ky(Am,Im);var Dm={2:"touch",3:"pen",4:"mouse"};Am.prototype.b=function(){Am.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Om)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Pm="closure_listenable_"+(1e6*Math.random()|0),Rm=0;function Nm(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Rm,this.Y=this.Z=!1}function jm(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Fm(t){this.src=t,this.a={},this.b=0}function Mm(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Yy(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(jm(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Lm(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Fm.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Lm(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Nm(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Vm="closure_lm_"+(1e6*Math.random()|0),Um={};function qm(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Ym(r),e&&e[Pm]?e.wa(n,r,Vy(i)?!!i.capture:!!i,o):Bm(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)qm(t,e[o],n,r,i);return null}return n=Ym(n),t&&t[Pm]?t.va(e,n,Vy(r)?!!r.capture:!!r,i):Bm(t,e,n,!1,r,i)}function Bm(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Vy(i)?!!i.capture:!!i;if(a&&!Tm)return null;var s=Km(t);if(s||(t[Vm]=s=new Fm(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Wm,e=Tm?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xm||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Hm(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function zm(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Pm])Mm(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hm(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Km(e))?(Mm(n,t),0==n.b&&(n.src=null,e[Vm]=null)):jm(t)}}}function Hm(t){return t in Um?Um[t]:Um[t]="on"+t}function Gm(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&zm(t),n.call(r,e)}function Wm(t,e){if(t.Y)return!0;if(!Tm){if(!e)t:{e=["window","event"];for(var n=Fy,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Gm(t,e=new Am(e,this))}return Gm(t,new Am(e,this))}function Km(t){return(t=t[Vm])instanceof Fm?t:null}var Qm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ym(t){return"function"==typeof t?t:(t[Qm]||(t[Qm]=function(e){return t.handleEvent(e)}),t[Qm])}function Xm(){Qy.call(this),this.c=new Fm(this),this.J=this,this.C=null}function Zm(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Im(e,t);else if(e instanceof Im)e.target=e.target||t;else{var i=e;cm(e=new Im(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Jm(a,r,!0,e)&&i}if(i=Jm(a=e.a=t,r,!0,e)&&i,i=Jm(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Jm(a=e.a=n[o],r,!1,e)&&i}function Jm(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&Mm(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Ky(Xm,Qy),Xm.prototype[Pm]=!0,(Ry=Xm.prototype).addEventListener=function(t,e,n,r){qm(this,t,e,n,r)},Ry.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=Vy(i)?!!i.capture:!!i,r=Ym(r),e&&e[Pm]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Lm(a=e.a[n],r,i,o))&&(jm(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):e&&(e=Km(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Lm(n,r,i,o)),(r=-1<e?n[e]:null)&&zm(r))}(this,t,e,n,r)},Ry.G=function(){if(Xm.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)jm(n[r]);delete e.a[t],e.b--}}this.C=null},Ry.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ry.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var $m=Fy.JSON.stringify;function tg(){this.b=this.a=null}var eg,ng=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new ig}),(function(t){t.reset()}));function rg(){var t=ug,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ig(){this.next=this.b=this.a=null}function og(t){Fy.setTimeout((function(){throw t}),0)}function ag(t,e){eg||function(){var t=Fy.Promise.resolve(void 0);eg=function(){t.then(cg)}}(),sg||(eg(),sg=!0),ug.add(t,e)}tg.prototype.add=function(t,e){var n=ng.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ig.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ig.prototype.reset=function(){this.next=this.b=this.a=null};var sg=!1,ug=new tg;function cg(){for(var t;t=rg();){try{t.a.call(t.b)}catch(n){og(n)}var e=ng;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}sg=!1}function lg(t,e){Xm.call(this),this.b=t||1,this.a=e||Fy,this.f=Hy(this.Za,this),this.g=Wy()}function hg(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function fg(t,e,n){if("function"==typeof t)n&&(t=Hy(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Hy(t.handleEvent,t)}return 2147483647<Number(e)?-1:Fy.setTimeout(t,e||0)}function dg(t){t.a=fg((function(){t.a=null,t.c&&(t.c=!1,dg(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ky(lg,Xm),(Ry=lg.prototype).aa=!1,Ry.M=null,Ry.Za=function(){if(this.aa){var t=Wy()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Zm(this,"tick"),this.aa&&(hg(this),this.start()))}},Ry.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Wy())},Ry.G=function(){lg.X.G.call(this),hg(this),delete this.a};var pg=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Dy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:dg(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Fy.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Qy);function vg(t){Qy.call(this),this.b=t,this.a={}}Ky(vg,Qy);var yg=[];function mg(t,e,n,r){Array.isArray(n)||(n&&(yg[0]=n.toString()),n=yg);for(var i=0;i<n.length;i++){var o=qm(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function gg(t){am(t.a,(function(t,e){this.a.hasOwnProperty(e)&&zm(t)}),t),t.a={}}function _g(){this.a=!0}function bg(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return $m(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}vg.prototype.G=function(){vg.X.G.call(this),gg(this)},vg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_g.prototype.info=function(){};var wg={},kg=null;function Cg(){return kg=kg||new Xm}function Sg(t){Im.call(this,wg.Fa,t)}function Eg(t){var e=Cg();Zm(e,new Sg(e,t))}function Tg(t,e){Im.call(this,wg.STAT_EVENT,t),this.stat=e}function Og(t){var e=Cg();Zm(e,new Tg(e,t))}function xg(t){Im.call(this,wg.Ga,t)}function Ig(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Fy.setTimeout((function(){t()}),e)}wg.Fa="serverreachability",Ky(Sg,Im),wg.STAT_EVENT="statevent",Ky(Tg,Im),wg.Ga="timingevent",Ky(xg,Im);var Ag={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Dg={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Pg(){}function Rg(){}Pg.prototype.a=null;var Ng,jg={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Fg(){Im.call(this,"d")}function Mg(){Im.call(this,"c")}function Lg(){}function Vg(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new vg(this),this.P=Ug,this.R=new lg(t=ym?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ky(Fg,Im),Ky(Mg,Im),Ky(Lg,Pg),Ng=new Lg;var Ug=45e3,qg={},Bg={};function zg(t,e,n){t.H=1,t.i=h_(o_(e)),t.j=n,t.I=!0,Hg(t,null)}function Hg(t,e){t.u=Wy(),Kg(t),t.l=o_(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),S_(n.b,"t",r),t.D=0,t.a=gb(t.g,t.g.C?e:null),0<t.O&&(t.F=new pg(Hy(t.Ca,t,t.a),t.O)),mg(t.J,t.a,"readystatechange",t.Xa),e=t.B?sm(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Eg(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Gg(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Wg(t,n);if(i==Bg){4==e&&(t.h=4,Og(14),r=!1),bg(t.c,t.f,null,"[Incomplete Response]");break}if(i==qg){t.h=4,Og(15),bg(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}bg(t.c,t.f,i,null),Jg(t,i)}4==e&&0==n.length&&(t.h=1,Og(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),lb(e),e.F=!0,Og(11))):(bg(t.c,t.f,n,"[Invalid Chunked Response]"),Zg(t),Xg(t))}function Wg(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Bg:(n=Number(e.substring(n,r)),isNaN(n)?qg:(r+=1)+n>e.length?Bg:(e=e.substr(r,n),t.D=r+n,e))}function Kg(t){t.T=Wy()+t.P,Qg(t,t.P)}function Qg(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ig(Hy(t.Va,t),e)}function Yg(t){t.o&&(Fy.clearTimeout(t.o),t.o=null)}function Xg(t){0==t.g.v||t.A||db(t.g,t)}function Zg(t){Yg(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,hg(t.R),gg(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Jg(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||D_(n.b,t)))if(n.I=t.N,!t.C&&D_(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(nA){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;fb(n),eb(n)}cb(n),Og(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ig(Hy(n.Sa,n),6e3));if(1>=A_(n.b)&&n.ea){try{n.ea()}catch(nA){}n.ea=void 0}}else vb(n,11)}else if((t.C||n.a==t)&&fb(n),!$y(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(nm(l,"spdy")||nm(l,"quic")||nm(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(P_(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,l_(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Wy()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=mb(u,u.C?u.ga:null,u.fa),d.C){R_(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Yg(p),Kg(p)),u.a=d}else ub(u);0<n.g.length&&ib(n)}else"stop"!=i[0]&&"close"!=i[0]||vb(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?vb(n,7):tb(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Eg(4)}catch(nA){}}function $g(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ly(t)||"string"==typeof t)Xy(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ly(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ly(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function t_(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof t_)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function e_(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];n_(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)n_(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function n_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ry=Vg.prototype).setTimeout=function(t){this.P=t},Ry.Xa=function(t){t=t.target;var e=this.F;e&&3==X_(t)?e.f():this.Ca(t)},Ry.Ca=function(t){try{if(t==this.a)t:{var e=X_(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ym&&!this.a.$())){this.A||4!=e||7==n||Eg(8==n||0>=r?3:2),Yg(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$y(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Og(12),Zg(this),Xg(this);break t}bg(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Jg(this,u)}this.I?(Gg(this,e,o),ym&&this.b&&3==e&&(mg(this.J,this.R,"tick",this.Wa),this.R.start())):(bg(this.c,this.f,o,null),Jg(this,o)),4==e&&Zg(this),this.b&&!this.A&&(4==e?db(this.g,this):(this.b=!1,Kg(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Og(12)):(this.h=0,Og(13)),Zg(this),Xg(this)}}}catch(c){}},Ry.Wa=function(){if(this.a){var t=X_(this.a),e=this.a.$();this.D<e.length&&(Yg(this),Gg(this,t,e),this.b&&4!=t&&Kg(this))}},Ry.cancel=function(){this.A=!0,Zg(this)},Ry.Va=function(){this.o=null;var t=Wy();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Eg(3),Og(17)),Zg(this),this.h=2,Xg(this)):Qg(this,this.T-t)},(Ry=t_.prototype).K=function(){e_(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ry.L=function(){return e_(this),this.a.concat()},Ry.get=function(t,e){return n_(this.b,t)?this.b[t]:e},Ry.set=function(t,e){n_(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ry.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var r_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function i_(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof i_){this.a=void 0!==e?e:t.a,a_(this,t.f),this.j=t.j,s_(this,t.c),u_(this,t.h),this.g=t.g,e=t.b;var n=new b_;n.c=e.c,e.a&&(n.a=new t_(e.a),n.b=e.b),c_(this,n),this.i=t.i}else t&&(n=String(t).match(r_))?(this.a=!!e,a_(this,n[1]||"",!0),this.j=f_(n[2]||""),s_(this,n[3]||"",!0),u_(this,n[4]),this.g=f_(n[5]||"",!0),c_(this,n[6]||"",!0),this.i=f_(n[7]||"")):(this.a=!!e,this.b=new b_(null,this.a))}function o_(t){return new i_(t)}function a_(t,e,n){t.f=n?f_(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function s_(t,e,n){t.c=n?f_(e,!0):e}function u_(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function c_(t,e,n){e instanceof b_?(t.b=e,function(t,e){e&&!t.f&&(w_(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(k_(this,e),S_(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=d_(e,g_)),t.b=new b_(e,t.a))}function l_(t,e,n){t.b.set(e,n)}function h_(t){return l_(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Wy()).toString(36)),t}function f_(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function d_(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,p_),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function p_(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}i_.prototype.toString=function(){var t=[],e=this.f;e&&t.push(d_(e,v_,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(d_(e,v_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(d_(n,"/"==n.charAt(0)?m_:y_,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",d_(n,__)),t.join("")};var v_=/[#\/\?@]/g,y_=/[#\?:]/g,m_=/[#\?]/g,g_=/[#\?@]/g,__=/#/g;function b_(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function w_(t){t.a||(t.a=new t_,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function k_(t,e){w_(t),e=E_(t,e),n_(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,n_((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&e_(t)))}function C_(t,e){return w_(t),e=E_(t,e),n_(t.a.b,e)}function S_(t,e,n){k_(t,e),0<n.length&&(t.c=null,t.a.set(E_(t,e),Jy(n)),t.b+=n.length)}function E_(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ry=b_.prototype).add=function(t,e){w_(this),this.c=null,t=E_(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ry.forEach=function(t,e){w_(this),this.a.forEach((function(n,r){Xy(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Ry.L=function(){w_(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ry.K=function(t){w_(this);var e=[];if("string"==typeof t)C_(this,t)&&(e=Zy(e,this.a.get(E_(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Zy(e,t[n])}return e},Ry.set=function(t,e){return w_(this),this.c=null,C_(this,t=E_(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ry.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ry.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var T_=function(t,e){this.b=t,this.a=e};function O_(t){this.g=t||x_,t=Fy.PerformanceNavigationTiming?0<(t=Fy.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Fy.ia&&Fy.ia.ya&&Fy.ia.ya()&&Fy.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var x_=10;function I_(t){return!!t.b||!!t.a&&t.a.size>=t.f}function A_(t){return t.b?1:t.a?t.a.size:0}function D_(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function P_(t,e){t.a?t.a.add(e):t.b=e}function R_(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function N_(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Py(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Jy(t.c)}function j_(){}function F_(){this.a=new j_}function M_(t,e,n){var r=n||"";try{$g(t,(function(t,n){var i=t;Vy(t)&&(i=$m(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(zA){throw e.push(r+"type="+encodeURIComponent("_badmap")),zA}}function L_(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}O_.prototype.cancel=function(){var t,e;if(this.c=N_(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Py(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},j_.prototype.stringify=function(t){return Fy.JSON.stringify(t,void 0)},j_.prototype.parse=function(t){return Fy.JSON.parse(t,void 0)};var V_=Fy.JSON.parse;function U_(t){Xm.call(this),this.headers=new t_,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=q_,this.D=this.F=!1}Ky(U_,Xm);var q_="",B_=/^https?$/i,z_=["POST","PUT"];function H_(t){return"content-type"==t.toLowerCase()}function G_(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,W_(t),Q_(t)}function W_(t){t.u||(t.u=!0,Zm(t,"complete"),Zm(t,"error"))}function K_(t){if(t.b&&void 0!==jy&&(!t.s[1]||4!=X_(t)||2!=t.W()))if(t.l&&4==X_(t))fg(t.za,0,t);else if(Zm(t,"readystatechange"),4==X_(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(r_)[1]||null;if(!o&&Fy.self&&Fy.self.location){var a=Fy.self.location.protocol;o=a.substr(0,a.length-1)}i=!B_.test(o?o.toLowerCase():"")}e=i}if(e)Zm(t,"complete"),Zm(t,"success");else{t.h=6;try{var s=2<X_(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",W_(t)}}finally{Q_(t)}}}function Q_(t,e){if(t.a){Y_(t);var n=t.a,r=t.s[0]?My:null;t.a=null,t.s=null,e||Zm(t,"ready");try{n.onreadystatechange=r}catch(zA){}}}function Y_(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Fy.clearTimeout(t.m),t.m=null)}function X_(t){return t.a?t.a.readyState:0}function Z_(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return am(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):l_(t,e,n))}function J_(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $_(t){this.pa=0,this.g=[],this.c=new _g,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=J_("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=J_("baseRetryDelayMs",5e3,t),this.Ra=J_("retryDelaySeedMs",1e4,t),this.Ma=J_("forwardChannelMaxRetries",2,t),this.ma=J_("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new O_(t&&t.concurrentRequestLimit),this.ka=new F_,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function tb(t){if(nb(t),3==t.v){var e=t.R++,n=o_(t.B);l_(n,"SID",t.J),l_(n,"RID",e),l_(n,"TYPE","terminate"),ab(t,n),(e=new Vg(t,t.c,e,void 0)).H=2,e.i=h_(o_(n)),n=!1,Fy.navigator&&Fy.navigator.sendBeacon&&(n=Fy.navigator.sendBeacon(e.i.toString(),"")),!n&&Fy.Image&&((new Image).src=e.i,n=!0),n||(e.a=gb(e.g,null),e.a.ba(e.i)),e.u=Wy(),Kg(e)}yb(t)}function eb(t){t.a&&(lb(t),t.a.cancel(),t.a=null)}function nb(t){eb(t),t.j&&(Fy.clearTimeout(t.j),t.j=null),fb(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Fy.clearTimeout(t.h),t.h=null)}function rb(t,e){t.g.push(new T_(t.Oa++,e)),3==t.v&&ib(t)}function ib(t){I_(t.b)||t.h||(t.h=!0,ag(t.Ba,t),t.u=0)}function ob(t,e){var n;n=e?e.f:t.R++;var r=o_(t.B);l_(r,"SID",t.J),l_(r,"RID",n),l_(r,"AID",t.P),ab(t,r),t.i&&t.l&&Z_(r,t.i,t.l),n=new Vg(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=sb(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),P_(t.b,n),zg(n,r,e)}function ab(t,e){t.f&&$g({},(function(t,n){l_(e,n,t)}))}function sb(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Hy(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{M_(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ub(t){t.a||t.j||(t.T=1,ag(t.Aa,t),t.o=0)}function cb(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ig(Hy(t.Aa,t),pb(t,t.o)),t.o++,0))}function lb(t){null!=t.s&&(Fy.clearTimeout(t.s),t.s=null)}function hb(t){t.a=new Vg(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=o_(t.la);l_(e,"RID","rpc"),l_(e,"SID",t.J),l_(e,"CI",t.H?"0":"1"),l_(e,"AID",t.P),ab(t,e),l_(e,"TYPE","xmlhttp"),t.i&&t.l&&Z_(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=h_(o_(e)),n.j=null,n.I=!0,Hg(n,t)}function fb(t){null!=t.m&&(Fy.clearTimeout(t.m),t.m=null)}function db(t,e){var n=null;if(t.a==e){fb(t),lb(t),t.a=null;var r=2}else{if(!D_(t.b,e))return;n=e.s,R_(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Wy()-e.u;var i=t.u;Zm(r=Cg(),new xg(r,n,e,i)),ib(t)}else ub(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(A_(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ig(Hy(t.Ba,t,e),pb(t,t.u)),t.u++,0)))}(t,e)||2==r&&cb(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:vb(t,5);break;case 4:vb(t,10);break;case 3:vb(t,6);break;default:vb(t,2)}}function pb(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function vb(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Hy(t.Ya,t);n||(n=new i_("//www.google.com/images/cleardot.gif"),Fy.location&&"http"==Fy.location.protocol||a_(n,"https"),h_(n)),function(t,e){var n=new _g;if(Fy.Image){var r=new Image;r.onload=Gy(L_,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Gy(L_,n,r,"TestLoadImage: error",!1,e),r.onabort=Gy(L_,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gy(L_,n,r,"TestLoadImage: timeout",!1,e),Fy.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Og(2);t.v=0,t.f&&t.f.ra(e),yb(t),nb(t)}function yb(t){t.v=0,t.I=-1,t.f&&(0==N_(t.b).length&&0==t.g.length||(t.b.c.length=0,Jy(t.g),t.g.length=0),t.f.qa())}function mb(t,e,n){var r=function(t){return t instanceof i_?o_(t):new i_(t,void 0)}(n);if(""!=r.c)e&&s_(r,e+"."+r.c),u_(r,r.h);else{var i=Fy.location;r=function(t,e,n,r){var i=new i_(null,void 0);return t&&a_(i,t),e&&s_(i,e),n&&u_(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&am(t.V,(function(t,e){l_(r,e,t)})),n=t.na,(e=t.A)&&n&&l_(r,e,n),l_(r,"VER",t.ha),ab(t,r),r}function gb(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new U_(t.Na)).F=t.C,e}function _b(){}function bb(){if(pm&&!(10<=Number(Em)))throw Error("Environmental error: no available transport.")}function wb(t,e){Xm.call(this),this.a=new $_(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!$y(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$y(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Sb(this)}function kb(t){Fg.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Cb(){Mg.call(this),this.status=1}function Sb(t){this.a=t}(Ry=U_.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ng),this.a.onreadystatechange=Hy(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void G_(this,o)}t=n||"";var i=new t_(this.headers);r&&$g(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=H_,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Fy.FormData&&t instanceof Fy.FormData,!(0<=Yy(z_,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Y_(this),0<this.o&&((this.D=function(t){return pm&&Sm(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Hy(this.xa,this)):this.m=fg(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){G_(this,o)}},Ry.xa=function(){void 0!==jy&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Zm(this,"timeout"),this.abort(8))},Ry.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Zm(this,"complete"),Zm(this,"abort"),Q_(this))},Ry.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Q_(this,!0)),U_.X.G.call(this)},Ry.za=function(){this.j||(this.A||this.l||this.g?K_(this):this.Ua())},Ry.Ua=function(){K_(this)},Ry.W=function(){try{return 2<X_(this)?this.a.status:-1}catch(fm){return-1}},Ry.$=function(){try{return this.a?this.a.responseText:""}catch(fm){return""}},Ry.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),V_(e)}},Ry.ua=function(){return this.h},Ry.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ry=$_.prototype).ha=8,Ry.v=1,Ry.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Vg(this,this.c,t,void 0),r=this.l;if(this.O&&(r?cm(r=sm(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=sb(this,n,e),l_(i=o_(this.B),"RID",t),l_(i,"CVER",22),this.A&&l_(i,"X-HTTP-Session-Id",this.A),ab(this,i),this.i&&r&&Z_(i,this.i,r),P_(this.b,n),this.Ia&&l_(i,"TYPE","init"),this.da?(l_(i,"$req",e),l_(i,"SID","null"),n.U=!0,zg(n,i,null)):zg(n,i,e),this.v=2}}else 3==this.v&&(t?ob(this,t):0==this.g.length||I_(this.b)||ob(this))},Ry.Aa=function(){if(this.j=null,hb(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ig(Hy(this.Ta,this),t)}},Ry.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Og(10),eb(this),hb(this))},Ry.Sa=function(){null!=this.m&&(this.m=null,eb(this),cb(this),Og(19))},Ry.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Og(2)):(this.c.info("Failed to ping google.com"),Og(1))},(Ry=_b.prototype).ta=function(){},Ry.sa=function(){},Ry.ra=function(){},Ry.qa=function(){},Ry.Ja=function(){},bb.prototype.a=function(t,e){return new wb(t,e)},Ky(wb,Xm),wb.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Og(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=mb(t,null,t.fa),ib(t)},wb.prototype.close=function(){tb(this.a)},wb.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,rb(this.a,e)}else this.l?((e={}).__data__=$m(t),rb(this.a,e)):rb(this.a,t)},wb.prototype.G=function(){this.a.f=null,delete this.f,tb(this.a),delete this.a,wb.X.G.call(this)},Ky(kb,Fg),Ky(Cb,Mg),Ky(Sb,_b),Sb.prototype.ta=function(){Zm(this.a,"a")},Sb.prototype.sa=function(t){Zm(this.a,new kb(t))},Sb.prototype.ra=function(t){Zm(this.a,new Cb(t))},Sb.prototype.qa=function(){Zm(this.a,"b")},bb.prototype.createWebChannel=bb.prototype.a,wb.prototype.send=wb.prototype.h,wb.prototype.open=wb.prototype.g,wb.prototype.close=wb.prototype.close,Ag.NO_ERROR=0,Ag.TIMEOUT=8,Ag.HTTP_ERROR=6,Dg.COMPLETE="complete",Rg.EventType=jg,jg.OPEN="a",jg.CLOSE="b",jg.ERROR="c",jg.MESSAGE="d",Xm.prototype.listen=Xm.prototype.va,U_.prototype.listenOnce=U_.prototype.wa,U_.prototype.getLastError=U_.prototype.Qa,U_.prototype.getLastErrorCode=U_.prototype.ua,U_.prototype.getStatus=U_.prototype.W,U_.prototype.getResponseJson=U_.prototype.Pa,U_.prototype.getResponseText=U_.prototype.$,U_.prototype.send=U_.prototype.ba;var Eb=Ag,Tb=Dg,Ob=wg,xb=Rg,Ib=U_,Ab=function(t,e){return(Ab=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Db(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ab(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Pb(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(zA){o(zA)}}function s(t){try{u(r.throw(t))}catch(zA){o(zA)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Rb(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(zA){o=[6,zA],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Nb(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}var jb=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();jb.o=-1;var Fb=new Iy.b("@firebase/firestore");function Mb(){return Fb.logLevel}function Lb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fb.logLevel<=Iy.a.DEBUG){var r=e.map(qb);Fb.debug.apply(Fb,Nb(["Firestore (8.3.1): "+t],r))}}function Vb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fb.logLevel<=Iy.a.ERROR){var r=e.map(qb);Fb.error.apply(Fb,Nb(["Firestore (8.3.1): "+t],r))}}function Ub(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fb.logLevel<=Iy.a.WARN){var r=e.map(qb);Fb.warn.apply(Fb,Nb(["Firestore (8.3.1): "+t],r))}}function qb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(zA){return t}}function Bb(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw Vb(e),new Error(e)}function zb(t,e){t||Bb()}function Hb(t,e){return t}function Gb(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Wb=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Gb(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Kb(t,e){return t<e?-1:t>e?1:0}function Qb(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Yb(t){return t+"\0"}function Xb(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zb(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jb(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $b(t){return null==t}function tw(t){return 0===t&&1/t==-1/0}function ew(t){return"number"==typeof t&&Number.isInteger(t)&&!tw(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var nw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},rw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Db(e,t),e}(Error),iw=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Bb(),void 0===n?n=t.length-e:n>t.length-e&&Bb(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ow=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new rw(nw.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(iw),aw=/^[_a-zA-Z][_a-zA-Z0-9]*$/,sw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return aw.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new rw(nw.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new rw(nw.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new rw(nw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new rw(nw.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(iw),uw=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ow.fromString(e))},t.fromName=function(e){return new t(ow.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ow.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ow.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ow(e.slice()))},t}(),cw=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Kb(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();cw.EMPTY_BYTE_STRING=new cw("");var lw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hw(t){if(zb(!!t),"string"==typeof t){var e=0,n=lw.exec(t);if(zb(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:fw(t.seconds),nanos:fw(t.nanos)}}function fw(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function dw(t){return"string"==typeof t?cw.fromBase64String(t):cw.fromUint8Array(t)}var pw=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new rw(nw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new rw(nw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new rw(nw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rw(nw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Kb(this.nanoseconds,t.nanoseconds):Kb(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function vw(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yw(t){var e=hw(t.mapValue.fields.__local_write_time__.timestampValue);return new pw(e.seconds,e.nanos)}function mw(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vw(t)?4:10:Bb()}function gw(t,e){var n=mw(t);if(n!==mw(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yw(t).isEqual(yw(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=hw(t.timestampValue),r=hw(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return dw(t.bytesValue).isEqual(dw(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return fw(t.geoPointValue.latitude)===fw(e.geoPointValue.latitude)&&fw(t.geoPointValue.longitude)===fw(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return fw(t.integerValue)===fw(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=fw(t.doubleValue),r=fw(e.doubleValue);return n===r?tw(n)===tw(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Qb(t.arrayValue.values||[],e.arrayValue.values||[],gw);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Xb(n)!==Xb(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gw(n[i],r[i])))return!1;return!0}(t,e);default:return Bb()}}function _w(t,e){return void 0!==(t.values||[]).find((function(t){return gw(t,e)}))}function bw(t,e){var n=mw(t),r=mw(e);if(n!==r)return Kb(n,r);switch(n){case 0:return 0;case 1:return Kb(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=fw(t.integerValue||t.doubleValue),r=fw(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ww(t.timestampValue,e.timestampValue);case 4:return ww(yw(t),yw(e));case 5:return Kb(t.stringValue,e.stringValue);case 6:return function(t,e){var n=dw(t),r=dw(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Kb(n[i],r[i]);if(0!==o)return o}return Kb(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Kb(fw(t.latitude),fw(e.latitude));return 0!==n?n:Kb(fw(t.longitude),fw(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=bw(n[i],r[i]);if(o)return o}return Kb(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Kb(r[a],o[a]);if(0!==s)return s;var u=bw(n[r[a]],i[o[a]]);if(0!==u)return u}return Kb(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Bb()}}function ww(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Kb(t,e);var n=hw(t),r=hw(e),i=Kb(n.seconds,r.seconds);return 0!==i?i:Kb(n.nanos,r.nanos)}function kw(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=hw(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?dw(e.bytesValue).toBase64():"referenceValue"in e?uw.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):Bb();var n}(t)}function Cw(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Sw(t){return!!t&&"integerValue"in t}function Ew(t){return!!t&&"arrayValue"in t}function Tw(t){return!!t&&"nullValue"in t}function Ow(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xw(t){return!!t&&"mapValue"in t}var Iw=function(t,e){this.key=t,this.version=e},Aw=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Db(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Iw),Dw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Db(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Iw),Pw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Iw),Rw=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Nw(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Rw(t,e,n,r,i,o,a)}function jw(t){var e=Hb(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+kw(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),$b(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Qw(e.startAt)),e.endAt&&(n+="|ub:",n+=Qw(e.endAt)),e.h=n}return e.h}function Fw(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Xw(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!gw(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jw(t.startAt,e.startAt)&&Jw(t.endAt,e.endAt)}function Mw(t){return uw.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Lw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Db(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Vw(t,n,r):"array-contains"===n?new zw(t,r):"in"===n?new Hw(t,r):"not-in"===n?new Gw(t,r):"array-contains-any"===n?new Ww(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Uw(t,n):new qw(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(bw(e,this.value)):null!==e&&mw(this.value)===mw(e)&&this.m(bw(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Bb()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Vw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=uw.fromName(r.referenceValue),i}return Db(e,t),e.prototype.matches=function(t){var e=uw.comparator(t.key,this.key);return this.m(e)},e}(Lw),Uw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Bw(0,n),r}return Db(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Lw),qw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Bw(0,n),r}return Db(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Lw);function Bw(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return uw.fromName(t.referenceValue)}))}var zw=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Db(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ew(e)&&_w(e.arrayValue,this.value)},e}(Lw),Hw=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Db(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&_w(this.value.arrayValue,e)},e}(Lw),Gw=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Db(e,t),e.prototype.matches=function(t){if(_w(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!_w(this.value.arrayValue,e)},e}(Lw),Ww=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Db(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ew(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return _w(e.value.arrayValue,t)}))},e}(Lw),Kw=function(t,e){this.position=t,this.before=e};function Qw(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return kw(t)})).join(",")}var Yw=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xw(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Zw(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?uw.comparator(uw.fromName(a.referenceValue),n.key):bw(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Jw(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!gw(t.position[n],e.position[n]))return!1;return!0}var $w=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null};function tk(t,e,n,r,i,o,a,s){return new $w(t,e,n,r,i,o,a,s)}function ek(t){return new $w(t)}function nk(t){return!$b(t.limit)&&"F"===t.limitType}function rk(t){return!$b(t.limit)&&"L"===t.limitType}function ik(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ok(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ak(t){return null!==t.collectionGroup}function sk(t){var e=Hb(t);if(null===e.p){e.p=[];var n=ok(e),r=ik(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Yw(n)),e.p.push(new Yw(sw.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Yw(sw.keyField(),u))}}}return e.p}function uk(t){var e=Hb(t);if(!e.T)if("F"===e.limitType)e.T=Nw(e.path,e.collectionGroup,sk(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=sk(e);r<i.length;r++){var o=i[r];n.push(new Yw(o.field,"desc"===o.dir?"asc":"desc"))}var a=e.endAt?new Kw(e.endAt.position,!e.endAt.before):null,s=e.startAt?new Kw(e.startAt.position,!e.startAt.before):null;e.T=Nw(e.path,e.collectionGroup,n,e.filters,e.limit,a,s)}return e.T}function ck(t,e,n){return new $w(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lk(t,e){return Fw(uk(t),uk(e))&&t.limitType===e.limitType}function hk(t){return jw(uk(t))+"|lt:"+t.limitType}function fk(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+kw(e.value);var e})).join(", ")+"]"),$b(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Qw(t.startAt)),t.endAt&&(e+=", endAt: "+Qw(t.endAt)),"Target("+e+")"}(uk(t))+"; limitType="+t.limitType+")"}function dk(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):uw.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Zw(t.startAt,sk(t),e)||t.endAt&&Zw(t.endAt,sk(t),e))}(t,e)}function pk(t){return function(e,n){for(var r=!1,i=0,o=sk(t);i<o.length;i++){var a=o[i],s=vk(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function vk(t,e,n){var r=t.field.isKeyField()?uw.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?bw(r,i):Bb()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Bb()}}var yk=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new pw(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),mk=function(){function t(t){this.fields=t,t.sort(sw.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Qb(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),gk=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!xw(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return gw(this.proto,t.proto)},t}(),_k=function(){function t(t){void 0===t&&(t=gk.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===mw(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(sw.emptyPath(),this.A);return null!=t?new gk(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=xw(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.P(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function bk(t){var e=[];return Zb(t.fields||{},(function(t,n){var r=new sw([t]);if(xw(n)){var i=bk(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++)e.push(r.child(a[o]))}else e.push(r)})),new mk(e)}function wk(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tw(e)?"-0":e}}function kk(t){return{integerValue:""+t}}function Ck(t,e){return ew(e)?kk(e):wk(t,e)}var Sk=function(){this._=void 0};function Ek(t,e,n){return t instanceof xk?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ik?Ak(t,e):t instanceof Dk?Pk(t,e):function(t,e){var n=Ok(t,e),r=Nk(n)+Nk(t.S);return Sw(n)&&Sw(t.S)?kk(r):wk(t.D,r)}(t,e)}function Tk(t,e,n){return t instanceof Ik?Ak(t,e):t instanceof Dk?Pk(t,e):n}function Ok(t,e){return t instanceof Rk?Sw(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var xk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e}(Sk),Ik=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Db(e,t),e}(Sk);function Ak(t,e){for(var n=jk(e),r=function(t){n.some((function(e){return gw(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Dk=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Db(e,t),e}(Sk);function Pk(t,e){for(var n=jk(e),r=function(t){n=n.filter((function(e){return!gw(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Rk=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Db(e,t),e}(Sk);function Nk(t){return fw(t.integerValue||t.doubleValue)}function jk(t){return Ew(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fk=function(t,e){this.field=t,this.transform=e},Mk=function(t,e){this.version=t,this.transformResults=e},Lk=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Vk(t,e){return void 0!==t.updateTime?e instanceof Aw&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Aw}var Uk=function(){};function qk(t,e,n){return t instanceof Wk?function(t,e,n){var r=t.value,i=Yk(t.fieldTransforms,e,n.transformResults);return r=Zk(t.fieldTransforms,r,i),new Aw(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Kk?function(t,e,n){if(!Vk(t.precondition,e))return new Pw(t.key,n.version);var r=Qk(t,e,Yk(t.fieldTransforms,e,n.transformResults));return new Aw(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Dw(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Bk(t,e,n){return t instanceof Wk?function(t,e,n){if(!Vk(t.precondition,e))return e;var r=t.value,i=Xk(t.fieldTransforms,n,e);r=Zk(t.fieldTransforms,r,i);var o=Gk(e);return new Aw(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof Kk?function(t,e,n){if(!Vk(t.precondition,e))return e;var r=Gk(e),i=Qk(t,e,Xk(t.fieldTransforms,n,e));return new Aw(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Vk(t.precondition,e)?new Dw(t.key,yk.min()):e}(t,e)}function zk(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],a=e instanceof Aw?e.field(o.field):void 0,s=Ok(o.transform,a||null);null!=s&&(n=null==n?(new _k).set(o.field,s):n.set(o.field,s))}return n?n.v():null}(t.fieldTransforms,e)}function Hk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Qb(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ik&&e instanceof Ik||t instanceof Dk&&e instanceof Dk?Qb(t.elements,e.elements,gw):t instanceof Rk&&e instanceof Rk?gw(t.S,e.S):t instanceof xk&&e instanceof xk}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Gk(t){return t instanceof Aw?t.version:yk.min()}var Wk=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Db(e,t),e}(Uk),Kk=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Db(e,t),e}(Uk);function Qk(t,e,n){var r;return r=function(t,e){var n=new _k(e);return t.fieldMask.fields.forEach((function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.v()}(t,r=e instanceof Aw?e.data():gk.empty()),Zk(t.fieldTransforms,r,n)}function Yk(t,e,n){var r=[];zb(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof Aw&&(s=e.field(o.field)),r.push(Tk(a,s,n[i]))}return r}function Xk(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=null;n instanceof Aw&&(u=n.field(a.field)),r.push(Ek(s,u,e))}return r}function Zk(t,e,n){for(var r=new _k(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var Jk,$k,tC=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Db(e,t),e}(Uk),eC=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Db(e,t),e}(Uk),nC=function(t){this.count=t};function rC(t){switch(t){case nw.OK:return Bb();case nw.CANCELLED:case nw.UNKNOWN:case nw.DEADLINE_EXCEEDED:case nw.RESOURCE_EXHAUSTED:case nw.INTERNAL:case nw.UNAVAILABLE:case nw.UNAUTHENTICATED:return!1;case nw.INVALID_ARGUMENT:case nw.NOT_FOUND:case nw.ALREADY_EXISTS:case nw.PERMISSION_DENIED:case nw.FAILED_PRECONDITION:case nw.ABORTED:case nw.OUT_OF_RANGE:case nw.UNIMPLEMENTED:case nw.DATA_LOSS:return!0;default:return Bb()}}function iC(t){if(void 0===t)return Vb("GRPC error has no .code"),nw.UNKNOWN;switch(t){case Jk.OK:return nw.OK;case Jk.CANCELLED:return nw.CANCELLED;case Jk.UNKNOWN:return nw.UNKNOWN;case Jk.DEADLINE_EXCEEDED:return nw.DEADLINE_EXCEEDED;case Jk.RESOURCE_EXHAUSTED:return nw.RESOURCE_EXHAUSTED;case Jk.INTERNAL:return nw.INTERNAL;case Jk.UNAVAILABLE:return nw.UNAVAILABLE;case Jk.UNAUTHENTICATED:return nw.UNAUTHENTICATED;case Jk.INVALID_ARGUMENT:return nw.INVALID_ARGUMENT;case Jk.NOT_FOUND:return nw.NOT_FOUND;case Jk.ALREADY_EXISTS:return nw.ALREADY_EXISTS;case Jk.PERMISSION_DENIED:return nw.PERMISSION_DENIED;case Jk.FAILED_PRECONDITION:return nw.FAILED_PRECONDITION;case Jk.ABORTED:return nw.ABORTED;case Jk.OUT_OF_RANGE:return nw.OUT_OF_RANGE;case Jk.UNIMPLEMENTED:return nw.UNIMPLEMENTED;case Jk.DATA_LOSS:return nw.DATA_LOSS;default:return Bb()}}($k=Jk||(Jk={}))[$k.OK=0]="OK",$k[$k.CANCELLED=1]="CANCELLED",$k[$k.UNKNOWN=2]="UNKNOWN",$k[$k.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$k[$k.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$k[$k.NOT_FOUND=5]="NOT_FOUND",$k[$k.ALREADY_EXISTS=6]="ALREADY_EXISTS",$k[$k.PERMISSION_DENIED=7]="PERMISSION_DENIED",$k[$k.UNAUTHENTICATED=16]="UNAUTHENTICATED",$k[$k.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$k[$k.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$k[$k.ABORTED=10]="ABORTED",$k[$k.OUT_OF_RANGE=11]="OUT_OF_RANGE",$k[$k.UNIMPLEMENTED=12]="UNIMPLEMENTED",$k[$k.INTERNAL=13]="INTERNAL",$k[$k.UNAVAILABLE=14]="UNAVAILABLE",$k[$k.DATA_LOSS=15]="DATA_LOSS";var oC=function(){function t(t,e){this.comparator=t,this.root=e||sC.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sC.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sC.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new aC(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new aC(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new aC(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new aC(this.root,t,this.comparator,!0)},t}(),aC=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),sC=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Bb();if(this.right.isRed())throw Bb();var t=this.left.check();if(t!==this.right.check())throw Bb();return t+(this.isRed()?0:1)},t}();sC.EMPTY=null,sC.RED=!0,sC.BLACK=!1,sC.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Bb()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Bb()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Bb()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Bb()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Bb()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new sC(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var uC=function(){function t(t){this.comparator=t,this.data=new oC(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new cC(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new cC(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),cC=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),lC=new oC(uw.comparator);function hC(){return lC}function fC(){return hC()}var dC=new oC(uw.comparator);function pC(){return dC}var vC=new oC(uw.comparator);function yC(){return vC}var mC=new uC(uw.comparator);function gC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=mC,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var _C=new uC(Kb);function bC(){return _C}var wC=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,kC.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(yk.min(),r,bC(),hC(),gC())},t}(),kC=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(cw.EMPTY_BYTE_STRING,n,gC(),gC(),gC())},t}(),CC=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},SC=function(t,e){this.targetId=t,this.$=e},EC=function(t,e,n,r){void 0===n&&(n=cw.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},TC=function(){function t(){this.F=0,this.O=IC(),this.k=cw.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=gC(),e=gC(),n=gC();return this.O.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Bb()}})),new kC(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=IC()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),OC=function(){function t(t){this.X=t,this.Z=new Map,this.tt=hC(),this.et=xC(),this.nt=new uC(Kb)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof Aw?this.it(r,t.N):t.N instanceof Dw&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Bb()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach((function(t,r){n.at(r)&&e(r)}))},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(Mw(i))if(0===n){var o=new uw(i.path);this.rt(e,o,new Dw(o,yk.min()))}else zb(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach((function(r,i){var o=e.lt(i);if(o){if(r.current&&Mw(o.target)){var a=new uw(o.target.path);null!==e.tt.get(a)||e.wt(i,a)||e.rt(i,a,new Dw(a,t))}r.q&&(n.set(i,r.K()),r.W())}}));var r=gC();this.et.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new wC(t,n,this.nt,this.tt,r);return this.tt=hC(),this.et=xC(),this.nt=new uC(Kb),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new TC,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new uC(Kb),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||Lb("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new TC),this.X.getRemoteKeysForTarget(t).forEach((function(n){e.rt(t,n,null)}))},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function xC(){return new oC(uw.comparator)}function IC(){return new oC(uw.comparator)}var AC={asc:"ASCENDING",desc:"DESCENDING"},DC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PC=function(t,e){this.databaseId=t,this.V=e};function RC(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function NC(t,e){return t.V?e.toBase64():e.toUint8Array()}function jC(t,e){return RC(t,e.toTimestamp())}function FC(t){return zb(!!t),yk.fromTimestamp(function(t){var e=hw(t);return new pw(e.seconds,e.nanos)}(t))}function MC(t,e){return function(t){return new ow(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function LC(t){var e=ow.fromString(t);return zb(sS(e)),e}function VC(t,e){return MC(t.databaseId,e.path)}function UC(t,e){var n=LC(e);if(n.get(1)!==t.databaseId.projectId)throw new rw(nw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new rw(nw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new uw(HC(n))}function qC(t,e){return MC(t.databaseId,e)}function BC(t){var e=LC(t);return 4===e.length?ow.emptyPath():HC(e)}function zC(t){return new ow(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HC(t){return zb(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function GC(t,e,n){return{name:VC(t,e),fields:n.proto.mapValue.fields}}function WC(t,e,n){var r=UC(t,e.name),i=FC(e.updateTime),o=new gk({mapValue:{fields:e.fields}});return new Aw(r,i,o,{hasCommittedMutations:!!n})}function KC(t,e){var n;if(e instanceof Wk)n={update:GC(t,e.key,e.value)};else if(e instanceof tC)n={delete:VC(t,e.key)};else if(e instanceof Kk)n={update:GC(t,e.key,e.data),updateMask:aS(e.fieldMask)};else{if(!(e instanceof eC))return Bb();n={verify:VC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof xk)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ik)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Dk)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rk)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Bb()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:jC(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Bb()}(t,e.precondition)),n}function QC(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Lk.updateTime(FC(t.updateTime)):void 0!==t.exists?Lk.exists(t.exists):Lk.none()}(e.currentDocument):Lk.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(zb("REQUEST_TIME"===e.setToServerValue),n=new xk):"appendMissingElements"in e?n=new Ik(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Dk(e.removeAllFromArray.values||[]):"increment"in e?n=new Rk(t,e.increment):Bb();var r=sw.fromServerFormat(e.fieldPath);return new Fk(r,n)}(t,e)})):[];if(e.update){var i=UC(t,e.update.name),o=new gk({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){return new mk((t.fieldPaths||[]).map((function(t){return sw.fromServerFormat(t)})))}(e.updateMask);return new Kk(i,o,a,n,r)}return new Wk(i,o,n,r)}if(e.delete){var s=UC(t,e.delete);return new tC(s,n)}if(e.verify){var u=UC(t,e.verify);return new eC(u,n)}return Bb()}function YC(t,e){return{documents:[qC(t,e.path)]}}function XC(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=qC(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=qC(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ow(t.value))return{unaryFilter:{field:nS(t.field),op:"IS_NAN"}};if(Tw(t.value))return{unaryFilter:{field:nS(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ow(t.value))return{unaryFilter:{field:nS(t.field),op:"IS_NOT_NAN"}};if(Tw(t.value))return{unaryFilter:{field:nS(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nS(t.field),op:eS(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:nS(t.field),direction:tS(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.V||$b(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=JC(e.startAt)),e.endAt&&(n.structuredQuery.endAt=JC(e.endAt)),n}function ZC(t){var e=BC(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){zb(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[oS(e)]:void 0!==e.fieldFilter?[iS(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Bb():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Yw(rS(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return $b(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=$C(n.startAt));var l=null;return n.endAt&&(l=$C(n.endAt)),tk(e,i,s,a,u,"F",c,l)}function JC(t){return{before:t.before,values:t.position}}function $C(t){return new Kw(t.values||[],!!t.before)}function tS(t){return AC[t]}function eS(t){return DC[t]}function nS(t){return{fieldPath:t.canonicalString()}}function rS(t){return sw.fromServerFormat(t.fieldPath)}function iS(t){return Lw.create(rS(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Bb()}}(t.fieldFilter.op),t.fieldFilter.value)}function oS(t){switch(t.unaryFilter.op){case"IS_NAN":var e=rS(t.unaryFilter.field);return Lw.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=rS(t.unaryFilter.field);return Lw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=rS(t.unaryFilter.field);return Lw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=rS(t.unaryFilter.field);return Lw.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Bb()}}function aS(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function sS(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function uS(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=lS(e)),e=cS(t.get(n),e);return lS(e)}function cS(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function lS(t){return t+"\x01\x01"}function hS(t){var e=t.length;if(zb(e>=2),2===e)return zb("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ow.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Bb(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Bb()}o=a+2}return new ow(r)}var fS=function(t,e){this.seconds=t,this.nanoseconds=e},dS=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};dS.store="owner",dS.key="owner";var pS=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};pS.store="mutationQueues",pS.keyPath="userId";var vS=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};vS.store="mutations",vS.keyPath="batchId",vS.userMutationsIndex="userMutationsIndex",vS.userMutationsKeyPath=["userId","batchId"];var yS=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,uS(e)]},t.key=function(t,e,n){return[t,uS(e),n]},t}();yS.store="documentMutations",yS.PLACEHOLDER=new yS;var mS=function(t,e){this.path=t,this.readTime=e},gS=function(t,e){this.path=t,this.version=e},_S=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};_S.store="remoteDocuments",_S.readTimeIndex="readTimeIndex",_S.readTimeIndexPath="readTime",_S.collectionReadTimeIndex="collectionReadTimeIndex",_S.collectionReadTimeIndexPath=["parentPath","readTime"];var bS=function(t){this.byteSize=t};bS.store="remoteDocumentGlobal",bS.key="remoteDocumentGlobalKey";var wS=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};wS.store="targets",wS.keyPath="targetId",wS.queryTargetsIndexName="queryTargetsIndex",wS.queryTargetsKeyPath=["canonicalId","targetId"];var kS=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};kS.store="targetDocuments",kS.keyPath=["targetId","path"],kS.documentTargetsIndex="documentTargetsIndex",kS.documentTargetsKeyPath=["path","targetId"];var CS=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};CS.key="targetGlobalKey",CS.store="targetGlobal";var SS=function(t,e){this.collectionId=t,this.parent=e};SS.store="collectionParents",SS.keyPath=["collectionId","parent"];var ES=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ES.store="clientMetadata",ES.keyPath="clientId";var TS=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};TS.store="bundles",TS.keyPath="bundleId";var OS=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};OS.store="namedQueries",OS.keyPath="name";var xS=Nb(Nb([],Nb(Nb([],Nb(Nb([],Nb(Nb([],[pS.store,vS.store,yS.store,_S.store,wS.store,dS.store,CS.store,kS.store]),[ES.store])),[bS.store])),[SS.store])),[TS.store,OS.store]),IS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",AS=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),DS=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},PS=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Bb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),RS=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new DS,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new FS(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=qS(e.target.error);n.gt.reject(new FS(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new FS(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Lb("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new LS(e)},t}(),NS=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(Ay.m)())&&Vb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Lb("SimpleDb","Removing database:",t),VS(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(Ay.m)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Pb(this,void 0,void 0,(function(){var e,n=this;return Rb(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Lb("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new FS(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new rw(nw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new FS(t,n))},i.onupgradeneeded=function(t){Lb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){Lb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}}))}))},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Pb(this,void 0,void 0,(function(){var i,o,a,s,u;return Rb(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return Rb(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.Vt(t)];case 2:return s.db=h.sent(),e=RS.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),PS.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.Et];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return Lb("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),jS=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return VS(this.xt.delete())},t}(),FS=function(t){function e(e,n){var r=this;return(r=t.call(this,nw.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Db(e,t),e}(rw);function MS(t){return"IndexedDbTransactionError"===t.name}var LS=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Lb("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Lb("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),VS(n)},t.prototype.add=function(t){return Lb("SimpleDb","ADD",this.store.name,t,t),VS(this.store.add(t))},t.prototype.get=function(t){var e=this;return VS(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Lb("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Lb("SimpleDb","DELETE",this.store.name,t),VS(this.store.delete(t))},t.prototype.count=function(){return Lb("SimpleDb","COUNT",this.store.name),VS(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Lt=function(t,e){Lb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,(function(t,e,n){return n.delete()}))},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new PS((function(n,r){e.onerror=function(t){var e=qS(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Mt=function(t,e){var n=[];return new PS((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new jS(i),a=e(i.primaryKey,i.value,o);if(a instanceof PS){var s=a.catch((function(t){return o.done(),PS.reject(t)}));n.push(s)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}})).next((function(){return PS.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function VS(t){return new PS((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=qS(t.target.error);n(e)}}))}var US=!1;function qS(t){var e=NS.It(Object(Ay.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new rw("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return US||(US=!0,setTimeout((function(){throw r}),0)),r}}return t}var BS=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Db(e,t),e}(AS);function zS(t,e){var n=Hb(t);return NS.Pt(n.Qt,e)}var HS=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=qk(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=Bk(a,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var a;(a=o[i]).key.isEqual(t)&&(e=Bk(a,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),gC())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Qb(this.mutations,t.mutations,(function(t,e){return Hk(t,e)}))&&Qb(this.baseMutations,t.baseMutations,(function(t,e){return Hk(t,e)}))},t}(),GS=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){zb(e.mutations.length===r.length);for(var i=yC(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),WS=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=yk.min()),void 0===o&&(o=yk.min()),void 0===a&&(a=cw.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),KS=function(t){this.Kt=t};function QS(t,e){if(e.document)return WC(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=uw.fromSegments(e.noDocument.path),r=$S(e.noDocument.readTime);return new Dw(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=uw.fromSegments(e.unknownDocument.path);return r=$S(e.unknownDocument.version),new Pw(i,r)}return Bb()}function YS(t,e,n){var r=XS(n),i=e.key.path.popLast().toArray();if(e instanceof Aw){var o=function(t,e){return{name:VC(t,e.key),fields:e.toProto().mapValue.fields,updateTime:RC(t,e.version.toTimestamp())}}(t.Kt,e),a=e.hasCommittedMutations;return new _S(null,null,o,a,r,i)}if(e instanceof Dw){var s=e.key.path.toArray(),u=JS(e.version);return a=e.hasCommittedMutations,new _S(null,new mS(s,u),null,a,r,i)}if(e instanceof Pw){var c=e.key.path.toArray(),l=JS(e.version);return new _S(new gS(c,l),null,null,!0,r,i)}return Bb()}function XS(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ZS(t){var e=new pw(t[0],t[1]);return yk.fromTimestamp(e)}function JS(t){var e=t.toTimestamp();return new fS(e.seconds,e.nanoseconds)}function $S(t){var e=new pw(t.seconds,t.nanoseconds);return yk.fromTimestamp(e)}function tE(t,e){for(var n=(e.baseMutations||[]).map((function(e){return QC(t.Kt,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return QC(t.Kt,e)})),o=pw.fromMillis(e.localWriteTimeMs);return new HS(e.batchId,o,n,i)}function eE(t){var e,n,r=$S(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?$S(t.lastLimboFreeSnapshotVersion):yk.min();return void 0!==t.query.documents?(zb(1===(n=t.query).documents.length),e=uk(ek(BC(n.documents[0])))):e=function(t){return uk(ZC(t))}(t.query),new WS(e,t.targetId,0,t.lastListenSequenceNumber,r,i,cw.fromBase64String(t.resumeToken))}function nE(t,e){var n,r=JS(e.snapshotVersion),i=JS(e.lastLimboFreeSnapshotVersion);n=Mw(e.target)?YC(t.Kt,e.target):XC(t.Kt,e.target);var o=e.resumeToken.toBase64();return new wS(e.targetId,jw(e.target),r,o,e.sequenceNumber,i,n)}function rE(t){var e=ZC({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ck(e,e.limit,"L"):e}var iE=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return oE(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:$S(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return oE(t).put({bundleId:(n=e).id,createTime:JS(FC(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return aE(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:rE(e.bundledQuery),readTime:$S(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return aE(t).put(function(t){return{name:t.name,readTime:JS(FC(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function oE(t){return zS(t,TS.store)}function aE(t){return zS(t,OS.store)}var sE=function(){function t(){this.Wt=new uE}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),PS.resolve()},t.prototype.getCollectionParents=function(t,e){return PS.resolve(this.Wt.getEntries(e))},t}(),uE=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new uC(ow.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new uC(ow.comparator)).toArray()},t}(),cE=function(){function t(){this.jt=new uE}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.jt.add(e)}));var o={collectionId:r,parent:uS(i)};return lE(t).put(o)}return PS.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Yb(e),""],!1,!0);return lE(t).kt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(hS(o.parent))}return n}))},t}();function lE(t){return zS(t,SS.store)}var hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fE=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function dE(t,e,n){var r=t.store(vS.store),i=t.store(yS.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.qt({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){zb(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=yS.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return PS.waitFor(o).next((function(){return c}))}function pE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Bb();e=t.noDocument}return JSON.stringify(e).length}fE.DEFAULT_COLLECTION_PERCENTILE=10,fE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fE.DEFAULT=new fE(41943040,fE.DEFAULT_COLLECTION_PERCENTILE,fE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fE.DISABLED=new fE(-1,0,0);var vE=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return zb(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mE(t).qt({index:vS.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=gE(t),a=mE(t);return a.add({}).next((function(s){zb("number"==typeof s);for(var u=new HS(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return KC(t.Kt,e)})),i=n.mutations.map((function(e){return KC(t.Kt,e)}));return new vS(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new uC((function(t,e){return Kb(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=yS.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,yS.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.zt[s]=u.keys()})),PS.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return mE(t).get(e).next((function(t){return t?(zb(t.userId===n.userId),tE(n.D,t)):null}))},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?PS.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return mE(t).qt({index:vS.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(zb(e.batchId>=r),o=tE(n.D,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return mE(t).qt({index:vS.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mE(t).kt(vS.userMutationsIndex,n).next((function(t){return t.map((function(t){return tE(e.D,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=yS.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return gE(t).qt({range:i},(function(r,i,a){var s=r[0],u=r[2],c=hS(r[1]);if(s===n.userId&&e.path.isEqual(c))return mE(t).get(u).next((function(t){if(!t)throw Bb();zb(t.userId===n.userId),o.push(tE(n.D,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new uC(Kb),i=[];return e.forEach((function(e){var o=yS.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=gE(t).qt({range:a},(function(t,i,o){var a=t[0],s=t[2],u=hS(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()}));i.push(s)})),PS.waitFor(i).next((function(){return n.Yt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=yS.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new uC(Kb);return gE(t).qt({range:a},(function(t,e,o){var a=t[0],u=t[2],c=hS(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.Yt(t,s)}))},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(mE(t).get(e).next((function(t){if(null===t)throw Bb();zb(t.userId===n.userId),r.push(tE(n.D,t))})))})),PS.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return dE(t.Qt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Xt(e.batchId)})),PS.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return PS.resolve();var r=IDBKeyRange.lowerBound(yS.prefixForUser(e.userId)),i=[];return gE(t).qt({range:r},(function(t,n,r){if(t[0]===e.userId){var o=hS(t[1]);i.push(o)}else r.done()})).next((function(){zb(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return yE(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return _E(t).get(this.userId).next((function(t){return t||new pS(e.userId,-1,"")}))},t}();function yE(t,e,n){var r=yS.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return gE(t).qt({range:o,Bt:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()})).next((function(){return a}))}function mE(t){return zS(t,vS.store)}function gE(t){return zS(t,yS.store)}function _E(t){return zS(t,pS.store)}var bE=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),wE=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next((function(n){var r=new bE(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next((function(t){return yk.fromTimestamp(new pw(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next((function(){return n.se(t).next((function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return kE(t).delete(e.targetId)})).next((function(){return n.se(t)})).next((function(e){return zb(e.targetCount>0),e.targetCount-=1,n.ie(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return kE(t).qt((function(a,s){var u=eE(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return PS.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return kE(t).qt((function(t,n){var r=eE(n);e(r)}))},t.prototype.se=function(t){return CE(t).get(CS.key).next((function(t){return zb(null!==t),t}))},t.prototype.ie=function(t,e){return CE(t).put(CS.key,e)},t.prototype.re=function(t,e){return kE(t).put(nE(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=jw(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return kE(t).qt({range:r,index:wS.queryTargetsIndexName},(function(t,n,r){var o=eE(n);Fw(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=SE(t);return e.forEach((function(e){var a=uS(e.path);i.push(o.put(new kS(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),PS.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=SE(t);return PS.forEach(e,(function(e){var o=uS(e.path);return PS.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=SE(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=SE(t),i=gC();return r.qt({range:n,Bt:!0},(function(t,e,n){var r=hS(t[1]),o=new uw(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=uS(e.path),r=IDBKeyRange.bound([n],[Yb(n)],!1,!0),i=0;return SE(t).qt({index:kS.documentTargetsIndex,Bt:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.yt=function(t,e){return kE(t).get(e).next((function(t){return t?eE(t):null}))},t}();function kE(t){return zS(t,wS.store)}function CE(t){return zS(t,CS.store)}function SE(t){return zS(t,kS.store)}function EE(t){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(e){if(t.code!==nw.FAILED_PRECONDITION||t.message!==IS)throw t;return Lb("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function TE(t,e){var n=t[1],r=e[1],i=Kb(t[0],e[0]);return 0===i?Kb(n,r):i}var OE=function(){function t(t){this.ce=t,this.buffer=new uC(TE),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();TE(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),xE=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;Lb("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Pb(e,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return MS(e=n.sent())?(Lb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,EE(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),IE=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return PS.resolve(jb.o);var r=new OE(e);return this.we.forEachTarget(t,(function(t){return r.he(t.sequenceNumber)})).next((function(){return n.we.me(t,(function(t){return r.he(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Lb("LruGarbageCollector","Garbage collection skipped; disabled"),PS.resolve(hE)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Lb("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),hE):n.ye(t,e)}))},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Lb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Mb()<=Iy.a.DEBUG&&Lb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),PS.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),AE=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new IE(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.ge=function(t){var e=0;return this.me(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return DE(t,n)},t.prototype.removeReference=function(t,e,n){return DE(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return DE(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return _E(t).Ut((function(r){return yE(t,r,e).next((function(t){return t&&(n=!0),PS.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,(function(a,s){if(s<=e){var u=n.Ee(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),SE(t).delete([0,uS(a.path)])}))}));i.push(u)}})).next((function(){return PS.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return DE(t,e)},t.prototype.pe=function(t,e){var n,r=SE(t),i=jb.o;return r.qt({index:kS.documentTargetsIndex},(function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==jb.o&&e(new uw(hS(n)),i),i=a,n=o):i=jb.o})).next((function(){i!==jb.o&&e(new uw(hS(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function DE(t,e){return SE(t).put(function(t,e){return new kS(0,uS(t.path),e)}(e,t.currentSequenceNumber))}var PE=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(this.equalsFn(o[0],t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Zb(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return Jb(this.inner)},t}(),RE=function(){function t(){this.changes=new PE((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:yk.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?PS.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),NE=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return ME(t).put(LE(e),n)},t.prototype.removeEntry=function(t,e){var n=ME(t),r=LE(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Te(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ME(t).get(LE(e)).next((function(t){return n.Ie(t)}))},t.prototype.Ae=function(t,e){var n=this;return ME(t).get(LE(e)).next((function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:pE(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=fC();return this.Re(t,e,(function(t,e){var i=n.Ie(e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.be=function(t,e){var n=this,r=fC(),i=new oC(uw.comparator);return this.Re(t,e,(function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,pE(e))):(r=r.insert(t,null),i=i.insert(t,0))})).next((function(){return{ve:r,Pe:i}}))},t.prototype.Re=function(t,e,n){if(e.isEmpty())return PS.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ME(t).qt({range:r},(function(t,e,r){for(var a=uw.fromSegments(t);o&&uw.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=pC(),o=e.path.length+1,a={};if(n.isEqual(yk.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=XS(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=_S.collectionReadTimeIndex}return ME(t).qt(a,(function(t,n,a){if(t.length===o){var s=QS(r.D,n);e.path.isPrefixOf(s.key.path)?s instanceof Aw&&dk(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new jE(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return FE(t).get(bS.key).next((function(t){return zb(!!t),t}))},t.prototype.Te=function(t,e){return FE(t).put(bS.key,e)},t.prototype.Ie=function(t){if(t){var e=QS(this.D,t);return e instanceof Dw&&e.version.isEqual(yk.min())?null:e}return null},t}(),jE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new PE((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Db(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new uC((function(t,e){return Kb(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Se.get(o);if(a.maybeDocument){var u=YS(e.Ve.D,a.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=pE(u);r+=c-s,n.push(e.Ve.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=YS(e.Ve.D,new Dw(o,yk.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))})),n.push(this.Ve.updateMetadata(t,r)),PS.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next((function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next((function(t){var e=t.ve;return t.Pe.forEach((function(t,e){n.Se.set(t,e)})),e}))},e}(RE);function FE(t){return zS(t,bS.store)}function ME(t){return zS(t,_S.store)}function LE(t){return t.path.toArray()}var VE=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;zb(n<r&&n>=0&&r<=11);var o=new RS("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(dS.store)}(t),function(t){t.createObjectStore(pS.store,{keyPath:pS.keyPath}),t.createObjectStore(vS.store,{keyPath:vS.keyPath,autoIncrement:!0}).createIndex(vS.userMutationsIndex,vS.userMutationsKeyPath,{unique:!0}),t.createObjectStore(yS.store)}(t),UE(t),function(t){t.createObjectStore(_S.store)}(t));var a=PS.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(kS.store),t.deleteObjectStore(wS.store),t.deleteObjectStore(CS.store)}(t),UE(t)),a=a.next((function(){return function(t){var e=t.store(CS.store),n=new CS(0,0,yk.min().toTimestamp(),0);return e.put(CS.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(vS.store).kt().next((function(n){t.deleteObjectStore(vS.store),t.createObjectStore(vS.store,{keyPath:vS.keyPath,autoIncrement:!0}).createIndex(vS.userMutationsIndex,vS.userMutationsKeyPath,{unique:!0});var r=e.store(vS.store),i=n.map((function(t){return r.put(t)}));return PS.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(ES.store,{keyPath:ES.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.De(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(bS.store)}(t),i.Ce(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.xe(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Ne(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(_S.store);e.createIndex(_S.readTimeIndex,_S.readTimeIndexPath,{unique:!1}),e.createIndex(_S.collectionReadTimeIndex,_S.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.$e(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(TS.store,{keyPath:TS.keyPath})}(t),function(t){t.createObjectStore(OS.store,{keyPath:OS.keyPath})}(t)}))),a},t.prototype.Ce=function(t){var e=0;return t.store(_S.store).qt((function(t,n){e+=pE(n)})).next((function(){var n=new bS(e);return t.store(bS.store).put(bS.key,n)}))},t.prototype.De=function(t){var e=this,n=t.store(pS.store),r=t.store(vS.store);return n.kt().next((function(n){return PS.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(vS.userMutationsIndex,i).next((function(r){return PS.forEach(r,(function(r){zb(r.userId===n.userId);var i=tE(e.D,r);return dE(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.xe=function(t){var e=t.store(kS.store),n=t.store(_S.store);return t.store(CS.store).get(CS.key).next((function(t){var r=[];return n.qt((function(n,i){var o=new ow(n),a=function(t){return[0,uS(t)]}(o);r.push(e.get(a).next((function(n){return n?PS.resolve():function(n){return e.put(new kS(0,uS(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return PS.waitFor(r)}))}))},t.prototype.Ne=function(t,e){t.createObjectStore(SS.store,{keyPath:SS.keyPath});var n=e.store(SS.store),r=new uE,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:uS(i)})}};return e.store(_S.store).qt({Bt:!0},(function(t,e){var n=new ow(t);return i(n.popLast())})).next((function(){return e.store(yS.store).qt({Bt:!0},(function(t,e){var n=hS(t[1]);return i(n.popLast())}))}))},t.prototype.$e=function(t){var e=this,n=t.store(wS.store);return n.qt((function(t,r){var i=eE(r),o=nE(e.D,i);return n.put(o)}))},t}();function UE(t){t.createObjectStore(kS.store,{keyPath:kS.keyPath}).createIndex(kS.documentTargetsIndex,kS.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(wS.store,{keyPath:wS.keyPath}).createIndex(wS.queryTargetsIndexName,wS.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(CS.store)}var qE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",BE=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=a,this.document=s,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new rw(nw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AE(this,i),this.We=n+"main",this.D=new KS(u),this.je=new NS(this.We,11,new VE(this.D)),this.Ge=new wE(this.referenceDelegate,this.D),this.Gt=new cE,this.ze=function(t,e){return new NE(t,e)}(this.D,this.Gt),this.He=new iE,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&Vb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new rw(nw.FAILED_PRECONDITION,qE);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Ge.getHighestSequenceNumber(e)}))})).then((function(e){t.Me=new jb(e,t.Oe)})).then((function(){t.Le=!0})).catch((function(e){return t.je&&t.je.close(),Promise.reject(e)}))},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Pb(e,void 0,void 0,(function(){return Rb(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct((function(n){return Pb(e,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget((function(){return Pb(e,void 0,void 0,(function(){return Rb(this,(function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return HE(e).put(new ES(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.nn(e).next((function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable((function(){return t.Ke(!1)})))}))})).next((function(){return t.sn(e)})).next((function(n){return t.isPrimary&&!n?t.rn(e).next((function(){return!1})):!!n&&t.on(e).next((function(){return!0}))}))})).catch((function(e){if(MS(e))return Lb("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Lb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable((function(){return t.Ke(e)})),t.isPrimary=e}))},t.prototype.nn=function(t){var e=this;return zE(t).get(dS.key).next((function(t){return PS.resolve(e.cn(t))}))},t.prototype.an=function(t){return HE(t).delete(this.clientId)},t.prototype.un=function(){return Pb(this,void 0,void 0,(function(){var t,e,n,r=this;return Rb(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=zS(t,ES.store);return e.kt().next((function(t){var n=r.ln(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return PS.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.Ye().then((function(){return t.un()})).then((function(){return t.tn()}))}))},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?PS.resolve(!0):zE(t).get(dS.key).next((function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new rw(nw.FAILED_PRECONDITION,qE);return!1}}return!(!e.networkEnabled||!e.inForeground)||HE(t).kt().next((function(t){return void 0===e.ln(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&Lb("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Pb(this,void 0,void 0,(function(){var t=this;return Rb(this,(function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[dS.store,ES.store],(function(e){var n=new BS(e,jb.o);return t.rn(n).next((function(){return t.an(n)}))}))];case 1:return e.sent(),this.je.close(),this.yn(),[2]}}))}))},t.prototype.ln=function(t,e){var n=this;return t.filter((function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)}))},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return HE(e).kt().next((function(e){return t.ln(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return vE.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Lb("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",xS,(function(o){return r=new BS(o,i.Me?i.Me.next():jb.o),"readwrite-primary"===e?i.nn(r).next((function(t){return!!t||i.sn(r)})).next((function(e){if(!e)throw Vb("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable((function(){return i.Ke(!1)})),new rw(nw.FAILED_PRECONDITION,IS);return n(r)})).next((function(t){return i.on(r).next((function(){return t}))})):i.pn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.pn=function(t){var e=this;return zE(t).get(dS.key).next((function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new rw(nw.FAILED_PRECONDITION,qE)}))},t.prototype.on=function(t){var e=new dS(this.clientId,this.allowTabSynchronization,Date.now());return zE(t).put(dS.key,e)},t.At=function(){return NS.At()},t.prototype.rn=function(t){var e=this,n=zE(t);return n.get(dS.key).next((function(t){return e.cn(t)?(Lb("IndexedDbPersistence","Releasing primary lease."),n.delete(dS.key)):PS.resolve()}))},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Vb("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()}))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Lb("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Vb("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){Vb("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function zE(t){return zS(t,dS.store)}function HE(t){return zS(t,ES.store)}function GE(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var WE=function(t,e){this.progress=t,this.En=e},KE=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.An(t,e,r)}))},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t}))},t.prototype.Rn=function(t,e,n){var r=fC();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)})),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next((function(e){return n.vn(t,e)}))},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var i=n.Rn(t,e,r),o=hC();return i.forEach((function(t,e){e||(e=new Dw(t,yk.min())),o=o.insert(t,e)})),o}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return uw.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):ak(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new uw(e)).next((function(t){var e=pC();return t instanceof Aw&&(e=e.insert(t.key,t)),e}))},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=pC();return this.Gt.getCollectionParents(t,i).next((function(a){return PS.forEach(a,(function(a){var s=function(t,e){return new $w(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.Sn(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.Dn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=Bk(u,r.get(c),o.localWriteTime);r=l instanceof Aw?r.insert(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){dk(e,n)||(r=r.remove(t))})),r}))},t.prototype.Dn=function(t,e,n){for(var r=gC(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Kk&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Aw&&(c=c.insert(t,e))})),c}))},t}(),QE=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=gC(),i=gC(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),YE=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(yk.min())?this.On(t,e):this.Fn.bn(t,r).next((function(o){var a=i.kn(e,o);return(nk(e)||rk(e))&&i.Mn(e.limitType,a,r,n)?i.On(t,e):(Mb()<=Iy.a.DEBUG&&Lb("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),fk(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.kn=function(t,e){var n=new uC(pk(t));return e.forEach((function(e,r){r instanceof Aw&&dk(t,r)&&(n=n.add(r))})),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return Mb()<=Iy.a.DEBUG&&Lb("QueryEngine","Using full collection scan to execute query:",fk(e)),this.Fn.getDocumentsMatchingQuery(t,e,yk.min())},t}(),XE=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new oC(Kb),this.qn=new PE((function(t){return jw(t)}),Fw),this.Un=yk.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new KE(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Bn)}))},t}();function ZE(t,e,n,r){return new XE(t,e,n,r)}function JE(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o;return Rb(this,(function(a){switch(a.label){case 0:return n=Hb(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Tn.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new KE(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=gC(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)a=a.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var v=0,y=p.mutations;v<y.length;v++)a=a.add(y[v].key)}return i.bn(t,a).next((function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}}))}))}function $E(t,e){var n=Hb(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=PS.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=e,a=n.docVersions.get(t);zb(null!==a),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)}))})),a.next((function(){return t.Tn.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Tn.performConsistencyCheck(t)})).next((function(){return n.Kn.bn(t,r)}))}))}function tT(t){var e=Hb(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Ge.getLastRemoteSnapshotVersion(t)}))}function eT(t,e){var n=Hb(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return zb(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.Ge.updateTargetData(t,c))}}}));var s=hC();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(nT(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(yk.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next((function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return PS.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Kn.vn(t,s)}))})).then((function(t){return n.Bn=i,t}))}function nT(t,e,n,r,i){var o=gC();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=hC();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a instanceof Dw&&a.version.isEqual(yk.min())?(e.removeEntry(n,u),o=o.insert(n,a)):null==s||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Lb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function rT(t,e){var n=Hb(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)}))}function iT(t,e){var n=Hb(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Ge.getTargetData(t,e).next((function(i){return i?PS.resolve(r=i):n.Ge.allocateTargetId(t).next((function(i){return r=new WS(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t}))}function oT(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i,o,a;return Rb(this,(function(s){switch(s.label){case 0:r=Hb(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!MS(a=s.sent()))throw a;return Lb("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}}))}))}function aT(t,e,n){var r=Hb(t),i=yk.min(),o=gC();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Hb(t),i=r.qn.get(n);return void 0!==i?PS.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,uk(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:yk.min(),n?o:gC())})).next((function(t){return{documents:t,jn:o}}))}))}function sT(t,e){var n=Hb(t),r=Hb(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.yt(t,e).next((function(t){return t?t.target:null}))}))}function uT(t){var e=Hb(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Hb(t),i=hC(),o=XS(n),a=ME(e),s=IDBKeyRange.lowerBound(o,!0);return a.qt({index:_S.readTimeIndex,range:s},(function(t,e){var n=QS(r.D,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{En:i,readTime:ZS(o)}}))}(e.Qn,t,e.Un)})).then((function(t){var n=t.En;return e.Un=t.readTime,n}))}function cT(t){return Pb(this,void 0,void 0,(function(){var e;return Rb(this,(function(n){return[2,(e=Hb(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ME(t),n=yk.min();return e.qt({index:_S.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=ZS(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Un=t}))]}))}))}function lT(t,e,n,r){return Pb(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return Rb(this,(function(p){switch(p.label){case 0:for(i=Hb(t),o=gC(),a=hC(),s=yC(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.zn(l)),s=s.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,iT(i,function(t){return uk(ek(ow.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return nT(t,f,a,yk.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.Ge.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Kn.vn(t,e)}))}))}))]}}))}))}function hT(t,e,n){return void 0===n&&(n=gC()),Pb(this,void 0,void 0,(function(){var r,i;return Rb(this,(function(o){switch(o.label){case 0:return[4,iT(t,uk(rE(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Hb(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=FC(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var a=r.withResumeToken(cw.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(a.targetId,a),i.Ge.updateTargetData(t,a).next((function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.Ge.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.He.saveNamedQuery(t,e)}))}))]}}))}))}var fT=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return PS.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:FC(n.createTime)}),PS.resolve()},t.prototype.getNamedQuery=function(t,e){return PS.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:rE(t.bundledQuery),readTime:FC(t.readTime)}}(e)),PS.resolve()},t}(),dT=function(){function t(){this.Xn=new uC(pT.Zn),this.ts=new uC(pT.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new pT(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.ss(new pT(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.os=function(t){var e=this,n=new uw(new ow([])),r=new pT(n,t),i=new pT(n,t+1),o=[];return this.ts.forEachInRange([r,i],(function(t){e.ss(t),o.push(t.key)})),o},t.prototype.cs=function(){var t=this;this.Xn.forEach((function(e){return t.ss(e)}))},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new uw(new ow([])),n=new pT(e,t),r=new pT(e,t+1),i=gC();return this.ts.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new pT(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),pT=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return uw.comparator(t.key,e.key)||Kb(t.hs,e.hs)},t.es=function(t,e){return Kb(t.hs,e.hs)||uw.comparator(t.key,e.key)},t}(),vT=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new uC(pT.Zn)}return t.prototype.checkEmpty=function(t){return PS.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new HS(i,e,n,r);this.Tn.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.fs=this.fs.add(new pT(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return PS.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return PS.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return PS.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return PS.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return PS.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new pT(e,0),i=new pT(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],(function(t){var e=n.ds(t.hs);o.push(e)})),PS.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new uC(Kb);return e.forEach((function(t){var e=new pT(t,0),i=new pT(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],(function(t){r=r.add(t.hs)}))})),PS.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;uw.isDocumentKey(i)||(i=i.child(""));var o=new pT(new uw(i),0),a=new uC(Kb);return this.fs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.hs)),!0)}),o),PS.resolve(this._s(a))},t.prototype._s=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.ds(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;zb(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return PS.forEach(e.mutations,(function(i){var o=new pT(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.fs=r}))},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new pT(e,0),r=this.fs.firstAfterOrEqual(n);return PS.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return PS.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),yT=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new oC(uw.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:a,readTime:n}),this.size+=a-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return PS.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=fC();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),PS.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=pC(),i=new uw(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.value,u=s.maybeDocument,c=s.readTime;if(!e.path.isPrefixOf(a.key.path))break;c.compareTo(n)<=0||u instanceof Aw&&dk(e,u)&&(r=r.insert(u.key,u))}return PS.resolve(r)},t.prototype.ps=function(t,e){return PS.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new mT(this)},t.prototype.getSize=function(t){return PS.resolve(this.size)},t}(),mT=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Db(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)})),PS.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(RE),gT=function(){function t(t){this.persistence=t,this.Es=new PE((function(t){return jw(t)}),Fw),this.lastRemoteSnapshotVersion=yk.min(),this.highestTargetId=0,this.Ts=0,this.Is=new dT,this.targetCount=0,this.As=bE.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach((function(t,n){return e(n)})),PS.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return PS.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return PS.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),PS.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),PS.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new bE(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,PS.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),PS.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,PS.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.Es.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),PS.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return PS.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return PS.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),PS.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),PS.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),PS.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return PS.resolve(n)},t.prototype.containsKey=function(t,e){return PS.resolve(this.Is.containsKey(e))},t}(),_T=function(){function t(t,e){var n=this;this.Rs={},this.Me=new jb(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new gT(this),this.Gt=new sE,this.ze=function(t,e){return new yT(t,(function(t){return n.referenceDelegate.bs(t)}))}(this.Gt),this.D=new KS(e),this.He=new fT(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new vT(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Lb("MemoryPersistence","Starting transaction:",t);var i=new bT(this.Me.next());return this.referenceDelegate.vs(),n(i).next((function(t){return r.referenceDelegate.Ps(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Vs=function(t,e){return PS.or(Object.values(this.Rs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),bT=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Db(e,t),e}(AS),wT=function(){function t(t){this.persistence=t,this.Ss=new dT,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Bb()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),PS.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),PS.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),PS.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach((function(t){return n.xs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.xs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PS.forEach(this.xs,(function(r){var i=uw.fromPath(r);return e.Ns(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Ds=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next((function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())}))},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return PS.or([function(){return PS.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),kT=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function CT(t,e){return"firestore_clients_"+t+"_"+e}function ST(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function ET(t,e){return"firestore_targets_"+t+"_"+e}kT.UNAUTHENTICATED=new kT(null),kT.GOOGLE_CREDENTIALS=new kT("google-credentials-uid"),kT.FIRST_PARTY=new kT("first-party-uid");var TT=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new rw(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Vb("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),OT=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new rw(i.error.code,i.error.message)),o?new t(e,i.state,r):(Vb("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),xT=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=bC(),a=0;i&&a<r.activeTargetIds.length;++a)i=ew(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Vb("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),IT=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Vb("SharedClientState","Failed to parse online state: "+e),null)},t}(),AT=function(){function t(){this.activeTargetIds=bC()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),DT=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new oC(Kb),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=CT(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new AT),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Pb(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return Rb(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(CT(this.persistenceKey,r)))&&(o=xT.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(a=this.storage.getItem(this.zs))&&(s=this.Ys(a))&&this.Xs(s),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(ET(this.persistenceKey,t));if(n){var r=OT.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(ET(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.ei(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Lb("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Lb("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Lb("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Lb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Vb("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable((function(){return Pb(e,void 0,void 0,(function(){var t,e,r,i,o,a;return Rb(this,(function(s){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(a=function(t){var e=jb.o;if(null!=t)try{var n=JSON.parse(t);zb("number"==typeof n),e=n}catch(t){Vb("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==jb.o&&this.sequenceNumberHandler(a);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new TT(this.currentUser,t,e,n),i=ST(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=ST(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=ET(this.persistenceKey,t),i=new OT(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return xT.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return TT.$s(new kT(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return OT.$s(r,e)},t.prototype.Ys=function(t){return IT.$s(t)},t.prototype.hi=function(t){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(Lb("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.mi(a,s).then((function(){n.qs=r}))},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=bC();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),PT=function(){function t(){this.yi=new AT,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new AT,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),RT=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),NT=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){Lb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){Lb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),jT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},FT=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),MT=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Db(e,t),e.prototype.qi=function(t,e,n,r){return new Promise((function(i,o){var a=new Ib;a.listenOnce(Tb.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Eb.NO_ERROR:var e=a.getResponseJson();Lb("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Eb.TIMEOUT:Lb("Connection",'RPC "'+t+'" timed out'),o(new rw(nw.DEADLINE_EXCEEDED,"Request time out"));break;case Eb.HTTP_ERROR:var n=a.getStatus();if(Lb("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(nw).indexOf(e)>=0?e:nw.UNKNOWN}(r.status);o(new rw(s,r.message))}else o(new rw(nw.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new rw(nw.UNAVAILABLE,"Connection failed."));break;default:Bb()}}finally{Lb("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new bb,i=Cg(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(Ay.t)()||Object(Ay.w)()||Object(Ay.q)()||Object(Ay.s)()||Object(Ay.x)()||Object(Ay.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Lb("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new FT({vi:function(t){c?Lb("Connection","Not sending because WebChannel is closed:",t):(u||(Lb("Connection","Opening WebChannel transport."),s.open(),u=!0),Lb("Connection","WebChannel sending:",t),s.send(t))},Pi:function(){return s.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(s,xb.EventType.OPEN,(function(){c||Lb("Connection","WebChannel transport opened.")})),h(s,xb.EventType.CLOSE,(function(){c||(c=!0,Lb("Connection","WebChannel transport closed"),l.$i())})),h(s,xb.EventType.ERROR,(function(t){c||(c=!0,Ub("Connection","WebChannel transport errored:",t),l.$i(new rw(nw.UNAVAILABLE,"The operation could not be completed")))})),h(s,xb.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];zb(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Lb("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Jk[t];if(void 0!==e)return iC(e)}(i),a=r.message;void 0===o&&(o=nw.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new rw(o,a)),s.close()}else Lb("Connection","WebChannel received:",n),l.Fi(n)}})),h(i,Ob.STAT_EVENT,(function(t){10===t.stat?Lb("Connection","Detected buffering proxy"):11===t.stat&&Lb("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Ni()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);Lb("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then((function(t){return Lb("RestConnection","Received: ",t),t}),(function(e){throw Ub("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+jT[t]},t}());function LT(){return"undefined"!=typeof window?window:null}function VT(){return"undefined"!=typeof document?document:null}function UT(t){return new PC(t,!0)}var qT=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Lb("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,(function(){return e.Hi=Date.now(),t()})),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),BT=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new qT(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,(function(){return t.dr()})))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(t){return this.ar()?[2,this.close(0)]:[2]}))}))},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===nw.RESOURCE_EXHAUSTED?(Vb(e.toString()),Vb("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===nw.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then((function(e){t.sr===n&&t.gr(e)}),(function(n){e((function(){var e=new rw(nw.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)}))}))},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi((function(){n((function(){return e.state=2,e.listener.Vi()}))})),this.stream.Di((function(t){n((function(){return e.pr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi((function(){return Pb(t,void 0,void 0,(function(){return Rb(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.pr=function(t){return Lb("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget((function(){return e.sr===t?n():(Lb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),zT=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,a}return Db(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Bb()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(zb(void 0===e||"string"==typeof e),cw.fromBase64String(e||"")):(zb(void 0===e||e instanceof Uint8Array),cw.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?nw.UNKNOWN:iC(t.code);return new rw(e,t.message||"")}(s);n=new EC(r,i,o,a||null)}else if("documentChange"in e){i=UC(t,(r=e.documentChange).document.name),o=FC(r.document.updateTime);var s=new gk({mapValue:{fields:r.document.fields}}),u=(a=new Aw(i,o,s,{}),r.targetIds||[]);n=new CC(u,r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e)i=UC(t,(r=e.documentDelete).document),o=r.readTime?FC(r.readTime):yk.min(),s=new Dw(i,o),n=new CC([],a=r.removedTargetIds||[],s.key,s);else if("documentRemove"in e)i=UC(t,(r=e.documentRemove).document),n=new CC([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Bb();var c=e.filter;i=new nC(r=c.count||0),n=new SC(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return yk.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?yk.min():e.readTime?FC(e.readTime):yk.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=zC(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=Mw(r)?{documents:YC(t,r)}:{query:XC(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=NC(t,e.resumeToken):e.snapshotVersion.compareTo(yk.min())>0&&(n.readTime=RC(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bb()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=zC(this.D),e.removeTarget=t,this.wr(e)},e}(BT),HT=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,a.Rr=!1,a}return Db(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(zb(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(zb(void 0!==e),t.map((function(t){return function(t,e){var n=FC(t.updateTime?t.updateTime:e);return n.isEqual(yk.min())&&(n=FC(e)),new Mk(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=FC(t.commitTime);return this.listener.Pr(n,e)}return zb(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=zC(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return KC(e.D,t)}))};this.wr(n)},e}(BT),GT=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Db(e,t),e.prototype.Cr=function(){if(this.Dr)throw new rw(nw.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Mi(t,e,n,i)})).catch((function(t){throw t.code===nw.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Ui(t,e,n,i)})).catch((function(t){throw t.code===nw.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Dr=!1},e}((function(){})),WT=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()})))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(Vb(e),this.Fr=!1):Lb("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),KT=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi((function(t){n.enqueueAndForget((function(){return Pb(o,void 0,void 0,(function(){return Rb(this,(function(t){switch(t.label){case 0:return nO(this)?(Lb("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Pb(this,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:return(e=Hb(t)).Qr.add(4),[4,YT(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,QT(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.jr=new WT(n,r)};function QT(t){return Pb(this,void 0,void 0,(function(){var e,n;return Rb(this,(function(r){switch(r.label){case 0:if(!nO(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function YT(t){return Pb(this,void 0,void 0,(function(){var e,n;return Rb(this,(function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function XT(t,e){var n=Hb(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),eO(n)?tO(n):mO(n).ar()&&JT(n,e))}function ZT(t,e){var n=Hb(t),r=mO(n);n.Ur.delete(e),r.ar()&&$T(n,e),0===n.Ur.size&&(r.ar()?r.lr():nO(n)&&n.jr.set("Unknown"))}function JT(t,e){t.Gr.H(e.targetId),mO(t).Ir(e)}function $T(t,e){t.Gr.H(e),mO(t).Ar(e)}function tO(t){t.Gr=new OC({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),mO(t).start(),t.jr.Or()}function eO(t){return nO(t)&&!mO(t).cr()&&t.Ur.size>0}function nO(t){return 0===Hb(t).Qr.size}function rO(t){t.Gr=void 0}function iO(t){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(e){return t.Ur.forEach((function(e,n){JT(t,e)})),[2]}))}))}function oO(t,e){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(n){return rO(t),eO(t)?(t.jr.Lr(e),tO(t)):t.jr.set("Unknown"),[2]}))}))}function aO(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i,o;return Rb(this,(function(a){switch(a.label){case 0:if(t.jr.set("Online"),!(e instanceof EC&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o;return Rb(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:a.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Lb("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,sO(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof CC?t.Gr.st(e):e instanceof SC?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(yk.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,tT(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(cw.EMPTY_BYTE_STRING,n.snapshotVersion)),$T(t,e);var r=new WS(n.target,e,1,n.sequenceNumber);JT(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Lb("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,sO(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function sO(t,e,n){return Pb(this,void 0,void 0,(function(){var r=this;return Rb(this,(function(i){switch(i.label){case 0:if(!MS(e))throw e;return t.Qr.add(1),[4,YT(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return tT(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Pb(r,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return Lb("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,QT(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function uO(t,e){return e().catch((function(n){return sO(t,n,e)}))}function cO(t){return Pb(this,void 0,void 0,(function(){var e,n,r,i,o;return Rb(this,(function(a){switch(a.label){case 0:e=Hb(t),n=gO(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return nO(t)&&t.qr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,rT(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=gO(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,sO(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return lO(e)&&hO(e),[2]}}))}))}function lO(t){return nO(t)&&!gO(t).cr()&&t.qr.length>0}function hO(t){gO(t).start()}function fO(t){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(e){return gO(t).Sr(),[2]}))}))}function dO(t){return Pb(this,void 0,void 0,(function(){var e,n,r;return Rb(this,(function(i){for(e=gO(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]}))}))}function pO(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i;return Rb(this,(function(o){switch(o.label){case 0:return r=t.qr.shift(),i=GS.from(r,e,n),[4,uO(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,cO(t)];case 2:return o.sent(),[2]}}))}))}function vO(t,e){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(n){switch(n.label){case 0:return e&&gO(t).br?[4,function(t,e){return Pb(this,void 0,void 0,(function(){var n,r;return Rb(this,(function(i){switch(i.label){case 0:return rC(r=e.code)&&r!==nw.ABORTED?(n=t.qr.shift(),gO(t).hr(),[4,uO(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,cO(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return lO(t)&&hO(t),[2]}}))}))}function yO(t,e){return Pb(this,void 0,void 0,(function(){var n;return Rb(this,(function(r){switch(r.label){case 0:return n=Hb(t),e?(n.Qr.delete(2),[4,QT(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,YT(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function mO(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Hb(t);return r.Cr(),new zT(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:iO.bind(null,t),Di:oO.bind(null,t),Tr:aO.bind(null,t)}),t.Kr.push((function(n){return Pb(e,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return n?(t.zr.hr(),eO(t)?tO(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),rO(t),e.label=3;case 3:return[2]}}))}))}))),t.zr}function gO(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Hb(t);return r.Cr(),new HT(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:fO.bind(null,t),Di:vO.bind(null,t),Vr:dO.bind(null,t),Pr:pO.bind(null,t)}),t.Kr.push((function(n){return Pb(e,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,cO(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(Lb("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Hr}var _O=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new DS,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rw(nw.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function bO(t,e){if(Vb("AsyncQueue",e+": "+t),MS(t))return new rw(nw.UNAVAILABLE,e+": "+t);throw t}var wO=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||uw.comparator(e.key,n.key)}:function(t,e){return uw.comparator(t.key,e.key)},this.keyedMap=pC(),this.sortedSet=new oC(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),kO=function(){function t(){this.Jr=new oC(uw.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Bb():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),CO=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,wO.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lk(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),SO=function(){this.Xr=void 0,this.listeners=[]},EO=function(){this.queries=new PE((function(t){return hk(t)}),lk),this.onlineState="Unknown",this.Zr=new Set};function TO(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Rb(this,(function(c){switch(c.label){case 0:if(n=Hb(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new SO),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Xr=c.sent(),[3,4];case 3:return s=c.sent(),u=bO(s,"Initialization of query '"+fk(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&AO(n),[2]}}))}))}function OO(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o,a;return Rb(this,(function(s){return n=Hb(t),i=!1,(o=n.queries.get(r=e.query))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function xO(t,e){for(var n=Hb(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=n.queries.get(a.query);if(s){for(var u=0,c=s.listeners;u<c.length;u++)c[u].no(a)&&(r=!0);s.Xr=a}}r&&AO(n)}function IO(t,e,n){var r=Hb(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function AO(t){t.Zr.forEach((function(t){t.next()}))}var DO=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new CO(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=CO.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),PO=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),RO=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return UC(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?WC(this.D,t.document,!1):new Dw(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return FC(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new RO(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.Gn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||gC()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return Pb(this,void 0,void 0,(function(){var t,e,n,r,i;return Rb(this,(function(o){switch(o.label){case 0:return[4,lT(this.localStore,new RO(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,hT(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new WE(Object.assign({},this.progress),t))]}}))}))}}();var NO=function(t){this.key=t},jO=function(t){this.key=t},FO=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=gC(),this.mutatedKeys=gC(),this.po=pk(t),this.Eo=new wO(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new kO,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=nk(this.query)&&i.size===this.query.limit?i.last():null,c=rk(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=e instanceof Aw?e:null;h&&(h=dk(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),nk(this.query)||rk(this.query))for(;a.size>this.query.limit;){var l=nk(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:a,Ao:r,Mn:s,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bb()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)})),this.bo(n);var a=e?this.vo():[],s=0===this.yo.size&&this.current?1:0,u=s!==this.mo;return this.mo=s,0!==o.length||u?{snapshot:new CO(this.query,t.Eo,i,o,t.mutatedKeys,0===s,u,!1),Po:a}:{Po:a}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new kO,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._o=e._o.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e._o=e._o.delete(t)})),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=gC(),this.Eo.forEach((function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))}));var n=[];return e.forEach((function(e){t.yo.has(e)||n.push(new jO(e))})),this.yo.forEach((function(t){e.has(t)||n.push(new NO(t))})),n},t.prototype.So=function(t){this._o=t.jn,this.yo=gC();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return CO.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),MO=function(t,e,n){this.query=t,this.targetId=e,this.view=n},LO=function(t){this.key=t,this.Co=!1},VO=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new PE((function(t){return hk(t)}),lk),this.$o=new Map,this.Fo=new Set,this.Oo=new oC(uw.comparator),this.ko=new Map,this.Mo=new dT,this.Lo={},this.Bo=new Map,this.qo=bE.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function UO(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o,a;return Rb(this,(function(s){switch(s.label){case 0:return n=vx(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,iT(n.localStore,uk(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,qO(n,e,o.targetId,"current"===a)];case 3:r=s.sent(),n.isPrimaryClient&&XT(n.remoteStore,o),s.label=4;case 4:return[2,r]}}))}))}function qO(t,e,n,r){return Pb(this,void 0,void 0,(function(){var i,o,a,s,u,c;return Rb(this,(function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Pb(this,void 0,void 0,(function(){var i,o,a;return Rb(this,(function(s){switch(s.label){case 0:return(i=e.view.Io(n)).Mn?[4,aT(t.localStore,e.query,!1).then((function(t){return e.view.Io(t.documents,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(tx(t,e.targetId,a.Po),a.snapshot)]}}))}))}(t,e,n,r)},[4,aT(t.localStore,e,!0)];case 1:return i=l.sent(),o=new FO(e,i.jn),a=o.Io(i.documents),s=kC.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),tx(t,n,u.Po),c=new MO(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}}))}))}function BO(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i;return Rb(this,(function(o){switch(o.label){case 0:return n=Hb(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter((function(t){return!lk(t,e)}))),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,oT(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),ZT(n.remoteStore,r.targetId),JO(n,r.targetId)})).catch(EE)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return JO(n,r.targetId),[4,oT(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function zO(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i,o,a;return Rb(this,(function(s){switch(s.label){case 0:r=yx(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Hb(t),i=pw.now(),o=e.reduce((function(t,e){return t.add(e.key)}),gC());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Kn.bn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=zk(c,n.get(c.key));null!=l&&a.push(new Kk(c.key,l,bk(l.proto.mapValue),Lk.exists(!0)))}return r.Tn.addMutationBatch(t,i,a,e)}))})).then((function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new oC(Kb)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,rx(r,i.changes)];case 3:return s.sent(),[4,cO(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=bO(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function HO(t,e){return Pb(this,void 0,void 0,(function(){var n,r;return Rb(this,(function(i){switch(i.label){case 0:n=Hb(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,eT(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.ko.get(e);r&&(zb(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?zb(r.Co):t.removedDocuments.size>0&&(zb(r.Co),r.Co=!1))})),[4,rx(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,EE(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function GO(t,e,n){var r=Hb(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach((function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Hb(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)})),r&&AO(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WO(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Rb(this,(function(c){switch(c.label){case 0:return(r=Hb(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(a=(a=new oC(uw.comparator)).insert(o,new Dw(o,yk.min())),s=gC().add(o),u=new wC(yk.min(),new Map,new uC(Kb),a,s),[4,HO(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),nx(r),[3,4];case 2:return[4,oT(r.localStore,e,!1).then((function(){return JO(r,e,n)})).catch(EE)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function KO(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i;return Rb(this,(function(o){switch(o.label){case 0:n=Hb(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,$E(n.localStore,e)];case 2:return i=o.sent(),ZO(n,r,null),XO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,rx(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,EE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function QO(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i;return Rb(this,(function(o){switch(o.label){case 0:r=Hb(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Hb(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Tn.lookupMutationBatch(t,e).next((function(e){return zb(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)})).next((function(){return n.Tn.performConsistencyCheck(t)})).next((function(){return n.Kn.bn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),ZO(r,e,n),XO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,rx(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,EE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function YO(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o,a;return Rb(this,(function(s){switch(s.label){case 0:nO((n=Hb(t)).remoteStore)||Lb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Hb(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=s.sent(),a=bO(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function XO(t,e){(t.Bo.get(e)||[]).forEach((function(t){t.resolve()})),t.Bo.delete(e)}function ZO(t,e,n){var r=Hb(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function JO(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach((function(e){t.Mo.containsKey(e)||$O(t,e)}))}function $O(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(ZT(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),nx(t))}function tx(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof NO?(t.Mo.addReference(o.key,e),ex(t,o)):o instanceof jO?(Lb("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||$O(t,o.key)):Bb()}}function ex(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(Lb("SyncEngine","New document in limbo: "+n),t.Fo.add(r),nx(t))}function nx(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new uw(ow.fromString(e)),r=t.qo.next();t.ko.set(r,new LO(n)),t.Oo=t.Oo.insert(n,r),XT(t.remoteStore,new WS(uk(ek(n.path)),r,2,jb.o))}}function rx(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i,o,a;return Rb(this,(function(s){switch(s.label){case 0:return r=Hb(t),i=[],o=[],a=[],r.No.isEmpty()?[3,3]:(r.No.forEach((function(t,s){a.push(r.Qo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=QE.Nn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.xo.Tr(i),[4,function(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return Rb(this,(function(l){switch(l.label){case 0:n=Hb(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return PS.forEach(e,(function(e){return PS.forEach(e.Cn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return PS.forEach(e.xn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!MS(r=l.sent()))throw r;return Lb("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=(a=o[i]).targetId,a.fromCache||(u=n.Bn.get(s),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(s,c));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function ix(t,e){return Pb(this,void 0,void 0,(function(){var n,r;return Rb(this,(function(i){switch(i.label){case 0:return(n=Hb(t)).currentUser.isEqual(e)?[3,3]:(Lb("SyncEngine","User change. New user:",e.toKey()),[4,JE(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach((function(t){t.forEach((function(t){t.reject(new rw(nw.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,rx(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ox(t,e){var n=Hb(t),r=n.ko.get(e);if(r&&r.Co)return gC().add(r.key);var i=gC(),o=n.$o.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=n.No.get(s[a]);i=i.unionWith(u.view.To)}return i}function ax(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i;return Rb(this,(function(o){switch(o.label){case 0:return[4,aT((n=Hb(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&tx(n,e.targetId,i.Po),i)]}}))}))}function sx(t){return Pb(this,void 0,void 0,(function(){var e;return Rb(this,(function(n){return[2,uT((e=Hb(t)).localStore).then((function(t){return rx(e,t)}))]}))}))}function ux(t,e,n,r){return Pb(this,void 0,void 0,(function(){var i,o;return Rb(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Hb(t),r=Hb(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Jt(t,e).next((function(e){return e?n.Kn.bn(t,e):PS.resolve(null)}))}))}((i=Hb(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,cO(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ZO(i,e,r||null),XO(i,e),function(t,e){Hb(Hb(t).Tn).Xt(e)}(i.localStore,e)):Bb(),a.label=4;case 4:return[4,rx(i,o)];case 5:return a.sent(),[3,7];case 6:Lb("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function cx(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Rb(this,(function(c){switch(c.label){case 0:return vx(n=Hb(t)),yx(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,lx(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,yO(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)XT(n.remoteStore,a[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(s=[],u=Promise.resolve(),n.$o.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then((function(){return JO(n,e),oT(n.localStore,e,!0)})),ZT(n.remoteStore,e)})),[4,u]);case 4:return c.sent(),[4,lx(n,s)];case 5:return c.sent(),function(t){var e=Hb(t);e.ko.forEach((function(t,n){ZT(e.remoteStore,n)})),e.Mo.cs(),e.ko=new Map,e.Oo=new oC(uw.comparator)}(n),n.Uo=!1,[4,yO(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function lx(t,e,n){return Pb(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d,p;return Rb(this,(function(v){switch(v.label){case 0:n=Hb(t),r=[],i=[],o=0,a=e,v.label=1;case 1:return o<a.length?(u=void 0,(c=n.$o.get(s=a[o]))&&0!==c.length?[4,iT(n.localStore,uk(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,ax(n,f)]):[3,6];case 4:(d=v.sent()).snapshot&&i.push(d.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,sT(n.localStore,s)];case 8:return p=v.sent(),[4,iT(n.localStore,p)];case 9:return u=v.sent(),[4,qO(n,hx(p),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}}))}))}function hx(t){return tk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function fx(t){var e=Hb(t);return Hb(Hb(e.localStore).persistence).gn()}function dx(t,e,n,r){return Pb(this,void 0,void 0,(function(){var i,o,a;return Rb(this,(function(s){switch(s.label){case 0:return(i=Hb(t)).Uo?(Lb("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,uT(i.localStore)];case 3:return o=s.sent(),a=wC.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,rx(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,oT(i.localStore,e,!0)];case 6:return s.sent(),JO(i,e,r),[3,8];case 7:Bb(),s.label=8;case 8:return[2]}}))}))}function px(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h;return Rb(this,(function(f){switch(f.label){case 0:if(!(r=vx(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(a=o[i])?(Lb("SyncEngine","Adding an already active target "+a),[3,5]):[4,sT(r.localStore,a)]:[3,6];case 2:return s=f.sent(),[4,iT(r.localStore,s)];case 3:return u=f.sent(),[4,qO(r,hx(s),u.targetId,!1)];case 4:f.sent(),XT(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Rb(this,(function(e){switch(e.label){case 0:return r.$o.has(t)?[4,oT(r.localStore,t,!1).then((function(){ZT(r.remoteStore,t),JO(r,t)})).catch(EE)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function vx(t){var e=Hb(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ox.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WO.bind(null,e),e.xo.Tr=xO.bind(null,e.eventManager),e.xo.Ko=IO.bind(null,e.eventManager),e}function yx(t){var e=Hb(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QO.bind(null,e),e}var mx=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return this.D=UT(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}}))}))},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return ZE(this.persistence,new YE,t.initialUser,this.D)},t.prototype.Go=function(t){return new _T(wT.Cs,this.D)},t.prototype.jo=function(t){return new PT},t.prototype.terminate=function(){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),gx=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Db(e,t),e.prototype.initialize=function(e){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,cT(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,yx(this.Jo.syncEngine)];case 4:return n.sent(),[4,cO(this.Jo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ho=function(t){return ZE(this.persistence,new YE,t.initialUser,this.D)},e.prototype.zo=function(t){return new xE(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=GE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?fE.withCacheSize(this.cacheSizeBytes):fE.DEFAULT;return new BE(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,LT(),VT(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new PT},e}(mx),_x=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Db(e,t),e.prototype.initialize=function(e){return Pb(this,void 0,void 0,(function(){var n,r=this;return Rb(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof DT?(this.sharedClientState.syncEngine={wi:ux.bind(null,n),_i:dx.bind(null,n),mi:px.bind(null,n),gn:fx.bind(null,n),di:sx.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en((function(t){return Pb(r,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return[4,cx(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jo=function(t){var e=LT();if(!DT.At(e))throw new rw(nw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=GE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new DT(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(gx),bx=function(){function t(){}return t.prototype.initialize=function(t,e){return Pb(this,void 0,void 0,(function(){var n=this;return Rb(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return GO(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ix.bind(null,this.syncEngine),[4,yO(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new EO},t.prototype.createDatastore=function(t){var e=UT(t.databaseInfo.databaseId),n=new MT(t.databaseInfo);return function(t,e,n){return new GT(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return GO(a.syncEngine,t,0)},o=NT.At()?new NT:new RT,new KT(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new VO(t,e,n,r,i,o);return a&&(s.Uo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Pb(this,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:return e=Hb(t),Lb("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,YT(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),wx=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),kx=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new DS,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then((function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Wo=function(){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}}))}))},t.prototype.ec=function(){return Pb(this,void 0,void 0,(function(){var t,e,n,r;return Rb(this,(function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new PO(JSON.parse(r),t.length+n)]}}))}))},t.prototype.rc=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.nc=function(){return Pb(this,void 0,void 0,(function(){var t,e;return Rb(this,(function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.ic=function(t){return Pb(this,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Pb(this,void 0,void 0,(function(){var t,e;return Rb(this,(function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Pb(this,void 0,void 0,(function(){var e,n=this;return Rb(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new rw(nw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Rb(this,(function(u){switch(u.label){case 0:return n=Hb(t),r=zC(n.D)+"/documents",i={documents:e.map((function(t){return VC(n.D,t)}))},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){zb(!!e.found);var n=UC(t,e.found.name),r=FC(e.found.updateTime),i=new gk({mapValue:{fields:e.found.fields}});return new Aw(n,r,i,{})}(t,e):"missing"in e?function(t,e){zb(!!e.missing),zb(!!e.readTime);var n=UC(t,e.missing),r=FC(e.readTime);return new Dw(n,r)}(t,e):Bb()}(n.D,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());zb(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Dw||t instanceof Aw?n.recordVersion(t):Bb()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new tC(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Pb(this,void 0,void 0,(function(){var t,e=this;return Rb(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=uw.fromPath(n);e.mutations.push(new eC(r,e.precondition(r)))})),[4,function(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i;return Rb(this,(function(o){switch(o.label){case 0:return n=Hb(t),r=zC(n.D)+"/documents",i={writes:e.map((function(t){return KC(n.D,t)}))},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof Aw)e=t.version;else{if(!(t instanceof Dw))throw Bb();e=yk.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new rw(nw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Lk.updateTime(e):Lk.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(yk.min()))throw new rw(nw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lk.updateTime(e)}return Lk.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Cx=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new qT(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi((function(){return Pb(t,void 0,void 0,(function(){var t,e,n=this;return Rb(this,(function(r){return t=new kx(this.datastore),(e=this.uc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.hc(t)}))}))})).catch((function(t){n.hc(t)})),[2]}))}))}))},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!$b(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget((function(){return e.ac(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!rC(e)}return!1},t}(),Sx=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=kT.UNAUTHENTICATED,this.clientId=Wb.u(),this.credentialListener=function(){},this.receivedInitialUser=new DS,this.credentials.setChangeListener((function(t){Lb("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new rw(nw.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new DS;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Pb(t,void 0,void 0,(function(){var t,n;return Rb(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=bO(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Ex(t,e){return Pb(this,void 0,void 0,(function(){var n,r,i=this;return Rb(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Lb("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return Pb(i,void 0,void 0,(function(){return Rb(this,(function(t){switch(t.label){case 0:return[4,JE(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Tx(t,e){return Pb(this,void 0,void 0,(function(){var n,r;return Rb(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ox(t)];case 1:return n=i.sent(),Lb("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return Pb(this,void 0,void 0,(function(){var n,r;return Rb(this,(function(i){switch(i.label){case 0:return(n=Hb(t)).asyncQueue.verifyOperationInProgress(),Lb("RemoteStore","RemoteStore received new credentials"),r=nO(n),n.Qr.add(3),[4,YT(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,QT(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function Ox(t){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Lb("FirestoreClient","Using default OfflineComponentProvider"),[4,Ex(t,new mx)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function xx(t){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Lb("FirestoreClient","Using default OnlineComponentProvider"),[4,Tx(t,new bx)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Ix(t){return Ox(t).then((function(t){return t.persistence}))}function Ax(t){return Ox(t).then((function(t){return t.localStore}))}function Dx(t){return xx(t).then((function(t){return t.remoteStore}))}function Px(t){return xx(t).then((function(t){return t.syncEngine}))}function Rx(t){return Pb(this,void 0,void 0,(function(){var e,n;return Rb(this,(function(r){switch(r.label){case 0:return[4,xx(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=UO.bind(null,e.syncEngine),n.onUnlisten=BO.bind(null,e.syncEngine),n)]}}))}))}function Nx(t,e,n){var r=this;void 0===n&&(n={});var i=new DS;return t.asyncQueue.enqueueAndForget((function(){return Pb(r,void 0,void 0,(function(){var r;return Rb(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new wx({next:function(o){e.enqueueAndForget((function(){return OO(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new rw(nw.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new rw(nw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new DO(ek(n.path),o,{includeMetadataChanges:!0,uo:!0});return TO(t,a)},[4,Rx(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function jx(t,e,n){var r=this;void 0===n&&(n={});var i=new DS;return t.asyncQueue.enqueueAndForget((function(){return Pb(r,void 0,void 0,(function(){var r;return Rb(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new wx({next:function(n){e.enqueueAndForget((function(){return OO(t,a)})),n.fromCache&&"server"===r.source?i.reject(new rw(nw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new DO(n,o,{includeMetadataChanges:!0,uo:!0});return TO(t,a)},[4,Rx(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Fx=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Mx=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Lx=new Map,Vx=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ux=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(kT.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),qx=function(){function t(t){var e=this;this.fc=null,this.currentUser=kT.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then((function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.dc!==e?(Lb("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(zb("string"==typeof n.accessToken),new Vx(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return zb(null===t||"string"==typeof t),new kT(t)},t}(),Bx=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=kT.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),zx=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Bx(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(kT.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Hx(t,e,n){if(!n)throw new rw(nw.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Gx(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new rw(nw.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Wx(t,e,n,r){if(!0===e&&!0===r)throw new rw(nw.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Kx(t){if(!uw.isDocumentKey(t))throw new rw(nw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Qx(t){if(uw.isDocumentKey(t))throw new rw(nw.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Yx(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Bb()}function Xx(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new rw(nw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Yx(t);throw new rw(nw.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Zx(t,e){if(e<=0)throw new rw(nw.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Jx=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new rw(nw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new rw(nw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Wx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),$x=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Jx({}),this._settingsFrozen=!1,t instanceof Mx?(this._databaseId=t,this._credentials=new Ux):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new rw(nw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mx(t.options.projectId)}(t),this._credentials=new qx(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new rw(nw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new rw(nw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jx(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ux;switch(t.type){case"gapi":var e=t.client;return zb(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new zx(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new rw(nw.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Lx.get(this))&&(Lb("ComponentProvider","Removing Datastore"),Lx.delete(this),t.terminate()),Promise.resolve();var t},t}(),tI=function(t){this._delegate=t},eI=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new rI(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),nI=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),rI=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ek(r))||this).firestore=e,i._path=r,i.type="collection",i}return Db(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new eI(this.firestore,null,new uw(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(nI);function iI(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof tI&&(t=t._delegate),Hx("collection","path",e),t instanceof $x)return Qx(n=ow.fromString.apply(ow,Nb([e],r))),new rI(t,null,n);if(!(t instanceof eI||t instanceof rI))throw new rw(nw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Qx(n=ow.fromString.apply(ow,Nb([t.path],r)).child(ow.fromString(e))),new rI(t.firestore,null,n)}function oI(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof tI&&(t=t._delegate),1===arguments.length&&(e=Wb.u()),Hx("doc","path",e),t instanceof $x)return Kx(n=ow.fromString.apply(ow,Nb([e],r))),new eI(t,null,new uw(n));if(!(t instanceof eI||t instanceof rI))throw new rw(nw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kx(n=t._path.child(ow.fromString.apply(ow,Nb([e],r)))),new eI(t.firestore,t instanceof rI?t._converter:null,new uw(n))}function aI(t,e){return t instanceof tI&&(t=t._delegate),e instanceof tI&&(e=e._delegate),(t instanceof eI||t instanceof rI)&&(e instanceof eI||e instanceof rI)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function sI(t,e){return t instanceof tI&&(t=t._delegate),e instanceof tI&&(e=e._delegate),t instanceof nI&&e instanceof nI&&t.firestore===e.firestore&&lk(t._query,e._query)&&t._converter===e._converter}var uI=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new qT(this,"async_queue_retry"),this.bc=function(){var e=VT();e&&Lb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=VT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=VT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise((function(t){})):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.gc.push(t),e.Vc()}))},t.prototype.Vc=function(){return Pb(this,void 0,void 0,(function(){var t,e=this;return Rb(this,(function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!MS(t=n.sent()))throw t;return Lb("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi((function(){return e.Vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Pc=function(t){var e=this,n=this.yc.then((function(){return e.Ac=!0,t().catch((function(t){throw e.Ic=t,e.Ac=!1,Vb("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ac=!1,t}))}));return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=_O.createAndSchedule(this,t,e,n,(function(t){return r.Sc(t)}));return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Bb()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Pb(this,void 0,void 0,(function(){var t;return Rb(this,(function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then((function(){e.Tc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()}))},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function cI(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new DS,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var lI=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new uI,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Db(e,t),e.prototype._terminate=function(){return this._firestoreClient||fI(this),this._firestoreClient.terminate()},e}($x);function hI(t){return t._firestoreClient||fI(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fI(t){var e=t._freezeSettings(),n=function(t,e,n){return new Fx(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new Sx(t._credentials,t._queue,n)}function dI(t,e,n){var r=this,i=new DS;return t.asyncQueue.enqueue((function(){return Pb(r,void 0,void 0,(function(){var r;return Rb(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ex(t,n)];case 1:return o.sent(),[4,Tx(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===nw.FAILED_PRECONDITION||t.code===nw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function pI(t){if(t._initialized||t._terminated)throw new rw(nw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var vI=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new rw(nw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sw(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),yI=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(cw.fromBase64String(e))}catch(e){throw new rw(nw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(cw.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),mI=function(t){this._methodName=t},gI=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new rw(nw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new rw(nw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Kb(this._lat,t._lat)||Kb(this._long,t._long)},t}(),_I=/^__.*__$/,bI=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Kk(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wk(t,this.data,e,this.fieldTransforms)},t}(),wI=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Kk(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function kI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bb()}}var CI=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return zI(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(kI(this.Fc)&&_I.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),SI=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||UT(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new CI({Fc:t,methodName:e,Kc:n,path:sw.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function EI(t){var e=t._freezeSettings(),n=UT(t._databaseId);return new SI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TI(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);VI("Data must be an object, but it was:",a,r);var s,u,c=MI(r,a);if(o.merge)s=new mk(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=UI(e,f[h],n);if(!a.contains(d))throw new rw(nw.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");HI(l,d)||l.push(d)}s=new mk(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new bI(new gk(c),s,u)}var OI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(mI);function xI(t,e,n){return new CI({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var II=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype._toFieldTransform=function(t){return new Fk(t.path,new xk)},e.prototype.isEqual=function(t){return t instanceof e},e}(mI),AI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Db(e,t),e.prototype._toFieldTransform=function(t){var e=xI(this,t,!0),n=this.jc.map((function(t){return FI(t,e)})),r=new Ik(n);return new Fk(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(mI),DI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Db(e,t),e.prototype._toFieldTransform=function(t){var e=xI(this,t,!0),n=this.jc.map((function(t){return FI(t,e)})),r=new Dk(n);return new Fk(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(mI),PI=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Db(e,t),e.prototype._toFieldTransform=function(t){var e=new Rk(t.D,Ck(t.D,this.Gc));return new Fk(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(mI);function RI(t,e,n,r){var i=t.Wc(1,e,n);VI("Data must be an object, but it was:",i,r);var o=[],a=new _k;Zb(r,(function(t,r){var s=BI(e,t,n);r instanceof tI&&(r=r._delegate);var u=i.Bc(s);if(r instanceof OI)o.push(s);else{var c=FI(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new mk(o);return new wI(a.v(),s,i.fieldTransforms)}function NI(t,e,n,r,i,o){var a=t.Wc(1,e,n),s=[UI(e,r,n)],u=[i];if(o.length%2!=0)throw new rw(nw.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(UI(e,o[c])),u.push(o[c+1]);for(var l=[],h=new _k,f=s.length-1;f>=0;--f)if(!HI(l,s[f])){var d=s[f],p=u[f];p instanceof tI&&(p=p._delegate);var v=a.Bc(d);if(p instanceof OI)l.push(d);else{var y=FI(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new mk(l);return new wI(h.v(),m,a.fieldTransforms)}function jI(t,e,n,r){return void 0===r&&(r=!1),FI(n,t.Wc(r?4:3,e))}function FI(t,e){if(t instanceof tI&&(t=t._delegate),LI(t))return VI("Unsupported field value:",e,t),MI(t,e);if(t instanceof mI)return function(t,e){if(!kI(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=FI(o[i],e.qc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof tI&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ck(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=pw.fromDate(t);return{timestampValue:RC(e.D,n)}}if(t instanceof pw)return n=new pw(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:RC(e.D,n)};if(t instanceof gI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yI)return{bytesValue:NC(e.D,t._byteString)};if(t instanceof eI){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:MC(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Yx(t))}(t,e)}function MI(t,e){var n={};return Jb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zb(t,(function(t,r){var i=FI(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function LI(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pw||t instanceof gI||t instanceof yI||t instanceof eI||t instanceof mI)}function VI(t,e,n){if(!LI(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Yx(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function UI(t,e,n){if(e instanceof tI&&(e=e._delegate),e instanceof vI)return e._internalPath;if("string"==typeof e)return BI(t,e);throw zI("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var qI=new RegExp("[~\\*/\\[\\]]");function BI(t,e,n){if(e.search(qI)>=0)throw zI("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(vI.bind.apply(vI,Nb([void 0],e.split(".")))))._internalPath}catch(r){throw zI("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function zI(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new rw(nw.INVALID_ARGUMENT,(s+=". ")+t+u)}function HI(t,e){return t.some((function(t){return t.isEqual(e)}))}var GI=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new eI(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new WI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(KI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),WI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(GI);function KI(t,e){return"string"==typeof e?BI(t,e):e instanceof tI?e._delegate._internalPath:e._internalPath}var QI=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),YI=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Db(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new XI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(KI("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(GI),XI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(YI),ZI=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new QI(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new XI(n._firestore,n._userDataWriter,r.key,r,new QI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new rw(nw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new XI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new QI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new XI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new QI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:JI(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function JI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bb()}}function $I(t,e){return t instanceof YI&&e instanceof YI?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ZI&&e instanceof ZI&&t._firestore===e._firestore&&sI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function tA(t){if(rk(t)&&0===t.explicitOrderBy.length)throw new rw(nw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var eA=function(){};function nA(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var rA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Db(e,t),e.prototype._apply=function(t){var e=EI(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new rw(nw.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){lA(a,o);for(var u=[],c=0,l=a;c<l.length;c++)u.push(cA(r,t,l[c]));s={arrayValue:{values:u}}}else s=cA(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||lA(a,o),s=jI(n,"where",a,"in"===o||"not-in"===o);var h=Lw.create(i,o,s);return function(t,e){if(e.g()){var n=ok(t);if(null!==n&&!n.isEqual(e.field))throw new rw(nw.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ik(t);null!==r&&hA(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new rw(nw.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new nI(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new $w(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(eA),iA=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Db(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new rw(nw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new rw(nw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yw(e,n);return function(t,e){if(null===ik(t)){var n=ok(t);null!==n&&hA(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new nI(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new $w(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(eA),oA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Db(e,t),e.prototype._apply=function(t){return new nI(t.firestore,t._converter,ck(t._query,this.Xc,this.Zc))},e}(eA),aA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Db(e,t),e.prototype._apply=function(t){var e=uA(t,this.type,this.ta,this.ea);return new nI(t.firestore,t._converter,function(t,e){return new $w(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(eA),sA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Db(e,t),e.prototype._apply=function(t){var e=uA(t,this.type,this.ta,this.ea);return new nI(t.firestore,t._converter,function(t,e){return new $w(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(eA);function uA(t,e,n,r){if(n[0]instanceof tI&&(n[0]=n[0]._delegate),n[0]instanceof GI)return function(t,e,n,r,i){if(!r)throw new rw(nw.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=sk(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Cw(e,r.key));else{var c=r.field(u.field);if(vw(c))throw new rw(nw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new rw(nw.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Kw(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=EI(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new rw(nw.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new rw(nw.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ak(t)&&-1!==c.indexOf("/"))throw new rw(nw.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ow.fromString(c));if(!uw.isDocumentKey(l))throw new rw(nw.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new uw(l);s.push(Cw(e,h))}else{var f=jI(n,r,c);s.push(f)}}return new Kw(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function cA(t,e,n){if(n instanceof tI&&(n=n._delegate),"string"==typeof n){if(""===n)throw new rw(nw.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ak(e)&&-1!==n.indexOf("/"))throw new rw(nw.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ow.fromString(n));if(!uw.isDocumentKey(r))throw new rw(nw.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Cw(t,new uw(r))}if(n instanceof eI)return Cw(t,n._key);throw new rw(nw.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Yx(n)+".")}function lA(t,e){if(!Array.isArray(t)||0===t.length)throw new rw(nw.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new rw(nw.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function hA(t,e,n){if(!n.isEqual(e))throw new rw(nw.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var fA=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),mw(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fw(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(dw(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Bb()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Zb(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new gI(fw(t.latitude),fw(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return vw(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(yw(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=hw(t);return new pw(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ow.fromString(t);zb(sS(n));var r=new Mx(n.get(1),n.get(3)),i=new uw(n.popFirst(5));return r.isEqual(e)||Vb("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function dA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var pA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Db(e,t),e.prototype.convertBytes=function(t){return new yI(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new eI(this.firestore,null,e)},e}(fA),vA=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=EI(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=yA(t,this._firestore),i=dA(r._converter,e,n),o=TI(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Lk.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=yA(t,this._firestore);return e instanceof tI&&(e=e._delegate),o="string"==typeof e||e instanceof vI?NI(this._dataReader,"WriteBatch.update",a._key,e,n,r):RI(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Lk.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=yA(t,this._firestore);return this._mutations=this._mutations.concat(new tC(e._key,Lk.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new rw(nw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function yA(t,e){if(t instanceof tI&&(t=t._delegate),t.firestore!==e)throw new rw(nw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var mA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Db(e,t),e.prototype.convertBytes=function(t){return new yI(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new eI(this.firestore,null,e)},e}(fA);function gA(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Xx(t,eI);var o=Xx(t.firestore,lI),a=EI(o);return e instanceof tI&&(e=e._delegate),bA(o,[("string"==typeof e||e instanceof vI?NI(a,"updateDoc",t._key,e,n,r):RI(a,"updateDoc",t._key,e)).toMutation(t._key,Lk.exists(!0))])}function _A(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof tI&&(t=t._delegate);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||cI(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(cI(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof eI)c=Xx(t.firestore,lI),l=ek(t._key.path),u={next:function(e){i[s]&&i[s](wA(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=Xx(t,nI);c=Xx(d.firestore,lI),l=d._query;var p=new mA(c);u={next:function(t){i[s]&&i[s](new ZI(c,p,d,t))},error:i[s+1],complete:i[s+2]},tA(t._query)}return function(t,e,n,r){var i=this,o=new wx(r),a=new DO(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Pb(i,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:return e=TO,[4,Rx(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Xo(),t.asyncQueue.enqueueAndForget((function(){return Pb(i,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:return e=OO,[4,Rx(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(hI(c),l,h,u)}function bA(t,e){return function(t,e){var n=this,r=new DS;return t.asyncQueue.enqueueAndForget((function(){return Pb(n,void 0,void 0,(function(){var n;return Rb(this,(function(i){switch(i.label){case 0:return n=zO,[4,Px(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(hI(t),e)}function wA(t,e,n){var r=n.docs.get(e._key),i=new mA(t);return new YI(t,i,e._key,r,new QI(n.hasPendingWrites,n.fromCache),e._converter)}var kA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Db(e,t),e.prototype.get=function(e){var n=this,r=yA(e,this._firestore),i=new mA(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new YI(n._firestore,i,r._key,t._document,new QI(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=EI(t)}return t.prototype.get=function(t){var e=this,n=yA(t,this._firestore),r=new pA(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Bb();var i=t[0];if(i instanceof Dw)return new GI(e._firestore,r,n._key,null,n._converter);if(i instanceof Aw)return new GI(e._firestore,r,i.key,i,n._converter);throw Bb()}))},t.prototype.set=function(t,e,n){var r=yA(t,this._firestore),i=dA(r._converter,e,n),o=TI(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=yA(t,this._firestore);return e instanceof tI&&(e=e._delegate),o="string"==typeof e||e instanceof vI?NI(this._dataReader,"Transaction.update",a._key,e,n,r):RI(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=yA(t,this._firestore);return this._transaction.delete(e._key),this},t}());function CA(){if("undefined"==typeof Uint8Array)throw new rw(nw.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function SA(){if("undefined"==typeof atob)throw new rw(nw.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var EA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.fromBase64String=function(t){return SA(),new e(yI.fromBase64String(t))},e.fromUint8Array=function(t){return CA(),new e(yI.fromUint8Array(t))},e.prototype.toBase64=function(){return SA(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return CA(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(tI),TA=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){pI(t=Xx(t,lI));var n=hI(t),r=t._freezeSettings(),i=new bx;return dI(n,i,new gx(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){pI(t=Xx(t,lI));var e=hI(t),n=t._freezeSettings(),r=new bx;return dI(e,r,new _x(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new rw(nw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new DS;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Pb(e,void 0,void 0,(function(){var e;return Rb(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Pb(this,void 0,void 0,(function(){return Rb(this,(function(e){switch(e.label){case 0:return NS.At()?[4,NS.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(GE(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),OA=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Mx||(i.sa=e),i}return Db(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Xx(t,$x))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Ub("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Pb(e,void 0,void 0,(function(){var e,n;return Rb(this,(function(r){switch(r.label){case 0:return[4,Ix(t)];case 1:return e=r.sent(),[4,Dx(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Hb(t);return e.Qr.delete(0),QT(e)}(n))]}}))}))}))}(hI(Xx(this._delegate,lI)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Pb(e,void 0,void 0,(function(){var e,n;return Rb(this,(function(r){switch(r.label){case 0:return[4,Ix(t)];case 1:return e=r.sent(),[4,Dx(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Pb(this,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:return(e=Hb(t)).Qr.add(0),[4,YT(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(hI(Xx(this._delegate,lI)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Wx("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new DS;return t.asyncQueue.enqueueAndForget((function(){return Pb(e,void 0,void 0,(function(){var e;return Rb(this,(function(r){switch(r.label){case 0:return e=YO,[4,Px(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(hI(Xx(this._delegate,lI)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new wx(e);return t.asyncQueue.enqueueAndForget((function(){return Pb(n,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:return e=function(t,e){Hb(t).Zr.add(e),e.next()},[4,Rx(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Xo(),t.asyncQueue.enqueueAndForget((function(){return Pb(n,void 0,void 0,(function(){var e;return Rb(this,(function(n){switch(n.label){case 0:return e=function(t,e){Hb(t).Zr.delete(e)},[4,Rx(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(hI(t=Xx(t,lI)),cI(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new rw(nw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new qA(this,iI(this._delegate,t))}catch(t){throw RA(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new PA(this,oI(this._delegate,t))}catch(t){throw RA(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new LA(this,function(t,e){if(t=Xx(t,$x),Hx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new rw(nw.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new nI(t,null,function(t){return new $w(ow.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw RA(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new DS;return t.asyncQueue.enqueueAndForget((function(){return Pb(n,void 0,void 0,(function(){var n;return Rb(this,(function(i){switch(i.label){case 0:return[4,function(t){return xx(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Cx(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(hI(t),(function(n){return e(new kA(t,n))}))}(this._delegate,(function(n){return t(new IA(e,n))}))},e.prototype.batch=function(){var t=this;return hI(this._delegate),new AA(new vA(this._delegate,(function(e){return bA(t._delegate,e)})))},e.prototype.loadBundle=function(t){throw new rw(nw.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new rw(nw.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(tI),xA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Db(e,t),e.prototype.convertBytes=function(t){return new EA(new yI(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return PA.ia(e,this.firestore,null)},e}(fA),IA=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new xA(e),r}return Db(e,t),e.prototype.get=function(t){var e=this,n=BA(t);return this._delegate.get(n).then((function(t){return new FA(e._firestore,new YI(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},e.prototype.set=function(t,e,n){var r=BA(t);return n?(Gx("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=BA(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Nb([a,e,n],i)),this},e.prototype.delete=function(t){var e=BA(t);return this._delegate.delete(e),this},e}(tI),AA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype.set=function(t,e,n){var r=BA(t);return n?(Gx("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=BA(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Nb([a,e,n],i)),this},e.prototype.delete=function(t){var e=BA(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(tI),DA=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Db(e,t),e.prototype.fromFirestore=function(t,e){var n=new XI(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new MA(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new xA(t),n),i.set(n,o)),o},e}(tI);DA.oa=new WeakMap;var PA=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new xA(e),r}return Db(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new rw(nw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new eI(n._delegate,r,new uw(t)))},e.ia=function(t,n,r){return new e(n,new eI(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new qA(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new qA(this.firestore,iI(this._delegate,t))}catch(t){throw RA(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof tI&&(t=t._delegate),t instanceof eI&&aI(this._delegate,t)},e.prototype.set=function(t,e){e=Gx("DocumentReference.set",e);try{return function(t,e,n){t=Xx(t,eI);var r=Xx(t.firestore,lI),i=dA(t._converter,e,n);return bA(r,[TI(EI(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Lk.none())])}(this._delegate,t,e)}catch(t){throw RA(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?gA(this._delegate,t):gA.apply(void 0,Nb([this._delegate,t,e],n))}catch(t){throw RA(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return bA(Xx((t=this._delegate).firestore,lI),[new tC(t._key,Lk.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=NA(e),i=jA(e,(function(e){return new FA(t.firestore,new YI(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return _A(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Xx(t,eI);var e=Xx(t.firestore,lI),n=hI(e),r=new mA(e);return function(t,e){var n=this,r=new DS;return t.asyncQueue.enqueueAndForget((function(){return Pb(n,void 0,void 0,(function(){var n;return Rb(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i;return Rb(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Hb(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Kn.In(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Aw?n.resolve(i):i instanceof Dw?n.resolve(null):n.reject(new rw(nw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=bO(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Ax(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new YI(e,r,t._key,n,new QI(n instanceof Aw&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Xx(t,eI);var e=Xx(t.firestore,lI);return Nx(hI(e),t._key,{source:"server"}).then((function(n){return wA(e,t,n)}))}(this._delegate):function(t){t=Xx(t,eI);var e=Xx(t.firestore,lI);return Nx(hI(e),t._key).then((function(n){return wA(e,t,n)}))}(this._delegate)).then((function(t){return new FA(e.firestore,new YI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?DA.ra(this.firestore,t):null))},e}(tI);function RA(t,e,n){return t.message=t.message.replace(e,n),t}function NA(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!cI(r))return r}return{}}function jA(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=cI(t[0])?t[0]:cI(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var FA=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Db(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new PA(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return $I(this._delegate,t._delegate)},e}(tI),MA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(FA),LA=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new xA(e),r}return Db(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,nA(this._delegate,function(t,e,n){var r=e,i=KI("where",t);return new rA(i,r,n)}(t,n,r)))}catch(t){throw RA(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,nA(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=KI("orderBy",t);return new iA(r,n)}(t,n)))}catch(t){throw RA(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,nA(this._delegate,function(t){return Zx("limit",t),new oA("limit",t,"F")}(t)))}catch(t){throw RA(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,nA(this._delegate,function(t){return Zx("limitToLast",t),new oA("limitToLast",t,"L")}(t)))}catch(t){throw RA(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,nA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new aA("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw RA(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,nA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new aA("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw RA(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,nA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sA("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw RA(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,nA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sA("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw RA(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return sI(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Xx(t,nI);var e=Xx(t.firestore,lI),n=hI(e),r=new mA(e);return function(t,e){var n=this,r=new DS;return t.asyncQueue.enqueueAndForget((function(){return Pb(n,void 0,void 0,(function(){var n;return Rb(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i,o,a,s;return Rb(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,aT(t,e,!0)];case 1:return s=u.sent(),r=new FO(e,s.jn),i=r.Io(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=bO(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Ax(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new ZI(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Xx(t,nI);var e=Xx(t.firestore,lI),n=hI(e),r=new mA(e);return jx(n,t._query,{source:"server"}).then((function(n){return new ZI(e,r,t,n)}))}(this._delegate):function(t){t=Xx(t,nI);var e=Xx(t.firestore,lI),n=hI(e),r=new mA(e);return tA(t._query),jx(n,t._query).then((function(n){return new ZI(e,r,t,n)}))}(this._delegate)).then((function(t){return new UA(e.firestore,new ZI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=NA(e),i=jA(e,(function(e){return new UA(t.firestore,new ZI(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return _A(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?DA.ra(this.firestore,t):null))},e}(tI),VA=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Db(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new MA(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(tI),UA=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Db(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new LA(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new MA(t._firestore,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new VA(e._firestore,t)}))},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new MA(n._firestore,r))}))},e.prototype.isEqual=function(t){return $I(this._delegate,t._delegate)},e}(tI),qA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Db(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new PA(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new PA(this.firestore,void 0===t?oI(this._delegate):oI(this._delegate,t))}catch(t){throw RA(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Xx(t.firestore,lI),r=oI(t),i=dA(t._converter,e);return bA(n,[TI(EI(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Lk.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new PA(e.firestore,t)}))},e.prototype.isEqual=function(t){return aI(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?DA.ra(this.firestore,t):null))},e}(LA);function BA(t){return t instanceof tI&&(t=t._delegate),Xx(t,eI)}var zA,HA=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(vI.bind.apply(vI,Nb([void 0],e))))||this}return Db(e,t),e.documentId=function(){return new e(sw.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof tI&&(t=t._delegate),t instanceof vI&&this._delegate._internalPath.isEqual(t._internalPath)},e}(tI),GA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Db(e,t),e.serverTimestamp=function(){var t=new II("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new OI("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new AI("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new DI("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new PI("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(tI),WA=n("/6Yf"),KA={Firestore:OA,GeoPoint:gI,Timestamp:pw,Blob:EA,Transaction:IA,WriteBatch:AA,DocumentReference:PA,DocumentSnapshot:FA,Query:LA,QueryDocumentSnapshot:MA,QuerySnapshot:UA,CollectionReference:qA,FieldPath:HA,FieldValue:GA,setLogLevel:function(t){Fb.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function QA(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.a;return new _e.a((function(n){var r;return null!=e?e.schedule((function(){r=t.onSnapshot({includeMetadataChanges:!0},n)})):r=t.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}}))}(t,e)}function YA(t,e){return QA(t,e).pipe(Object(ke.a)((function(t){return{payload:t,type:"query"}})))}function XA(t,e){return YA(t,e).pipe(Qe(void 0),Ye(),Object(ke.a)((function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1],i=r.payload.docChanges(),o=i.map((function(t){return{type:t.type,payload:t}}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((function(t,e){var r=i.find((function(e){return e.doc.ref.isEqual(t.ref)})),a=null==n?void 0:n.payload.docs.find((function(e){return e.ref.isEqual(t.ref)}));r&&JSON.stringify(r.doc.metadata)===JSON.stringify(t.metadata)||!r&&a&&JSON.stringify(a.metadata)===JSON.stringify(t.metadata)||o.push({type:"modified",payload:{oldIndex:e,newIndex:e,type:"modified",doc:t}})})),o})))}function ZA(t,e,n){return XA(t,n).pipe(oi((function(t,n){return function(t,e,n){return e.forEach((function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return JA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){var n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return JA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return JA(t,e.oldIndex,1)}return t}(t,e))})),t}(t,n.map((function(t){return t.payload})),e)}),[]),Oe(),Object(ke.a)((function(t){return t.map((function(t){return{type:t.type,payload:t}}))})))}function JA(t,e,n){for(var r=t.slice(),i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return r.splice.apply(r,[e,n].concat(o)),r}function $A(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new WA.a("firestore",(function(t){return function(t,e){return new OA(t,new lI(t,e),new TA)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},KA)))})(zA=xy.a),zA.registerVersion("@firebase/firestore","2.2.1");var tD=function(){function t(e,n,r){_classCallCheck(this,t),this.ref=e,this.query=n,this.afs=r}return _createClass(t,[{key:"stateChanges",value:function(t){var e=XA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(ke.a)((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})))),e.pipe(Qe(void 0),Ye(),Ve((function(t){var e=_slicedToArray(t,2),n=e[0];return e[1].length>0||!n})),Object(ke.a)((function(t){var e=_slicedToArray(t,2);e[0];return e[1]})),this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(oi((function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=$A(t);return ZA(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return YA(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ke.a)((function(e){return e.payload.docs.map((function(e){return t.idField?Object.assign(Object.assign({},e.data()),_defineProperty({},t.idField,e.id)):e.data()}))})),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object($e.a)(this.query.get(t)).pipe(Object(an.b)(this.afs.schedulers.insideAngular))}},{key:"add",value:function(t){return this.ref.add(t)}},{key:"doc",value:function(t){return new eD(this.ref.doc(t),this.afs)}}]),t}(),eD=function(){function t(e,n){_classCallCheck(this,t),this.ref=e,this.afs=n}return _createClass(t,[{key:"set",value:function(t,e){return this.ref.set(t,e)}},{key:"update",value:function(t){return this.ref.update(t)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(t,e){var n=sD(this.ref.collection(t),e),r=n.ref,i=n.query;return new tD(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return QA(this.ref,this.afs.schedulers.outsideAngular).pipe(Qe(void 0),Ye(),Object(ke.a)((function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1];return r.exists?(null==n?void 0:n.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe(Object(ke.a)((function(e){var n=e.payload;return t.idField?Object.assign(Object.assign({},n.data()),_defineProperty({},t.idField,n.id)):n.data()})))}},{key:"get",value:function(t){return Object($e.a)(this.ref.get(t)).pipe(Object(an.b)(this.afs.schedulers.insideAngular))}}]),t}(),nD=function(){function t(e,n){_classCallCheck(this,t),this.query=e,this.afs=n}return _createClass(t,[{key:"stateChanges",value:function(t){return t&&0!==t.length?XA(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ke.a)((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})),Ve((function(t){return t.length>0})),this.afs.keepUnstableUntilFirst):XA(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(oi((function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=$A(t);return ZA(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return YA(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ke.a)((function(e){return e.payload.docs.map((function(e){return t.idField?Object.assign(_defineProperty({},t.idField,e.id),e.data()):e.data()}))})),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object($e.a)(this.query.get(t)).pipe(Object(an.b)(this.afs.schedulers.insideAngular))}}]),t}(),rD=new r.q("angularfire2.enableFirestorePersistence"),iD=new r.q("angularfire2.firestore.persistenceSettings"),oD=new r.q("angularfire2.firestore.settings"),aD=new r.q("angularfire2.firestore.use-emulator");function sD(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{query:e(t),ref:t}}var uD,cD,lD,hD=((cD=function(){function t(e,n,r,i,o,a,s,u,c){_classCallCheck(this,t),this.schedulers=new gy.d(a),this.keepUnstableUntilFirst=Object(gy.h)(this.schedulers);var l=Object(gy.g)(e,a,n);!Oy.a.auth&&c&&Object(gy.j)();var h=u,f=_slicedToArray(Object(gy.f)(l.name+".firestore","AngularFirestore",l,(function(){var t=a.runOutsideAngular((function(){return l.firestore()}));return i&&t.settings(i),h&&t.useEmulator.apply(t,_toConsumableArray(h)),r&&!Ot(o)?[t,a.runOutsideAngular((function(){try{return Object($e.a)(t.enablePersistence(s||void 0).then((function(){return!0}),(function(){return!1})))}catch(zA){return"undefined"!=typeof console&&console.warn(zA),Object(ge.a)(!1)}}))]:[t,Object(ge.a)(!1)]}),[i,h,r]),2);this.firestore=f[0],this.persistenceEnabled$=f[1]}return _createClass(t,[{key:"collection",value:function(t,e){var n=sD("string"==typeof t?this.firestore.collection(t):t,e),r=n.ref,i=n.query,o=this.schedulers.ngZone.run((function(){return r}));return new tD(o,i,this)}},{key:"collectionGroup",value:function(t,e){var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new nD(n(r),this)}},{key:"doc",value:function(t){var e;e="string"==typeof t?this.firestore.doc(t):t;var n=this.schedulers.ngZone.run((function(){return e}));return new eD(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),t}()).\u0275fac=function(t){return new(t||cD)(r.Xb(gy.c),r.Xb(gy.b,8),r.Xb(rD,8),r.Xb(oD,8),r.Xb(r.B),r.Xb(r.z),r.Xb(iD,8),r.Xb(aD,8),r.Xb(_y,8))},cD.\u0275prov=Object(r.Kb)({factory:function(){return new cD(Object(r.Xb)(gy.c),Object(r.Xb)(gy.b,8),Object(r.Xb)(rD,8),Object(r.Xb)(oD,8),Object(r.Xb)(r.B),Object(r.Xb)(r.z),Object(r.Xb)(iD,8),Object(r.Xb)(aD,8),Object(r.Xb)(_y,8))},token:cD,providedIn:"any"}),cD),fD=((uD=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"enablePersistence",value:function(e){return{ngModule:t,providers:[{provide:rD,useValue:!0},{provide:iD,useValue:e}]}}}]),t}()).\u0275mod=r.Mb({type:uD}),uD.\u0275inj=r.Lb({factory:function(t){return new(t||uD)},providers:[hD]}),uD),dD=Oy.a.firestore.Timestamp,pD=((lD=function(){function t(e){_classCallCheck(this,t),this.fireService=e,this.collectionName="tasks"}return _createClass(t,[{key:"createTask",value:function(t){return this.fireService.collection(this.collectionName).add(Object.assign({},t))}},{key:"getTask",value:function(t){var e=this;return this.fireService.collection(this.collectionName).doc(t).snapshotChanges().pipe(Object(ke.a)((function(t){return e.processFirestoreObject(t)})))}},{key:"getTasks",value:function(){var t=this;return this.fireService.collection(this.collectionName).snapshotChanges().pipe(Object(ke.a)((function(e){return e.map((function(e){return t.processFirestoreObject(e)}))})))}},{key:"updateTask",value:function(t,e){return this.fireService.collection(this.collectionName).doc(t).update(e)}},{key:"removeTask",value:function(t){return this.fireService.collection(this.collectionName).doc(t).delete()}},{key:"processFirestoreObject",value:function(t){var e=t.payload.doc.data();return Object.keys(e).filter((function(t){return e[t]instanceof dD})).forEach((function(t){return e[t]=e[t].toDate()})),e.identifier=t.payload.doc.id,e}}]),t}()).\u0275fac=function(t){return new(t||lD)(r.Xb(hD))},lD.\u0275prov=r.Kb({token:lD,factory:lD.\u0275fac,providedIn:"root"}),lD);function vD(t,e){if(1&t){var n=r.Ub();r.Rb(0),r.Pb(1,"div",5),r.Tb(2,"div",6),r.Tb(3,"div",7),r.Tb(4,"a",8),r.xc(5,"Setting"),r.Sb(),r.Tb(6,"a",9),r.bc("click",(function(){return r.pc(n),r.ec().logOut()})),r.xc(7,"Logout"),r.Sb(),r.Sb(),r.Tb(8,"div",10),r.Tb(9,"span",11),r.xc(10,"copyright"),r.Sb(),r.Tb(11,"p",12),r.xc(12,"2021 Anand Galla. All rights reserved."),r.Sb(),r.Sb(),r.Sb(),r.Qb()}}function yD(t,e){1&t&&(r.Rb(0),r.Tb(1,"div",13),r.Tb(2,"div",14),r.Tb(3,"a",15),r.xc(4,"Log In"),r.Sb(),r.Tb(5,"a",16),r.xc(6,"Sign Up"),r.Sb(),r.Sb(),r.Sb(),r.Qb())}var mD,gD,_D=((gD=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.localStorageService=e,this.firebaseService=n,this.localStorageService.get("user").subscribe((function(t){r.isUserLoggedIn=!!t}))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.localStorageService.changes$.subscribe((function(e){"user"==(null==e?void 0:e.key)&&e.value&&(t.isUserLoggedIn=!0)}))}},{key:"logOut",value:function(){this.firebaseService.logOut()}}]),t}()).\u0275fac=function(t){return new(t||gD)(r.Ob(ly),r.Ob(Ty))},gD.\u0275cmp=r.Ib({type:gD,selectors:[["app-nav-bar"]],decls:7,vars:2,consts:[[1,"nav-container"],[1,"top-section"],["routerLink","../",1,"cursor-pointer","decorations-none"],[1,"logo"],[4,"ngIf"],[1,"middle-section"],[1,"bottom-section","d-flex","flex-column"],[1,"mb-20","d-flex","flex-column"],[1,"cursor-pointer"],[1,"cursor-pointer",3,"click"],[1,"d-flex","align-items-center"],[1,"material-icons","font-size-16","mr-5"],[1,"font-size-12",2,"margin-bottom","0"],[1,"action-section"],[1,"d-flex","flex-column"],["routerLink","/login",1,"cursor-pointer"],["routerLink","/signup",1,"cursor-pointer"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"a",2),r.Tb(3,"h1",3),r.xc(4,"GalliList"),r.Sb(),r.Sb(),r.Sb(),r.wc(5,vD,13,0,"ng-container",4),r.wc(6,yD,7,0,"ng-container",4),r.Sb()),2&t&&(r.Cb(5),r.jc("ngIf",e.isUserLoggedIn),r.Cb(1),r.jc("ngIf",!e.isUserLoggedIn))},directives:[Pa,vt],styles:[".nav-container[_ngcontent-%COMP%]{width:100%;flex-shrink:0;box-shadow:0 1px 2px rgba(0,0,0,.08),0 2px 8px rgba(0,0,0,.05);background:#fff;width:350px!important;border-right:1px solid #ddd;height:100%}.middle-section[_ngcontent-%COMP%], .top-section[_ngcontent-%COMP%]{padding:40px;border-bottom:1px solid #ddd}.top-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#4bc18b;margin-bottom:0;font-size:40px;font-weight:500}.action-section[_ngcontent-%COMP%], .bottom-section[_ngcontent-%COMP%]{padding:40px}.action-section[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .bottom-section[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:8px 0;text-decoration:none;color:inherit;font-size:14px;color:#999;font-weight:700}.decorations-none[_ngcontent-%COMP%]{text-decoration:none}"]}),gD),bD=((mD=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:mD}),mD.\u0275inj=r.Lb({factory:function(t){return new(t||mD)},imports:[[Tt,Xa]]}),mD),wD=function(t){return t[t.Todo=0]="Todo",t[t.Complete=1]="Complete",t[t.InComplete=2]="InComplete",t}({}),kD=function t(e){_classCallCheck(this,t),Object.assign(this,e),this.status=this.status?this.status:wD.Todo};function CD(t,e){1&t&&(r.Tb(0,"h2",4),r.xc(1,"CREATE NEW TASK"),r.Sb())}function SD(t,e){1&t&&(r.Tb(0,"h2",4),r.xc(1,"EDIT TASK"),r.Sb())}function ED(t,e){if(1&t){var n=r.Ub();r.Tb(0,"button",20),r.bc("click",(function(){return r.pc(n),r.ec(2).createTask()})),r.xc(1,"CREATE TASK"),r.Sb()}}function TD(t,e){if(1&t){var n=r.Ub();r.Tb(0,"button",20),r.bc("click",(function(){return r.pc(n),r.ec(2).updateTask()})),r.xc(1,"SAVE CHANGES"),r.Sb()}}function OD(t,e){if(1&t&&(r.Tb(0,"mat-card",5),r.Tb(1,"div",6),r.Tb(2,"div",7),r.Tb(3,"div",8),r.Tb(4,"mat-label",9),r.xc(5,"Title"),r.Sb(),r.Tb(6,"mat-form-field",10),r.Pb(7,"input",11),r.Sb(),r.Sb(),r.Tb(8,"div",8),r.Tb(9,"mat-label",9),r.xc(10,"Date"),r.Sb(),r.Tb(11,"mat-form-field",10),r.Pb(12,"input",12),r.Pb(13,"mat-datepicker-toggle",13),r.Pb(14,"mat-datepicker",null,14),r.Sb(),r.Sb(),r.Sb(),r.Tb(16,"div",15),r.Tb(17,"div",16),r.Tb(18,"mat-label",9),r.xc(19,"Description"),r.Sb(),r.Tb(20,"mat-form-field",10),r.Pb(21,"input",17),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(22,"div",18),r.wc(23,ED,2,0,"button",19),r.wc(24,TD,2,0,"button",19),r.Sb(),r.Sb()),2&t){var n=r.oc(15),i=r.ec();r.Cb(1),r.jc("formGroup",i.taskForm),r.Cb(11),r.jc("matDatepicker",n),r.Cb(1),r.jc("for",n),r.Cb(10),r.jc("ngIf",!i.task),r.Cb(1),r.jc("ngIf",i.task)}}var xD,ID=function(t){return{"main-container p-40":t}},AD=((xD=function(){function t(e,n,r,i){var o=this;_classCallCheck(this,t),this.taskService=e,this.notificationService=n,this.snackBarService=r,this.activatedRoute=i,this.activatedRoute.params.subscribe((function(t){t.id?o.getTask(t.id):o.buildTaskForm()}))}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"buildTaskForm",value:function(t){this.taskForm=new $d({title:new Jd((null==t?void 0:t.title)||"",ad.required),date:new Jd((null==t?void 0:t.date)||"",ad.required),description:new Jd((null==t?void 0:t.description)||"")})}},{key:"getTask",value:function(t){var e=this;this.taskService.getTask(t).subscribe((function(t){console.log(t),e.task=t,e.buildTaskForm(t)}))}},{key:"createTask",value:function(){var t=this;if(this.taskForm.valid){var e=new kD(this.taskForm.value);this.taskService.createTask(e).then((function(e){t.buildTaskForm(),t.snackBarService.show("Task created","Create",2e3)})).catch((function(t){console.log(t)}))}else this.taskForm.markAllAsTouched()}},{key:"updateTask",value:function(){var t=this;if(this.taskForm.valid){var e=this.taskForm.value;this.task.title=e.title,this.task.description=e.description,this.task.date=e.date,this.taskService.updateTask(this.task.identifier,this.task).then((function(e){console.log(e),t.snackBarService.show("Task updated","Update",2e3)})).catch((function(t){return console.log(t)}))}}}]),t}()).\u0275fac=function(t){return new(t||xD)(r.Ob(pD),r.Ob(hy),r.Ob(fy),r.Ob(ko))},xD.\u0275cmp=r.Ib({type:xD,selectors:[["app-create-task"]],decls:5,vars:8,consts:[[3,"ngClass"],[1,"create-task-container"],["class","title",4,"ngIf"],["class","p-40",4,"ngIf"],[1,"title"],[1,"p-40"],[3,"formGroup"],[1,"row","d-flex","align-items-center"],[1,"col-md-6"],[1,"label"],["appearance","outline",1,"w-100"],["matInput","","placeholder","e.g. Take the bins out","formControlName","title","autocomplete","off"],["matInput","","formControlName","date","placeholder","Select date","autocomplete","off",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"row","d-flex"],[1,"col-md-12"],["matInput","","placeholder","e.g. Give food before going out","formControlName","description","autocomplete","off"],[1,"form-row"],["type","button","class","btn",3,"click",4,"ngIf"],["type","button",1,"btn",3,"click"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.wc(2,CD,2,0,"h2",2),r.wc(3,SD,2,0,"h2",2),r.wc(4,OD,25,5,"mat-card",3),r.Sb(),r.Sb()),2&t&&(r.jc("ngClass",r.lc(6,ID,e.task)),r.Cb(1),r.Fb("mv-40",e.task),r.Cb(1),r.jc("ngIf",!e.task),r.Cb(1),r.jc("ngIf",e.task),r.Cb(1),r.jc("ngIf",e.taskForm))},directives:[ht,vt,Mh,ed,up,wf,If,Dp,Gf,td,kp,Gv,Kv,Sf,qv],styles:[".title[_ngcontent-%COMP%]{color:#999;font-size:24px;text-transform:uppercase;letter-spacing:.05em}.label[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#555;margin-bottom:10px}.btn[_ngcontent-%COMP%]{background-color:#4bc18b;font-size:15px;font-weight:700;line-height:normal;color:#fff;padding:13px 26px}"]}),xD);function DD(t,e){if(1&t&&(r.Tb(0,"span",16),r.xc(1),r.Sb()),2&t){var n=r.ec().$implicit;r.Cb(1),r.zc("Description: ",n.description,"")}}function PD(t,e){if(1&t){var n=r.Ub();r.Tb(0,"mat-card"),r.Tb(1,"div",4),r.Tb(2,"div",5),r.Tb(3,"span",6),r.bc("click",(function(){r.pc(n);var t=e.$implicit,i=r.ec(2);return i.updateTaskStatus(t,i.taskStatus.Complete)})),r.xc(4,"check"),r.Sb(),r.Tb(5,"span",7),r.bc("click",(function(){r.pc(n);var t=e.$implicit,i=r.ec(2);return i.updateTaskStatus(t,i.taskStatus.InComplete)})),r.xc(6,"clear"),r.Sb(),r.Tb(7,"a",8),r.Tb(8,"span",9),r.xc(9,"edit"),r.Sb(),r.Sb(),r.Tb(10,"span",10),r.bc("click",(function(){r.pc(n);var t=e.$implicit;return r.ec(2).removeTask(t)})),r.xc(11,"delete_outline"),r.Sb(),r.Sb(),r.Tb(12,"div",11),r.Tb(13,"p",12),r.xc(14),r.Sb(),r.wc(15,DD,2,1,"span",13),r.Sb(),r.Tb(16,"div",14),r.Tb(17,"p",15),r.xc(18),r.fc(19,"date"),r.Sb(),r.Sb(),r.Sb(),r.Sb()}if(2&t){var i=e.$implicit;r.Cb(7),r.kc("routerLink","/edit/task/",i.identifier,""),r.Cb(6),r.Fb("mb-5",null==i.description?null:i.description.length),r.Cb(1),r.yc(i.title),r.Cb(1),r.jc("ngIf",null==i.description?null:i.description.length),r.Cb(3),r.yc(r.gc(19,6,i.date,"EEEE, MMMM d"))}}function RD(t,e){if(1&t&&(r.Tb(0,"div",2),r.Tb(1,"h2"),r.xc(2,"TO DO"),r.Sb(),r.Tb(3,"div"),r.wc(4,PD,20,9,"mat-card",3),r.Sb(),r.Sb()),2&t){var n=r.ec();r.Cb(4),r.jc("ngForOf",n.toDoTasks)}}function ND(t,e){if(1&t&&(r.Tb(0,"span",16),r.xc(1),r.Sb()),2&t){var n=r.ec().$implicit;r.Cb(1),r.zc("Description: ",n.description,"")}}function jD(t,e){if(1&t){var n=r.Ub();r.Tb(0,"mat-card",19),r.Tb(1,"div",4),r.Tb(2,"div",5),r.Tb(3,"span",20),r.bc("click",(function(){r.pc(n);var t=e.$implicit,i=r.ec(2);return i.updateTaskStatus(t,i.taskStatus.Complete)})),r.xc(4,"check"),r.Sb(),r.Tb(5,"span",7),r.bc("click",(function(){r.pc(n);var t=e.$implicit,i=r.ec(2);return i.updateTaskStatus(t,i.taskStatus.InComplete)})),r.xc(6,"clear"),r.Sb(),r.Tb(7,"a",8),r.Tb(8,"span",9),r.xc(9,"edit"),r.Sb(),r.Sb(),r.Tb(10,"span",10),r.bc("click",(function(){r.pc(n);var t=e.$implicit;return r.ec(2).removeTask(t)})),r.xc(11,"delete_outline"),r.Sb(),r.Sb(),r.Tb(12,"div",11),r.Tb(13,"p",12),r.xc(14),r.Sb(),r.wc(15,ND,2,1,"span",13),r.Sb(),r.Tb(16,"div",14),r.Tb(17,"p",15),r.xc(18),r.fc(19,"date"),r.Sb(),r.Sb(),r.Sb(),r.Sb()}if(2&t){var i=e.$implicit;r.Cb(7),r.kc("routerLink","/edit/task/",i.identifier,""),r.Cb(6),r.Fb("mb-5",null==i.description?null:i.description.length),r.Cb(1),r.yc(i.title),r.Cb(1),r.jc("ngIf",null==i.description?null:i.description.length),r.Cb(3),r.yc(r.gc(19,6,i.date,"EEEE, MMMM d"))}}function FD(t,e){if(1&t&&(r.Tb(0,"div",2),r.Tb(1,"h2"),r.xc(2,"COMPLETE"),r.Sb(),r.Tb(3,"div",17),r.wc(4,jD,20,9,"mat-card",18),r.Sb(),r.Sb()),2&t){var n=r.ec();r.Cb(4),r.jc("ngForOf",n.completedTasks)}}function MD(t,e){if(1&t&&(r.Tb(0,"span",16),r.xc(1),r.Sb()),2&t){var n=r.ec().$implicit;r.Cb(1),r.zc("Description: ",n.description,"")}}function LD(t,e){if(1&t){var n=r.Ub();r.Tb(0,"mat-card"),r.Tb(1,"div",4),r.Tb(2,"div",22),r.Tb(3,"span",6),r.bc("click",(function(){r.pc(n);var t=e.$implicit,i=r.ec(2);return i.updateTaskStatus(t,i.taskStatus.Complete)})),r.xc(4,"check"),r.Sb(),r.Tb(5,"span",23),r.bc("click",(function(){r.pc(n);var t=e.$implicit,i=r.ec(2);return i.updateTaskStatus(t,i.taskStatus.InComplete)})),r.xc(6,"clear"),r.Sb(),r.Tb(7,"a",8),r.Tb(8,"span",9),r.xc(9,"edit"),r.Sb(),r.Sb(),r.Tb(10,"span",10),r.bc("click",(function(){r.pc(n);var t=e.$implicit;return r.ec(2).removeTask(t)})),r.xc(11,"delete_outline"),r.Sb(),r.Sb(),r.Tb(12,"div",11),r.Tb(13,"p",24),r.xc(14),r.Sb(),r.wc(15,MD,2,1,"span",13),r.Sb(),r.Tb(16,"div",14),r.Tb(17,"p",15),r.xc(18),r.fc(19,"date"),r.Sb(),r.Sb(),r.Sb(),r.Sb()}if(2&t){var i=e.$implicit;r.Cb(7),r.kc("routerLink","/edit/task/",i.identifier,""),r.Cb(6),r.Fb("mb-5",null==i.description?null:i.description.length),r.jc("title",i.title),r.Cb(1),r.yc(i.title),r.Cb(1),r.jc("ngIf",null==i.description?null:i.description.length),r.Cb(3),r.yc(r.gc(19,7,i.date,"EEEE, MMMM d"))}}function VD(t,e){if(1&t&&(r.Tb(0,"div",2),r.Tb(1,"h2"),r.xc(2,"INCOMPLETE"),r.Sb(),r.Tb(3,"div",21),r.wc(4,LD,20,10,"mat-card",3),r.Sb(),r.Sb()),2&t){var n=r.ec();r.Cb(4),r.jc("ngForOf",n.inCompleteTasks)}}var UD,qD,BD=((qD=function(){function t(e,n,r){_classCallCheck(this,t),this.taskService=e,this.notificationService=n,this.snackBarService=r,this.taskStatus=wD}return _createClass(t,[{key:"ngOnInit",value:function(){this.getTasks()}},{key:"getTasks",value:function(){var t=this;this.taskService.getTasks().subscribe((function(e){t.tasks=null==e?void 0:e.map((function(t){return new kD(t)})),t.filterTasks(e),console.log(t.tasks)}))}},{key:"filterTasks",value:function(t){this.toDoTasks=t.filter((function(t){return t.status===wD.Todo})),this.completedTasks=t.filter((function(t){return t.status===wD.Complete})),this.inCompleteTasks=t.filter((function(t){return t.status===wD.InComplete}))}},{key:"updateTaskStatus",value:function(t,e){var n=this;t.status!==e&&(t.status=e,this.taskService.updateTask(t.identifier,t).then((function(t){return n.snackBarService.show("Status updated","Update",2e3)})).catch((function(t){return console.log(t)})))}},{key:"removeTask",value:function(t){var e=this;confirm("Are you sure you want to delete the task?")&&this.taskService.removeTask(t.identifier).then((function(){return e.snackBarService.show("Task removed","Delete",2e3)})).catch((function(t){return console.log(t)}))}},{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||qD)(r.Ob(pD),r.Ob(hy),r.Ob(fy))},qD.\u0275cmp=r.Ib({type:qD,selectors:[["app-task-list"]],decls:4,vars:3,consts:[[1,"",2,"margin","20px 0"],["class","section",4,"ngIf"],[1,"section"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"actions","d-flex"],["id","check",1,"material-icons",3,"click"],["id","clear",1,"material-icons",3,"click"],[1,"cursor-pointer","edit-icon",3,"routerLink"],["id","edit",1,"material-icons"],["id","delete",1,"material-icons",3,"click"],[1,"content"],[1,"text-truncate-2"],["style","color: lightgray;",4,"ngIf"],[1,"date-section"],[2,"margin-bottom","0"],[2,"color","lightgray"],[1,"complete"],["class","border-green",4,"ngFor","ngForOf"],[1,"border-green"],["id","check",1,"material-icons","border-green","color-green",3,"click"],[1,"incomplete"],[1,"actions","d-flex","incomplete"],["id","clear",1,"material-icons","border-red","color-red",3,"click"],[1,"text-truncate-2",3,"title"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.wc(1,RD,5,1,"div",1),r.wc(2,FD,5,1,"div",1),r.wc(3,VD,5,1,"div",1),r.Sb()),2&t&&(r.Cb(1),r.jc("ngIf",null==e.toDoTasks?null:e.toDoTasks.length),r.Cb(1),r.jc("ngIf",e.completedTasks&&e.completedTasks.length),r.Cb(1),r.jc("ngIf",null==e.inCompleteTasks?null:e.inCompleteTasks.length))},directives:[vt,dt,Mh,Pa],pipes:[Et],styles:["h2[_ngcontent-%COMP%]{color:#999;font-size:20px;text-transform:uppercase;letter-spacing:.05em}.section[_ngcontent-%COMP%]{margin:40px 0}.mat-card[_ngcontent-%COMP%]{margin:10px 0;box-shadow:none;border:1px solid #d3d3d3}.material-icons[_ngcontent-%COMP%]{margin:0 5px;border:1px solid #d3d3d3;border-radius:50%;padding:5px;font-size:15px;cursor:pointer}.material-icons#clear[_ngcontent-%COMP%]:hover, .material-icons#delete[_ngcontent-%COMP%]:hover{color:red;border-color:red;border-width:2px;font-weight:700}.material-icons#check[_ngcontent-%COMP%]:hover{color:green;border-color:green;border-width:2px;font-weight:700}.material-icons#edit[_ngcontent-%COMP%]:hover{color:#000;border-color:#000;border-width:2px;font-weight:700}.complete[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{border-color:green}.complete[_ngcontent-%COMP%]   .material-icons#check[_ngcontent-%COMP%]{color:green;border-color:green;border-width:2px;font-weight:700}.incomplete[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{border-color:red}.incomplete[_ngcontent-%COMP%]   .material-icons#clear[_ngcontent-%COMP%]{color:red;border-color:red;border-width:2px;font-weight:700}.actions[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]{margin-right:20px}p[_ngcontent-%COMP%]{margin-bottom:0;line-height:20px}.mat-card[_ngcontent-%COMP%]{padding:12px!important;border-radius:5px}.date-section[_ngcontent-%COMP%]{flex-shrink:0;margin-left:auto}.edit-icon[_ngcontent-%COMP%]{color:#000}"]}),qD),zD=((UD=function(){function t(e){_classCallCheck(this,t),this.localStorageService=e,this.localStorageChanges$=this.localStorageService.changes$,this.tasks=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.getTasks(),this.localStorageChanges$.subscribe((function(e){"tasks"==(null==e?void 0:e.key)&&(t.tasks=(null==e?void 0:e.value)||[])}))}},{key:"getTasks",value:function(){var t=this;this.localStorageService.get("tasks").subscribe((function(e){t.tasks=(null==e?void 0:e.map((function(t){return new kD(t)})))||[]}))}}]),t}()).\u0275fac=function(t){return new(t||UD)(r.Ob(ly))},UD.\u0275cmp=r.Ib({type:UD,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"main-container","p-40"],[1,"mv-40"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Pb(2,"app-create-task"),r.Sb(),r.Pb(3,"app-task-list"),r.Sb())},directives:[AD,BD],styles:[""]}),UD);function HD(t,e){if(1&t){var n=r.Ub();r.Tb(0,"mat-card",4),r.Tb(1,"div",5),r.Tb(2,"div",6),r.Tb(3,"div",7),r.Tb(4,"mat-label",8),r.xc(5,"Email"),r.Sb(),r.Tb(6,"mat-form-field",9),r.Pb(7,"input",10),r.Sb(),r.Sb(),r.Tb(8,"div",7),r.Tb(9,"mat-label",8),r.xc(10,"Password"),r.Sb(),r.Tb(11,"mat-form-field",9),r.Pb(12,"input",11),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(13,"div",12),r.Tb(14,"button",13),r.bc("click",(function(){return r.pc(n),r.ec().signUp()})),r.xc(15,"SING UP"),r.Sb(),r.Sb(),r.Sb()}if(2&t){var i=r.ec();r.Cb(1),r.jc("formGroup",i.singUpForm)}}var GD,WD=((GD=function(){function t(e){_classCallCheck(this,t),this.firebaseService=e}return _createClass(t,[{key:"ngOnInit",value:function(){this.buildLogInForm()}},{key:"buildLogInForm",value:function(){this.singUpForm=new $d({email:new Jd(""),password:new Jd("")})}},{key:"signUp",value:function(){return dy(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.firebaseService.signUp(this.singUpForm.value.email,this.singUpForm.value.password);case 2:this.firebaseService.isLoggedIn&&alert("User created Successfull");case 3:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(t){return new(t||GD)(r.Ob(Ty))},GD.\u0275cmp=r.Ib({type:GD,selectors:[["app-singup"]],decls:5,vars:1,consts:[[1,"main-container","p-40"],[1,"create-task-container"],[1,"title"],["class","p-40",4,"ngIf"],[1,"p-40"],[3,"formGroup"],[1,"row","d-flex","align-items-center"],[1,"col-md-6"],[1,"label"],["appearance","outline",1,"w-100"],["matInput","","placeholder","xyz@gmail.com","formControlName","email","autocomplete","off"],["matInput","","formControlName","password","placeholder","Password","autocomplete","off"],[1,"form-row"],["type","button",1,"btn",3,"click"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"h2",2),r.xc(3,"SING UP"),r.Sb(),r.wc(4,HD,16,1,"mat-card",3),r.Sb(),r.Sb()),2&t&&(r.Cb(4),r.jc("ngIf",e.singUpForm))},directives:[vt,Mh,ed,up,wf,If,Dp,Gf,td,kp],styles:[""]}),GD);function KD(t,e){if(1&t){var n=r.Ub();r.Tb(0,"mat-card",4),r.Tb(1,"div",5),r.Tb(2,"div",6),r.Tb(3,"div",7),r.Tb(4,"mat-label",8),r.xc(5,"Email"),r.Sb(),r.Tb(6,"mat-form-field",9),r.Pb(7,"input",10),r.Sb(),r.Sb(),r.Tb(8,"div",7),r.Tb(9,"mat-label",8),r.xc(10,"Password"),r.Sb(),r.Tb(11,"mat-form-field",9),r.Pb(12,"input",11),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(13,"div",12),r.Tb(14,"button",13),r.bc("click",(function(){return r.pc(n),r.ec().logIn()})),r.xc(15,"Log In"),r.Sb(),r.Sb(),r.Sb()}if(2&t){var i=r.ec();r.Cb(1),r.jc("formGroup",i.logInForm)}}var QD,YD,XD,ZD=[{path:"",component:zD},{path:"edit/task/:id",component:AD},{path:"login",component:(QD=function(){function t(e,n){_classCallCheck(this,t),this.firebaseService=e,this.router=n}return _createClass(t,[{key:"ngOnInit",value:function(){this.buildLogInForm()}},{key:"buildLogInForm",value:function(){this.logInForm=new $d({email:new Jd(""),password:new Jd("")})}},{key:"logIn",value:function(){return dy(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.firebaseService.signIn(this.logInForm.value.email,this.logInForm.value.password);case 2:this.firebaseService.isLoggedIn&&this.router.navigate(["../"]);case 3:case"end":return t.stop()}}),t,this)})))}}]),t}(),QD.\u0275fac=function(t){return new(t||QD)(r.Ob(Ty),r.Ob(Da))},QD.\u0275cmp=r.Ib({type:QD,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"main-container","p-40"],[1,"create-task-container"],[1,"title"],["class","p-40",4,"ngIf"],[1,"p-40"],[3,"formGroup"],[1,"row","d-flex","align-items-center"],[1,"col-md-6"],[1,"label"],["appearance","outline",1,"w-100"],["matInput","","placeholder","xyz@gmail.com","formControlName","email","autocomplete","off"],["matInput","","formControlName","password","placeholder","Password","autocomplete","off"],[1,"form-row"],["type","button",1,"btn",3,"click"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"h2",2),r.xc(3,"SING IN"),r.Sb(),r.wc(4,KD,16,1,"mat-card",3),r.Sb(),r.Sb()),2&t&&(r.Cb(4),r.jc("ngIf",e.logInForm))},directives:[vt,Mh,ed,up,wf,If,Dp,Gf,td,kp],styles:[""]}),QD)},{path:"signup",component:WD},{path:"**",redirectTo:""}],JD=((XD=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:XD}),XD.\u0275inj=r.Lb({factory:function(t){return new(t||XD)},imports:[[Xa.forRoot(ZD,{useHash:!0})],Xa]}),XD),$D=((YD=function t(){_classCallCheck(this,t),this.title="galli-list"}).\u0275fac=function(t){return new(t||YD)},YD.\u0275cmp=r.Ib({type:YD,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"body-container"],[1,"w-100"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Pb(1,"app-nav-bar"),r.Tb(2,"div",1),r.Pb(3,"router-outlet"),r.Sb(),r.Sb())},directives:[_D,Va],styles:[""]}),YD),tP=function(){function t(e,n){_classCallCheck(this,t),this.observables=e,this.project=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new eP(t,this.observables,this.project))}}]),t}(),eP=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i){var o;_classCallCheck(this,n),(o=e.call(this,t)).observables=r,o.project=i,o.toRespond=[];var a=r.length;o.values=new Array(a);for(var s=0;s<a;s++)o.toRespond.push(s);for(var u=0;u<a;u++){var c=r[u];o.add(Object(Pe.a)(_assertThisInitialized(o),c,c,u))}return o}return _createClass(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(_toConsumableArray(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(De.a),nP=function(){function t(e){_classCallCheck(this,t),this.predicate=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new rP(t,this.predicate))}}]),t}(),rP=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r){var i;return _classCallCheck(this,n),(i=e.call(this,t)).predicate=r,i.skipping=!0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(Te.a);function iP(t){return null==t}function oP(t){return"function"==typeof t.set}function aP(t,e){return oP(e)?e:t.ref(e)}function sP(t,e){if("string"==typeof t)return e.stringCase();if(oP(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function uP(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ae.a;return new _e.a((function(i){var o;return o=t[n](e,(function(t,e){r.schedule((function(){i.next({snapshot:t,prevKey:e})})),"once"===n&&r.schedule((function(){return i.complete()}))}),(function(t){r.schedule((function(){return i.error(t)}))})),"on"===n?{unsubscribe:function(){null!=o&&t.off(e,o)}}:{unsubscribe:function(){}}})).pipe(Object(ke.a)((function(t){var n=t.snapshot,r=t.prevKey,i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}})),Object(Xv.a)())}function cP(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function lP(t,e){var n=e.payload,r=e.prevKey,i=e.key,o=cP(t,i),a=function(t,e){if(iP(e))return 0;var n=cP(t,e);return-1===n?t.length:n+1}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){var s=null;e.payload.forEach((function(e){var n={payload:e,type:"value",prevKey:s,key:e.key};return s=e.key,t=[].concat(_toConsumableArray(t),[n]),!1}))}return t;case"child_added":if(o>-1){var u=t[o-1];(u&&u.key||null)!==r&&(t=t.filter((function(t){return t.payload.key!==n.key}))).splice(a,0,e)}else{if(null==r)return[e].concat(_toConsumableArray(t));(t=t.slice()).splice(a,0,e)}return t;case"child_removed":return t.filter((function(t){return t.payload.key!==n.key}));case"child_changed":return t.map((function(t){return t.payload.key===i?e:t}));case"child_moved":if(o>-1){var c=t.splice(o,1)[0];return(t=t.slice()).splice(a,0,c),t}return t;default:return t}}function hP(t){return(iP(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function fP(t,e,n){return function(t,e,n){return uP(t,"value","once",n).pipe(tn((function(r){var i=[Object(ge.a)(r)];return e.forEach((function(e){return i.push(uP(t,e,"on",n))})),Object(Se.a).apply(void 0,i).pipe(oi(lP,[]))})),Oe())}(t,e=hP(e),n)}function dP(t,e,n){var r=(e=hP(e)).map((function(e){return uP(t,e,"on",n)}));return Object(Se.a).apply(void 0,_toConsumableArray(r))}function pP(t,e){return function(n,r){return sP(n,{stringCase:function(){return t.child(n)[e](r)},firebaseCase:function(){return n[e](r)},snapshotCase:function(){return n.ref[e](r)}})}}function vP(t,e){return function(){return uP(t,"value","on",e)}}n("6Uf2");var yP,mP,gP,_P=new r.q("angularfire2.realtimeDatabaseURL"),bP=new r.q("angularfire2.database.use-emulator"),wP=((gP=function(){function t(e,n,r,i,o,a,s){_classCallCheck(this,t),this.schedulers=new gy.d(o),this.keepUnstableUntilFirst=Object(gy.h)(this.schedulers);var u=a,c=Object(gy.g)(e,o,n);!Oy.a.auth&&s&&Object(gy.j)(),this.database=Object(gy.f)("".concat(c.name,".database.").concat(r),"AngularFireDatabase",c,(function(){var t=o.runOutsideAngular((function(){return c.database(r||void 0)}));return u&&t.useEmulator.apply(t,_toConsumableArray(u)),t}),[u])}return _createClass(t,[{key:"list",value:function(t,e){var n=this,r=this.schedulers.ngZone.runOutsideAngular((function(){return aP(n.database,t)})),i=r;return e&&(i=e(r)),function(t,e){var n,r=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run((function(){return t.ref}));return{query:t,update:pP(i,"update"),set:pP(i,"set"),push:function(t){return i.push(t)},remove:(n=i,function(t){return t?sP(t,{stringCase:function(){return n.child(t).remove()},firebaseCase:function(){return t.remove()},snapshotCase:function(){return t.ref.remove()}}):n.remove()}),snapshotChanges:function(n){return fP(t,n,r).pipe(e.keepUnstableUntilFirst)},stateChanges:function(n){return dP(t,n,r).pipe(e.keepUnstableUntilFirst)},auditTrail:function(n){return function(t,e,n){return function(t,e,n){return function(t,e){return uP(t,"value","on",e).pipe(Object(ke.a)((function(t){var e;return t.payload.forEach((function(t){return e=t.key,!1})),{data:t,lastKeyToLoad:e}})))}(t,n).pipe(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new tP(e,n))}}(e),Object(ke.a)((function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1],i=n.lastKeyToLoad,o=r.map((function(t){return t.key}));return{actions:r,lastKeyToLoad:i,loadedKeys:o}})),(r=function(t){return-1===t.loadedKeys.indexOf(t.lastKeyToLoad)},function(t){return t.lift(new nP(r))}),Object(ke.a)((function(t){return t.actions})));var r}(t,dP(t,e).pipe(oi((function(t,e){return[].concat(_toConsumableArray(t),[e])}),[])),n)}(t,n,r).pipe(e.keepUnstableUntilFirst)},valueChanges:function(n,i){return fP(t,n,r).pipe(Object(ke.a)((function(t){return t.map((function(t){return i&&i.idField?Object.assign(Object.assign({},t.payload.val()),_defineProperty({},i.idField,t.key)):t.payload.val()}))})),e.keepUnstableUntilFirst)}}}(i,this)}},{key:"object",value:function(t){var e,n,r=this,i=this.schedulers.ngZone.runOutsideAngular((function(){return aP(r.database,t)}));return n=this,{query:e=i,snapshotChanges:function(){return vP(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst)},update:function(t){return e.ref.update(t)},set:function(t){return e.ref.set(t)},remove:function(){return e.ref.remove()},valueChanges:function(){return vP(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,Object(ke.a)((function(t){return t.payload.exists()?t.payload.val():null})))}}}},{key:"createPushId",value:function(){var t=this;return this.schedulers.ngZone.runOutsideAngular((function(){return t.database.ref()})).push().key}}]),t}()).\u0275fac=function(t){return new(t||gP)(r.Xb(gy.c),r.Xb(gy.b,8),r.Xb(_P,8),r.Xb(r.B),r.Xb(r.z),r.Xb(bP,8),r.Xb(_y,8))},gP.\u0275prov=Object(r.Kb)({factory:function(){return new gP(Object(r.Xb)(gy.c),Object(r.Xb)(gy.b,8),Object(r.Xb)(_P,8),Object(r.Xb)(r.B),Object(r.Xb)(r.z),Object(r.Xb)(bP,8),Object(r.Xb)(_y,8))},token:gP,providedIn:"any"}),gP),kP=((mP=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:mP}),mP.\u0275inj=r.Lb({factory:function(t){return new(t||mP)},providers:[wP]}),mP),CP=((yP=function t(){_classCallCheck(this,t)}).\u0275mod=r.Mb({type:yP,bootstrap:[$D]}),yP.\u0275inj=r.Lb({factory:function(t){return new(t||yP)},providers:[],imports:[[fe,gl,JD,bD,Ep,Tp,cy,gy.a,fD,kP,gy.a.initializeApp(i)]]}),yP);Object(r.T)(),le().bootstrapModule(CP).catch((function(t){return console.error(t)}))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);